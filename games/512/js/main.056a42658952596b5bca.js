!function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=32)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,r,i){void 0===r&&(r=!1),n(this,t),this._fn=e,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return i(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var a=function(){function t(){n(this,t),this._head=this._tail=void 0}return i(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,e.default=a,t.exports=e.default},function(t,e,r){var i,n,o;!function(r){var s=/iPhone/i,a=/iPod/i,h=/iPad/i,u=/\bAndroid(?:.+)Mobile\b/i,c=/Android/i,l=/\bAndroid(?:.+)SD4930UR\b/i,p=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,f=/Windows Phone/i,d=/\bWindows(?:.+)ARM\b/i,v=/BlackBerry/i,y=/BB10/i,g=/Opera Mini/i,m=/\b(CriOS|Chrome)(?:.+)Mobile/i,_=/Mobile(?:.+)Firefox\b/i;function b(t,e){return t.test(e)}function x(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),r=e.split("[FBAN");void 0!==r[1]&&(e=r[0]),void 0!==(r=e.split("Twitter"))[1]&&(e=r[0]);var i={apple:{phone:b(s,e)&&!b(f,e),ipod:b(a,e),tablet:!b(s,e)&&b(h,e)&&!b(f,e),device:(b(s,e)||b(a,e)||b(h,e))&&!b(f,e)},amazon:{phone:b(l,e),tablet:!b(l,e)&&b(p,e),device:b(l,e)||b(p,e)},android:{phone:!b(f,e)&&b(l,e)||!b(f,e)&&b(u,e),tablet:!b(f,e)&&!b(l,e)&&!b(u,e)&&(b(p,e)||b(c,e)),device:!b(f,e)&&(b(l,e)||b(p,e)||b(u,e)||b(c,e))||b(/\bokhttp\b/i,e)},windows:{phone:b(f,e),tablet:b(d,e),device:b(f,e)||b(d,e)},other:{blackberry:b(v,e),blackberry10:b(y,e),opera:b(g,e),firefox:b(_,e),chrome:b(m,e),device:b(v,e)||b(y,e)||b(g,e)||b(_,e)||b(m,e)}};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}t.exports&&"undefined"==typeof window?t.exports=x:t.exports&&"undefined"!=typeof window?(t.exports=x(),t.exports.isMobile=x):(n=[],i=r.isMobile=x(),void 0===(o="function"==typeof i?i.apply(e,n):i)||(t.exports=o))}(this)},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=r(29),n={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+n.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],r=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=63&n|128):55296==(64512&n)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++i)),e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=63&n|128):(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=63&n|128)}return e},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],n=0;n<t.length;n+=3){var o=t[n],s=n+1<t.length,a=s?t[n+1]:0,h=n+2<t.length,u=h?t[n+2]:0,c=o>>2,l=(3&o)<<4|a>>4,p=(15&a)<<2|u>>6,f=63&u;h||(f=64,s||(p=64)),i.push(r[c],r[l],r[p],r[f])}return i.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],r=0,i=0;r<t.length;){var n=t[r++];if(n<128)e[i++]=String.fromCharCode(n);else if(n>191&&n<224){var o=t[r++];e[i++]=String.fromCharCode((31&n)<<6|63&o)}else if(n>239&&n<365){var s=((7&n)<<18|(63&(o=t[r++]))<<12|(63&(a=t[r++]))<<6|63&t[r++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{o=t[r++];var a=t[r++];e[i++]=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],n=0;n<t.length;){var o=r[t.charAt(n++)],s=n<t.length?r[t.charAt(n)]:0,a=++n<t.length?r[t.charAt(n)]:64,h=++n<t.length?r[t.charAt(n)]:64;if(++n,null==o||null==s||null==a||null==h)throw Error();var u=o<<2|s>>4;if(i.push(u),64!==a){var c=s<<4&240|a>>2;if(i.push(c),64!==h){var l=a<<6&192|h;i.push(l)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){try{return h.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=c(t[r],e[r]));return t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,r){t.resolve=e,t.reject=r}))}return t.prototype.wrapCallback=function(t){var e=this;return function(r,i){r?e.reject(r):e.resolve(i),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(r):t(r,i))}},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var f="FirebaseError",d=function(t){function e(r,i){var n=t.call(this,i)||this;return n.code=r,n.name=f,Object.setPrototypeOf(n,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,v.prototype.create),n}return i.__extends(e,t),e}(Error),v=function(){function t(t,e,r){this.service=t,this.serviceName=e,this.errors=r}return t.prototype.create=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var i=e[0]||{},n=this.service+"/"+t,o=this.errors[t],s=o?y(o,i):"Error",a=this.serviceName+": "+s+" ("+n+").",h=new d(n,a),u=0,c=Object.keys(i);u<c.length;u++){var l=c[u];"_"!==l.slice(-1)&&(l in h&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),h[l]=i[l])}return h},t}();function y(t,e){return t.replace(g,(function(t,r){var i=e[r];return null!=i?i.toString():"<"+r+"?>"}))}var g=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(t){return JSON.parse(t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _=function(t){var e={},r={},i={},n="";try{var o=t.split(".");e=m(u(o[0])||""),r=m(u(o[1])||""),n=o[2],i=r.d||{},delete r.d}catch(t){}return{header:e,claims:r,data:i,signature:n}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var b=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var r=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)r[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)r[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var n=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=4294967295&(n<<1|n>>>31)}var o,s,a=this.chain_[0],h=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=c^h&(u^c),s=1518500249):(o=h^u^c,s=1859775393):i<60?(o=h&u|c&(h|u),s=2400959708):(o=h^u^c,s=3395469782);n=(a<<5|a>>>27)+o+l+s+r[i]&4294967295;l=c,c=u,u=4294967295&(h<<30|h>>>2),h=a,a=n}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+h&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var r=e-this.blockSize,i=0,n=this.buf_,o=this.inbuf_;i<e;){if(0===o)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(n[o]=t.charCodeAt(i),++i,++o===this.blockSize){this.compress_(n),o=0;break}}else for(;i<e;)if(n[o]=t[i],++i,++o===this.blockSize){this.compress_(n),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&e,e/=256;this.compress_(this.buf_);var i=0;for(r=0;r<5;r++)for(var n=24;n>=0;n-=8)t[i]=this.chain_[r]>>n&255,++i;return t},t}();var x=function(){function t(t,e){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(r)})).catch((function(t){r.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,r){var i,n=this;if(void 0===t&&void 0===e&&void 0===r)throw new Error("Missing Observer.");void 0===(i=function(t,e){if("object"!=typeof t||null===t)return!1;for(var r=0,i=e;r<i.length;r++){var n=i[r];if(n in t&&"function"==typeof t[n])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:r}).next&&(i.next=w),void 0===i.error&&(i.error=w),void 0===i.complete&&(i.complete=w);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{n.finalError?i.error(n.finalError):i.complete()}catch(t){}})),this.observers.push(i),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var r=this;this.task.then((function(){if(void 0!==r.observers&&void 0!==r.observers[t])try{e(r.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function w(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(t,e,r){var i="";switch(e){case 1:i=r?"first":"First";break;case 2:i=r?"second":"Second";break;case 3:i=r?"third":"Third";break;case 4:i=r?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var n=t+" failed: ";return n+=i+" argument "}e.CONSTANTS=n,e.Deferred=l,e.ErrorFactory=v,e.FirebaseError=d,e.Sha1=b,e.assert=o,e.assertionError=s,e.async=function(t,e){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];Promise.resolve(!0).then((function(){t.apply(void 0,r)})).catch((function(t){e&&e(t)}))}},e.base64=h,e.base64Decode=u,e.base64Encode=function(t){var e=a(t);return h.encodeByteArray(e,!0)},e.contains=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var r=new x(t,e);return r.subscribe.bind(r)},e.decode=_,e.deepCopy=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return c(void 0,t)},e.deepExtend=c,e.errorPrefix=T,e.getUA=p,e.isAdmin=function(t){var e=_(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===n.NODE_CLIENT||!0===n.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(t){var e=_(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=_(t).claims,r=Math.floor((new Date).getTime()/1e3),i=0,n=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?i=e.nbf:e.hasOwnProperty("iat")&&(i=e.iat),n=e.hasOwnProperty("exp")?e.exp:i+86400),!!r&&!!i&&!!n&&r>=i&&r<=n},e.issuedAtTime=function(t){var e=_(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=m,e.map=function(t,e,r){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=e.call(r,t[n],n,t));return i}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.querystring=function(t){for(var e=[],r=function(t,r){Array.isArray(r)?r.forEach((function(r){e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))},i=0,n=Object.entries(t);i<n.length;i++){var o=n[i];r(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var r=t.split("=");e[r[0]]=r[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,r++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],r=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n>=55296&&n<=56319){var s=n-55296;i++,o(i<t.length,"Surrogate pair missing trail surrogate."),n=65536+(s<<10)+(t.charCodeAt(i)-56320)}n<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=63&n|128):n<65536?(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=63&n|128):(e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=63&n|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,r,i){var n;if(i<e?n="at least "+e:i>r&&(n=0===r?"none":"no more than "+r),n)throw new Error(t+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+n+".")},e.validateCallback=function(t,e,r,i){if((!i||r)&&"function"!=typeof r)throw new Error(T(t,e,i)+"must be a valid function.")},e.validateContextObject=function(t,e,r,i){if((!i||r)&&("object"!=typeof r||null===r))throw new Error(T(t,e,i)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.validateNamespace=function(t,e,r,i){if((!i||r)&&"string"!=typeof r)throw new Error(T(t,e,i)+"must be a valid firebase namespace.")}}).call(this,r(2))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(30),n=r(3),o=function(){function t(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var r=new n.Deferred;this.instancesDeferred.set(e,r);try{var i=this.getOrInitializeService(e);i&&r.resolve(i)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=i.__assign({identifier:s,optional:!1},t),r=e.identifier,n=e.optional,o=this.normalizeInstanceIdentifier(r);try{var a=this.getOrInitializeService(o);if(!a){if(n)return null;throw Error("Service "+this.name+" is not available")}return a}catch(t){if(n)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService(s)}catch(t){}try{for(var n=i.__values(this.instancesDeferred.entries()),o=n.next();!o.done;o=n.next()){var a=i.__read(o.value,2),h=a[0],u=a[1],c=this.normalizeInstanceIdentifier(h);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}();var h=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=h,e.Provider=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n,o=r(28),s=r(3),a=r(4),h=r(31),u=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i),c=new s.ErrorFactory("app","Firebase",u),l="@firebase/app",p="0.5.0",f="[DEFAULT]",d=((n={})[l]="fire-core",n["@firebase/analytics"]="fire-analytics",n["@firebase/auth"]="fire-auth",n["@firebase/database"]="fire-rtdb",n["@firebase/functions"]="fire-fn",n["@firebase/installations"]="fire-iid",n["@firebase/messaging"]="fire-fcm",n["@firebase/performance"]="fire-perf",n["@firebase/remote-config"]="fire-rc",n["@firebase/storage"]="fire-gcs",n["@firebase/firestore"]="fire-fst",n["fire-js"]="fire-js",n["firebase-wrapper"]="fire-js-all",n),v=new h.Logger("@firebase/app"),y=function(){function t(t,e,r){var i,n,h=this;this.firebase_=r,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=s.deepCopy(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",(function(){return h}),"PUBLIC"));try{for(var u=o.__values(this.firebase_.INTERNAL.components.values()),c=u.next();!c.done;c=u.next()){var l=c.value;this._addComponent(l)}}catch(t){i={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(i)throw i.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){v.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw c.create("app-deleted",{appName:this.name_})},t}();y.prototype.name&&y.prototype.options||y.prototype.delete||console.log("dc");var g="7.6.0";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function t(){var e=function(t){var e={},r=new Map,i={__esModule:!0,initializeApp:function(r,n){void 0===n&&(n={});if("object"!=typeof n||null===n){n={name:n}}var o=n;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw c.create("bad-app-name",{appName:String(a)});if(s.contains(e,a))throw c.create("duplicate-app",{appName:a});var h=new t(r,o,i);return e[a]=h,h},app:n,registerVersion:function(t,e,r){var i,n=null!==(i=d[t])&&void 0!==i?i:t;r&&(n+="-"+r);var o=n.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+n+'" with version "'+e+'":'];return o&&u.push('library name "'+n+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void v.warn(u.join(" "))}h(new a.Component(n+"-version",(function(){return{library:n,version:e}}),"VERSION"))},apps:null,SDK_VERSION:g,INTERNAL:{registerComponent:h,removeApp:function(t){delete e[t]},components:r,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function n(t){if(t=t||f,!s.contains(e,t))throw c.create("no-app",{appName:t});return e[t]}function h(a){var h,u,l=a.name;if(r.has(l))return v.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===a.type?i[l]:null;if(r.set(l,a),"PUBLIC"===a.type){var p=function(t){if(void 0===t&&(t=n()),"function"!=typeof t[l])throw c.create("invalid-app-argument",{appName:l});return t[l]()};void 0!==a.serviceProps&&s.deepExtend(p,a.serviceProps),i[l]=p,t.prototype[l]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this._getService.bind(this,l);return r.apply(this,a.multipleInstances?t:[])}}try{for(var f=o.__values(Object.keys(e)),d=f.next();!d.done;d=f.next()){var y=d.value;e[y]._addComponent(a)}}catch(t){h={error:t}}finally{try{d&&!d.done&&(u=f.return)&&u.call(f)}finally{if(h)throw h.error}}return"PUBLIC"===a.type?i[l]:null}return(i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),n.App=t,i)}(y);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){s.deepExtend(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),_=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e,r=t.getComponent();return"VERSION"===(null===(e=r)||void 0===e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(s.isBrowser()&&void 0!==self.firebase){v.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&b.indexOf("LITE")>=0&&v.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var x=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.isNode()&&v.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),x.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",(function(t){return new _(t)}),"PRIVATE")),t.registerVersion(l,p,e),t.registerVersion("fire-js","")}(w),e.default=w,e.firebase=w},function(t,e,r){"use strict";var i=r(22),n=r(24);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){n.isString(t)&&(t=_(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),l=["%","/","?",";","#"].concat(c),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=r(25);function _(t,e,r){if(t&&n.isObject(t)&&t instanceof o)return t;var i=new o;return i.parse(t,e,r),i}o.prototype.parse=function(t,e,r){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",u=t.split(a);u[0]=u[0].replace(/\\/g,"/");var _=t=u.join(a);if(_=_.trim(),!r&&1===t.split("#").length){var b=h.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=s.exec(_);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,_=_.substr(x.length)}if(r||x||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===_.substr(0,2);!T||x&&y[x]||(_=_.substr(2),this.slashes=!0)}if(!y[x]&&(T||x&&!g[x])){for(var E,S,O=-1,I=0;I<p.length;I++){-1!==(A=_.indexOf(p[I]))&&(-1===O||A<O)&&(O=A)}-1!==(S=-1===O?_.lastIndexOf("@"):_.lastIndexOf("@",O))&&(E=_.slice(0,S),_=_.slice(S+1),this.auth=decodeURIComponent(E)),O=-1;for(I=0;I<l.length;I++){var A;-1!==(A=_.indexOf(l[I]))&&(-1===O||A<O)&&(O=A)}-1===O&&(O=_.length),this.host=_.slice(0,O),_=_.slice(O),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var C=this.hostname.split(/\./),M=(I=0,C.length);I<M;I++){var D=C[I];if(D&&!D.match(f)){for(var R="",N=0,L=D.length;N<L;N++)D.charCodeAt(N)>127?R+="x":R+=D[N];if(!R.match(f)){var k=C.slice(0,I),F=C.slice(I+1),j=D.match(d);j&&(k.push(j[1]),F.unshift(j[2])),F.length&&(_="/"+F.join(".")+_),this.hostname=k.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=i.toASCII(this.hostname));var B=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+B,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!v[w])for(I=0,M=c.length;I<M;I++){var G=c[I];if(-1!==_.indexOf(G)){var z=encodeURIComponent(G);z===G&&(z=escape(G)),_=_.split(G).join(z)}}var H=_.indexOf("#");-1!==H&&(this.hash=_.substr(H),_=_.slice(0,H));var X=_.indexOf("?");if(-1!==X?(this.search=_.substr(X),this.query=_.substr(X+1),e&&(this.query=m.parse(this.query)),_=_.slice(0,X)):e&&(this.search="",this.query={}),_&&(this.pathname=_),g[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var V=this.search||"";this.path=B+V}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(s=m.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+i},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(n.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var r=new o,i=Object.keys(this),s=0;s<i.length;s++){var a=i[s];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),u=0;u<h.length;u++){var c=h[u];"protocol"!==c&&(r[c]=t[c])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!g[t.protocol]){for(var l=Object.keys(t),p=0;p<l.length;p++){var f=l[p];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||y[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var v=r.pathname||"",m=r.search||"";r.path=v+m}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var _=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||_||r.host&&t.pathname,w=x,T=r.pathname&&r.pathname.split("/")||[],E=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(E&&(r.hostname="",r.port=null,r.host&&(""===T[0]?T[0]=r.host:T.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),x=x&&(""===d[0]||""===T[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,T=d;else if(d.length)T||(T=[]),T.pop(),T=T.concat(d),r.search=t.search,r.query=t.query;else if(!n.isNullOrUndefined(t.search)){if(E)r.hostname=r.host=T.shift(),(P=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=P.shift(),r.host=r.hostname=P.shift());return r.search=t.search,r.query=t.query,n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=T.slice(-1)[0],O=(r.host||t.host||T.length>1)&&("."===S||".."===S)||""===S,I=0,A=T.length;A>=0;A--)"."===(S=T[A])?T.splice(A,1):".."===S?(T.splice(A,1),I++):I&&(T.splice(A,1),I--);if(!x&&!w)for(;I--;I)T.unshift("..");!x||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),O&&"/"!==T.join("/").substr(-1)&&T.push("");var P,C=""===T[0]||T[0]&&"/"===T[0].charAt(0);E&&(r.hostname=r.host=C?"":T.length?T.shift():"",(P=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=P.shift(),r.host=r.hostname=P.shift()));return(x=x||r.host&&T.length)&&!C&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e,r){"use strict";t.exports=function(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[e.strictMode?"strict":"loose"].exec(t),n={},o=14;o--;)n[r.key[o]]=i[o]||"";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,(function(t,e,i){e&&(n[r.q.name][e]=i)})),n}},function(t,e,r){var i;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(n,o,s,a){"use strict";var h,u=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),l="function",p=Math.round,f=Math.abs,d=Date.now;function v(t,e,r){return setTimeout(w(t,r),e)}function y(t,e,r){return!!Array.isArray(t)&&(g(t,r[e],r),!0)}function g(t,e,r){var i;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==a)for(i=0;i<t.length;)e.call(r,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(r,t[i],i,t)}function m(t,e,r){var i="DEPRECATED METHOD: "+e+"\n"+r+" AT \n";return function(){var e=new Error("get-stack-trace"),r=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=n.console&&(n.console.warn||n.console.log);return o&&o.call(n.console,i,r),t.apply(this,arguments)}}h="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(i!==a&&null!==i)for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}return e}:Object.assign;var _=m((function(t,e,r){for(var i=Object.keys(e),n=0;n<i.length;)(!r||r&&t[i[n]]===a)&&(t[i[n]]=e[i[n]]),n++;return t}),"extend","Use `assign`."),b=m((function(t,e){return _(t,e,!0)}),"merge","Use `assign`.");function x(t,e,r){var i,n=e.prototype;(i=t.prototype=Object.create(n)).constructor=t,i._super=n,r&&h(i,r)}function w(t,e){return function(){return t.apply(e,arguments)}}function T(t,e){return typeof t==l?t.apply(e&&e[0]||a,e):t}function E(t,e){return t===a?e:t}function S(t,e,r){g(P(e),(function(e){t.addEventListener(e,r,!1)}))}function O(t,e,r){g(P(e),(function(e){t.removeEventListener(e,r,!1)}))}function I(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function A(t,e){return t.indexOf(e)>-1}function P(t){return t.trim().split(/\s+/g)}function C(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var i=0;i<t.length;){if(r&&t[i][r]==e||!r&&t[i]===e)return i;i++}return-1}function M(t){return Array.prototype.slice.call(t,0)}function D(t,e,r){for(var i=[],n=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];C(n,s)<0&&i.push(t[o]),n[o]=s,o++}return r&&(i=e?i.sort((function(t,r){return t[e]>r[e]})):i.sort()),i}function R(t,e){for(var r,i,n=e[0].toUpperCase()+e.slice(1),o=0;o<u.length;){if((i=(r=u[o])?r+n:e)in t)return i;o++}return a}var N=1;function L(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||n}var k="ontouchstart"in n,F=R(n,"PointerEvent")!==a,j=k&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B=25,U=1,G=2,z=4,H=8,X=1,V=2,Y=4,W=8,q=16,K=V|Y,Z=W|q,$=K|Z,J=["x","y"],Q=["clientX","clientY"];function tt(t,e){var r=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){T(t.options.enable,[t])&&r.handler(e)},this.init()}function et(t,e,r){var i=r.pointers.length,n=r.changedPointers.length,o=e&U&&i-n==0,s=e&(z|H)&&i-n==0;r.isFirst=!!o,r.isFinal=!!s,o&&(t.session={}),r.eventType=e,function(t,e){var r=t.session,i=e.pointers,n=i.length;r.firstInput||(r.firstInput=rt(e));n>1&&!r.firstMultiple?r.firstMultiple=rt(e):1===n&&(r.firstMultiple=!1);var o=r.firstInput,s=r.firstMultiple,h=s?s.center:o.center,u=e.center=it(i);e.timeStamp=d(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=at(h,u),e.distance=st(h,u),function(t,e){var r=e.center,i=t.offsetDelta||{},n=t.prevDelta||{},o=t.prevInput||{};e.eventType!==U&&o.eventType!==z||(n=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:r.x,y:r.y});e.deltaX=n.x+(r.x-i.x),e.deltaY=n.y+(r.y-i.y)}(r,e),e.offsetDirection=ot(e.deltaX,e.deltaY);var c=nt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=f(c.x)>f(c.y)?c.x:c.y,e.scale=s?(l=s.pointers,p=i,st(p[0],p[1],Q)/st(l[0],l[1],Q)):1,e.rotation=s?function(t,e){return at(e[1],e[0],Q)+at(t[1],t[0],Q)}(s.pointers,i):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,function(t,e){var r,i,n,o,s=t.lastInterval||e,h=e.timeStamp-s.timeStamp;if(e.eventType!=H&&(h>B||s.velocity===a)){var u=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,l=nt(h,u,c);i=l.x,n=l.y,r=f(l.x)>f(l.y)?l.x:l.y,o=ot(u,c),t.lastInterval=e}else r=s.velocity,i=s.velocityX,n=s.velocityY,o=s.direction;e.velocity=r,e.velocityX=i,e.velocityY=n,e.direction=o}(r,e);var l,p;var v=t.element;I(e.srcEvent.target,v)&&(v=e.srcEvent.target);e.target=v}(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function rt(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:p(t.pointers[r].clientX),clientY:p(t.pointers[r].clientY)},r++;return{timeStamp:d(),pointers:e,center:it(e),deltaX:t.deltaX,deltaY:t.deltaY}}function it(t){var e=t.length;if(1===e)return{x:p(t[0].clientX),y:p(t[0].clientY)};for(var r=0,i=0,n=0;n<e;)r+=t[n].clientX,i+=t[n].clientY,n++;return{x:p(r/e),y:p(i/e)}}function nt(t,e,r){return{x:e/t||0,y:r/t||0}}function ot(t,e){return t===e?X:f(t)>=f(e)?t<0?V:Y:e<0?W:q}function st(t,e,r){r||(r=J);var i=e[r[0]]-t[r[0]],n=e[r[1]]-t[r[1]];return Math.sqrt(i*i+n*n)}function at(t,e,r){r||(r=J);var i=e[r[0]]-t[r[0]],n=e[r[1]]-t[r[1]];return 180*Math.atan2(n,i)/Math.PI}tt.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(L(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(L(this.element),this.evWin,this.domHandler)}};var ht={mousedown:U,mousemove:G,mouseup:z},ut="mousedown",ct="mousemove mouseup";function lt(){this.evEl=ut,this.evWin=ct,this.pressed=!1,tt.apply(this,arguments)}x(lt,tt,{handler:function(t){var e=ht[t.type];e&U&&0===t.button&&(this.pressed=!0),e&G&&1!==t.which&&(e=z),this.pressed&&(e&z&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var pt={pointerdown:U,pointermove:G,pointerup:z,pointercancel:H,pointerout:H},ft={2:"touch",3:"pen",4:"mouse",5:"kinect"},dt="pointerdown",vt="pointermove pointerup pointercancel";function yt(){this.evEl=dt,this.evWin=vt,tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}n.MSPointerEvent&&!n.PointerEvent&&(dt="MSPointerDown",vt="MSPointerMove MSPointerUp MSPointerCancel"),x(yt,tt,{handler:function(t){var e=this.store,r=!1,i=t.type.toLowerCase().replace("ms",""),n=pt[i],o=ft[t.pointerType]||t.pointerType,s="touch"==o,a=C(e,t.pointerId,"pointerId");n&U&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):n&(z|H)&&(r=!0),a<0||(e[a]=t,this.callback(this.manager,n,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),r&&e.splice(a,1))}});var gt={touchstart:U,touchmove:G,touchend:z,touchcancel:H},mt="touchstart",_t="touchstart touchmove touchend touchcancel";function bt(){this.evTarget=mt,this.evWin=_t,this.started=!1,tt.apply(this,arguments)}function xt(t,e){var r=M(t.touches),i=M(t.changedTouches);return e&(z|H)&&(r=D(r.concat(i),"identifier",!0)),[r,i]}x(bt,tt,{handler:function(t){var e=gt[t.type];if(e===U&&(this.started=!0),this.started){var r=xt.call(this,t,e);e&(z|H)&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:t})}}});var wt={touchstart:U,touchmove:G,touchend:z,touchcancel:H},Tt="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=Tt,this.targetIds={},tt.apply(this,arguments)}function St(t,e){var r=M(t.touches),i=this.targetIds;if(e&(U|G)&&1===r.length)return i[r[0].identifier]=!0,[r,r];var n,o,s=M(t.changedTouches),a=[],h=this.target;if(o=r.filter((function(t){return I(t.target,h)})),e===U)for(n=0;n<o.length;)i[o[n].identifier]=!0,n++;for(n=0;n<s.length;)i[s[n].identifier]&&a.push(s[n]),e&(z|H)&&delete i[s[n].identifier],n++;return a.length?[D(o.concat(a),"identifier",!0),a]:void 0}x(Et,tt,{handler:function(t){var e=wt[t.type],r=St.call(this,t,e);r&&this.callback(this.manager,e,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:t})}});var Ot=2500,It=25;function At(){tt.apply(this,arguments);var t=w(this.handler,this);this.touch=new Et(this.manager,t),this.mouse=new lt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Pt(t,e){t&U?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(z|H)&&Ct.call(this,e)}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var r={x:e.clientX,y:e.clientY};this.lastTouches.push(r);var i=this.lastTouches;setTimeout((function(){var t=i.indexOf(r);t>-1&&i.splice(t,1)}),Ot)}}function Mt(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var n=this.lastTouches[i],o=Math.abs(e-n.x),s=Math.abs(r-n.y);if(o<=It&&s<=It)return!0}return!1}x(At,tt,{handler:function(t,e,r){var i="touch"==r.pointerType,n="mouse"==r.pointerType;if(!(n&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(i)Pt.call(this,e,r);else if(n&&Mt.call(this,r))return;this.callback(t,e,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Dt=R(c.style,"touchAction"),Rt=Dt!==a,Nt="auto",Lt="manipulation",kt="none",Ft="pan-x",jt="pan-y",Bt=function(){if(!Rt)return!1;var t={},e=n.CSS&&n.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){t[r]=!e||n.CSS.supports("touch-action",r)})),t}();function Ut(t,e){this.manager=t,this.set(e)}Ut.prototype={set:function(t){"compute"==t&&(t=this.compute()),Rt&&this.manager.element.style&&Bt[t]&&(this.manager.element.style[Dt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,(function(e){T(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(A(t,kt))return kt;var e=A(t,Ft),r=A(t,jt);if(e&&r)return kt;if(e||r)return e?Ft:jt;if(A(t,Lt))return Lt;return Nt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,r=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,n=A(i,kt)&&!Bt[kt],o=A(i,jt)&&!Bt[jt],s=A(i,Ft)&&!Bt[Ft];if(n){var a=1===t.pointers.length,h=t.distance<2,u=t.deltaTime<250;if(a&&h&&u)return}if(!s||!o)return n||o&&r&K||s&&r&Z?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Gt=1,zt=2,Ht=4,Xt=8,Vt=Xt,Yt=16;function Wt(t){this.options=h({},this.defaults,t||{}),this.id=N++,this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=Gt,this.simultaneous={},this.requireFail=[]}function qt(t){return t&Yt?"cancel":t&Xt?"end":t&Ht?"move":t&zt?"start":""}function Kt(t){return t==q?"down":t==W?"up":t==V?"left":t==Y?"right":""}function Zt(t,e){var r=e.manager;return r?r.get(t):t}function $t(){Wt.apply(this,arguments)}function Jt(){$t.apply(this,arguments),this.pX=null,this.pY=null}function Qt(){$t.apply(this,arguments)}function te(){Wt.apply(this,arguments),this._timer=null,this._input=null}function ee(){$t.apply(this,arguments)}function re(){$t.apply(this,arguments)}function ie(){Wt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ne(t,e){return(e=e||{}).recognizers=E(e.recognizers,ne.defaults.preset),new oe(t,e)}Wt.prototype={defaults:{},set:function(t){return h(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(y(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Zt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return y(t,"dropRecognizeWith",this)?this:(t=Zt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(y(t,"requireFailure",this))return this;var e=this.requireFail;return-1===C(e,t=Zt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(y(t,"dropRequireFailure",this))return this;t=Zt(t,this);var e=C(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,r=this.state;function i(r){e.manager.emit(r,t)}r<Xt&&i(e.options.event+qt(r)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),r>=Xt&&i(e.options.event+qt(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Gt)))return!1;t++}return!0},recognize:function(t){var e=h({},t);if(!T(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Vt|Yt|32)&&(this.state=Gt),this.state=this.process(e),this.state&(zt|Ht|Xt|Yt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},x($t,Wt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,r=t.eventType,i=e&(zt|Ht),n=this.attrTest(t);return i&&(r&H||!n)?e|Yt:i||n?r&z?e|Xt:e&zt?e|Ht:zt:32}}),x(Jt,$t,{defaults:{event:"pan",threshold:10,pointers:1,direction:$},getTouchAction:function(){var t=this.options.direction,e=[];return t&K&&e.push(jt),t&Z&&e.push(Ft),e},directionTest:function(t){var e=this.options,r=!0,i=t.distance,n=t.direction,o=t.deltaX,s=t.deltaY;return n&e.direction||(e.direction&K?(n=0===o?X:o<0?V:Y,r=o!=this.pX,i=Math.abs(t.deltaX)):(n=0===s?X:s<0?W:q,r=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=n,r&&i>e.threshold&&n&e.direction},attrTest:function(t){return $t.prototype.attrTest.call(this,t)&&(this.state&zt||!(this.state&zt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Kt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),x(Qt,$t,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&zt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),x(te,Wt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Nt]},process:function(t){var e=this.options,r=t.pointers.length===e.pointers,i=t.distance<e.threshold,n=t.deltaTime>e.time;if(this._input=t,!i||!r||t.eventType&(z|H)&&!n)this.reset();else if(t.eventType&U)this.reset(),this._timer=v((function(){this.state=Vt,this.tryEmit()}),e.time,this);else if(t.eventType&z)return Vt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Vt&&(t&&t.eventType&z?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),x(ee,$t,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&zt)}}),x(re,$t,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:K|Z,pointers:1},getTouchAction:function(){return Jt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,r=this.options.direction;return r&(K|Z)?e=t.overallVelocity:r&K?e=t.overallVelocityX:r&Z&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&r&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&t.eventType&z},emit:function(t){var e=Kt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),x(ie,Wt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Lt]},process:function(t){var e=this.options,r=t.pointers.length===e.pointers,i=t.distance<e.threshold,n=t.deltaTime<e.time;if(this.reset(),t.eventType&U&&0===this.count)return this.failTimeout();if(i&&n&&r){if(t.eventType!=z)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||st(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=v((function(){this.state=Vt,this.tryEmit()}),e.interval,this),zt):Vt}return 32},failTimeout:function(){return this._timer=v((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Vt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ne.VERSION="2.0.7",ne.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ee,{enable:!1}],[Qt,{enable:!1},["rotate"]],[re,{direction:K}],[Jt,{direction:K},["swipe"]],[ie],[ie,{event:"doubletap",taps:2},["tap"]],[te]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function oe(t,e){var r;this.options=h({},ne.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((r=this).options.inputClass||(F?yt:j?Et:k?At:lt))(r,et),this.touchAction=new Ut(this,this.options.touchAction),se(this,!0),g(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function se(t,e){var r,i=t.element;i.style&&(g(t.options.cssProps,(function(n,o){r=R(i.style,o),e?(t.oldCssProps[r]=i.style[r],i.style[r]=n):i.style[r]=t.oldCssProps[r]||""})),e||(t.oldCssProps={}))}oe.prototype={set:function(t){return h(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var r;this.touchAction.preventDefaults(t);var i=this.recognizers,n=e.curRecognizer;(!n||n&&n.state&Vt)&&(n=e.curRecognizer=null);for(var o=0;o<i.length;)r=i[o],2===e.stopped||n&&r!=n&&!r.canRecognizeWith(n)?r.reset():r.recognize(t),!n&&r.state&(zt|Ht|Xt)&&(n=e.curRecognizer=r),o++}},get:function(t){if(t instanceof Wt)return t;for(var e=this.recognizers,r=0;r<e.length;r++)if(e[r].options.event==t)return e[r];return null},add:function(t){if(y(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(y(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,r=C(e,t);-1!==r&&(e.splice(r,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var r=this.handlers;return g(P(t),(function(t){r[t]=r[t]||[],r[t].push(e)})),this}},off:function(t,e){if(t!==a){var r=this.handlers;return g(P(t),(function(t){e?r[t]&&r[t].splice(C(r[t],e),1):delete r[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var r=o.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}(t,e);var r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](e),i++}},destroy:function(){this.element&&se(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(ne,{INPUT_START:U,INPUT_MOVE:G,INPUT_END:z,INPUT_CANCEL:H,STATE_POSSIBLE:Gt,STATE_BEGAN:zt,STATE_CHANGED:Ht,STATE_ENDED:Xt,STATE_RECOGNIZED:Vt,STATE_CANCELLED:Yt,STATE_FAILED:32,DIRECTION_NONE:X,DIRECTION_LEFT:V,DIRECTION_RIGHT:Y,DIRECTION_UP:W,DIRECTION_DOWN:q,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:Z,DIRECTION_ALL:$,Manager:oe,Input:tt,TouchAction:Ut,TouchInput:Et,MouseInput:lt,PointerEventInput:yt,TouchMouseInput:At,SingleTouchInput:bt,Recognizer:Wt,AttrRecognizer:$t,Tap:ie,Pan:Jt,Swipe:re,Pinch:Qt,Rotate:ee,Press:te,on:S,off:O,each:g,merge:b,extend:_,assign:h,inherit:x,bindFn:w,prefixed:R}),(void 0!==n?n:"undefined"!=typeof self?self:{}).Hammer=ne,(i=function(){return ne}.call(e,r,e,t))===a||(t.exports=i)}(window,document)},function(t,e,r){"use strict";var i,n=(i=r(5))&&"object"==typeof i&&"default"in i?i.default:i;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
n.registerVersion("firebase","7.6.1","app"),t.exports=n},function(t,e){var r,i,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var h,u=[],c=!1,l=-1;function p(){c&&h&&(c=!1,h.length?u=h.concat(u):l=-1,u.length&&f())}function f(){if(!c){var t=a(p);c=!0;for(var e=u.length;e;){for(h=u,u=[];++l<e;)h&&h[l].run();l=-1,e=u.length}h=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new d(t,e)),1!==u.length||c||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.prependListener=v,n.prependOnceListener=v,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,r){"use strict";var i=Object.prototype.hasOwnProperty,n="~";function o(){}function s(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new s(r,i||t,o),h=n?n+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),u.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)i.call(t,e)&&r.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},u.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},u.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},u.prototype.emit=function(t,e,r,i,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var h,u,c=this._events[a],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,i),!0;case 5:return c.fn.call(c.context,e,r,i,o),!0;case 6:return c.fn.call(c.context,e,r,i,o,s),!0}for(u=1,h=new Array(l-1);u<l;u++)h[u-1]=arguments[u];c.fn.apply(c.context,h)}else{var p,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),l){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,r);break;case 4:c[u].fn.call(c[u].context,e,r,i);break;default:if(!h)for(p=1,h=new Array(l-1);p<l;p++)h[p-1]=arguments[p];c[u].fn.apply(c[u].context,h)}}return!0},u.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},u.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},u.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return h(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||h(this,o);else{for(var a=0,u=[],c=s.length;a<c;a++)(s[a].fn!==e||i&&!s[a].once||r&&s[a].context!==r)&&u.push(s[a]);u.length?this._events[o]=1===u.length?u[0]:u:h(this,o)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&h(this,e)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,a,h,u,c,f,d,y=e&&e.length,g=y?e[0]*r:t.length,m=n(t,0,g,r,!0),_=[];if(!m||m.next===m.prev)return _;if(y&&(m=function(t,e,r,i){var s,a,h,u,c,f=[];for(s=0,a=e.length;s<a;s++)h=e[s]*i,u=s<a-1?e[s+1]*i:t.length,(c=n(t,h,u,i,!1))===c.next&&(c.steiner=!0),f.push(v(c));for(f.sort(l),s=0;s<f.length;s++)p(f[s],r),r=o(r,r.next);return r}(t,e,m,r)),t.length>80*r){i=h=t[0],a=u=t[1];for(var b=r;b<g;b+=r)(c=t[b])<i&&(i=c),(f=t[b+1])<a&&(a=f),c>h&&(h=c),f>u&&(u=f);d=0!==(d=Math.max(h-i,u-a))?1/d:0}return s(m,_,r,i,a,d),_}function n(t,e,r,i,n){var o,s;if(n===A(t,e,r,i)>0)for(o=e;o<r;o+=i)s=S(o,t[o],t[o+1],s);else for(o=r-i;o>=e;o-=i)s=S(o,t[o],t[o+1],s);return s&&_(s,s.next)&&(O(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!_(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{if(O(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function s(t,e,r,i,n,l,p){if(t){!p&&l&&function(t,e,r,i){var n=t;do{null===n.z&&(n.z=d(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,o,s,a,h,u=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,i=r,a=0,e=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;a>0||h>0&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(n=r,r=r.nextZ,a--):(n=i,i=i.nextZ,h--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,u*=2}while(s>1)}(n)}(t,i,n,l);for(var f,v,y=t;t.prev!==t.next;)if(f=t.prev,v=t.next,l?h(t,i,n,l):a(t))e.push(f.i/r),e.push(t.i/r),e.push(v.i/r),O(t),t=v.next,y=v.next;else if((t=v)===y){p?1===p?s(t=u(o(t),e,r),e,r,i,n,l,2):2===p&&c(t,e,r,i,n,l):s(o(t),e,r,i,n,l,1);break}}}function a(t){var e=t.prev,r=t,i=t.next;if(m(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(y(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&m(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function h(t,e,r,i){var n=t.prev,o=t,s=t.next;if(m(n,o,s)>=0)return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,h=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,u=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,c=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,l=d(a,h,e,r,i),p=d(u,c,e,r,i),f=t.prevZ,v=t.nextZ;f&&f.z>=l&&v&&v.z<=p;){if(f!==t.prev&&f!==t.next&&y(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,v!==t.prev&&v!==t.next&&y(n.x,n.y,o.x,o.y,s.x,s.y,v.x,v.y)&&m(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;f&&f.z>=l;){if(f!==t.prev&&f!==t.next&&y(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;v&&v.z<=p;){if(v!==t.prev&&v!==t.next&&y(n.x,n.y,o.x,o.y,s.x,s.y,v.x,v.y)&&m(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function u(t,e,r){var i=t;do{var n=i.prev,s=i.next.next;!_(n,s)&&b(n,i,i.next,s)&&T(n,s)&&T(s,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(s.i/r),O(i),O(i.next),i=t=s),i=i.next}while(i!==t);return o(i)}function c(t,e,r,i,n,a){var h=t;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&g(h,u)){var c=E(h,u);return h=o(h,h.next),c=o(c,c.next),s(h,e,r,i,n,a),void s(c,e,r,i,n,a)}u=u.next}h=h.next}while(h!==t)}function l(t,e){return t.x-e.x}function p(t,e){if(e=function(t,e){var r,i=e,n=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&a>s){if(s=a,a===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===s)return r;var h,u=r,c=r.x,l=r.y,p=1/0;i=r;do{n>=i.x&&i.x>=c&&n!==i.x&&y(o<l?n:s,o,c,l,o<l?s:n,o,i.x,i.y)&&(h=Math.abs(o-i.y)/(n-i.x),T(i,t)&&(h<p||h===p&&(i.x>r.x||i.x===r.x&&f(r,i)))&&(r=i,p=h)),i=i.next}while(i!==u);return r}(t,e)){var r=E(e,t);o(r,r.next)}}function f(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function d(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function v(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function y(t,e,r,i,n,o,s,a){return(n-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(n-s)*(i-a)>=0}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&b(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||_(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,r,i){var n=w(m(t,e,r)),o=w(m(t,e,i)),s=w(m(r,i,t)),a=w(m(r,i,e));return n!==o&&s!==a||(!(0!==n||!x(t,r,e))||(!(0!==o||!x(t,i,e))||(!(0!==s||!x(r,t,i))||!(0!==a||!x(r,e,i)))))}function x(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function w(t){return t>0?1:t<0?-1:0}function T(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function E(t,e){var r=new I(t.i,t.x,t.y),i=new I(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function S(t,e,r,i){var n=new I(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function O(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function I(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,o=e,s=r-i;o<r;o+=i)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}t.exports=i,t.exports.default=i,i.deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,s=Math.abs(A(t,0,o,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,c=a<h-1?e[a+1]*r:t.length;s-=Math.abs(A(t,u,c,r))}var l=0;for(a=0;a<i.length;a+=3){var p=i[a]*r,f=i[a+1]*r,d=i[a+2]*r;l+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[n][o][s]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){(function(i,n){var o;!function(i){var s=i.Promise,a=s&&"resolve"in s&&"reject"in s&&"all"in s&&"race"in s&&function(){var t;return new s((function(e){t=e})),"function"==typeof t}();e?(e.Promise=a?s:I,e.Polyfill=I):void 0===(o=function(){return a?s:I}.call(e,r,e,t))||(t.exports=o);var h="pending",u="sealed",c="fulfilled",l="rejected",p=function(){};function f(t){return"[object Array]"===Object.prototype.toString.call(t)}var d,v=void 0!==n?n:setTimeout,y=[];function g(){for(var t=0;t<y.length;t++)y[t][0](y[t][1]);y=[],d=!1}function m(t,e){y.push([t,e]),d||(d=!0,v(g,0))}function _(t){var e=t.owner,r=e.state_,i=e.data_,n=t[r],o=t.then;if("function"==typeof n){r=c;try{i=n(i)}catch(t){T(o,t)}}b(o,i)||(r===c&&x(o,i),r===l&&T(o,i))}function b(t,e){var r;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var i=e.then;if("function"==typeof i)return i.call(e,(function(i){r||(r=!0,e!==i?x(t,i):w(t,i))}),(function(e){r||(r=!0,T(t,e))})),!0}}catch(e){return r||T(t,e),!0}return!1}function x(t,e){t!==e&&b(t,e)||w(t,e)}function w(t,e){t.state_===h&&(t.state_=u,t.data_=e,m(S,t))}function T(t,e){t.state_===h&&(t.state_=u,t.data_=e,m(O,t))}function E(t){var e=t.then_;t.then_=void 0;for(var r=0;r<e.length;r++)_(e[r])}function S(t){t.state_=c,E(t)}function O(t){t.state_=l,E(t)}function I(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof I==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,e){function r(t){T(e,t)}try{t((function(t){x(e,t)}),r)}catch(t){r(t)}}(t,this)}I.prototype={constructor:I,state_:h,then_:null,data_:void 0,then:function(t,e){var r={owner:this,then:new this.constructor(p),fulfilled:t,rejected:e};return this.state_===c||this.state_===l?m(_,r):this.then_.push(r),r.then},catch:function(t){return this.then(null,t)}},I.all=function(t){if(!f(t))throw new TypeError("You must pass an array to Promise.all().");return new this((function(e,r){var i=[],n=0;function o(t){return n++,function(r){i[t]=r,--n||e(i)}}for(var s,a=0;a<t.length;a++)(s=t[a])&&"function"==typeof s.then?s.then(o(a),r):i[a]=s;n||e(i)}))},I.race=function(t){if(!f(t))throw new TypeError("You must pass an array to Promise.race().");return new this((function(e,r){for(var i,n=0;n<t.length;n++)(i=t[n])&&"function"==typeof i.then?i.then(e,r):e(i)}))},I.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this((function(e){e(t)}))},I.reject=function(t){return new this((function(e,r){r(t)}))}}("undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:this)}).call(this,r(2),r(20).setImmediate)},function(t,e,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,a,h=s(t),u=1;u<arguments.length;u++){for(var c in r=Object(arguments[u]))n.call(r,c)&&(h[c]=r[c]);if(i){a=i(r);for(var l=0;l<a.length;l++)o.call(r,a[l])&&(h[a[l]]=r[a[l]])}}return h}},function(t,e,r){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function r(t){return new Promise((function(e,r){t.onsuccess=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function i(t,e,i){var n,o=new Promise((function(o,s){r(n=t[e].apply(t,i)).then(o,s)}));return o.request=n,o}function n(t,e,r){var n=i(t,e,r);return n.then((function(t){if(t)return new c(t,n.request)}))}function o(t,e,r){r.forEach((function(r){Object.defineProperty(t.prototype,r,{get:function(){return this[e][r]},set:function(t){this[e][r]=t}})}))}function s(t,e,r,n){n.forEach((function(n){n in r.prototype&&(t.prototype[n]=function(){return i(this[e],n,arguments)})}))}function a(t,e,r,i){i.forEach((function(i){i in r.prototype&&(t.prototype[i]=function(){return this[e][i].apply(this[e],arguments)})}))}function h(t,e,r,i){i.forEach((function(i){i in r.prototype&&(t.prototype[i]=function(){return n(this[e],i,arguments)})}))}function u(t){this._index=t}function c(t,e){this._cursor=t,this._request=e}function l(t){this._store=t}function p(t){this._tx=t,this.complete=new Promise((function(e,r){t.oncomplete=function(){e()},t.onerror=function(){r(t.error)},t.onabort=function(){r(t.error)}}))}function f(t,e,r){this._db=t,this.oldVersion=e,this.transaction=new p(r)}function d(t){this._db=t}o(u,"_index",["name","keyPath","multiEntry","unique"]),s(u,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),h(u,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(c,"_cursor",["direction","key","primaryKey","value"]),s(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(c.prototype[t]=function(){var e=this,i=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,i),r(e._request).then((function(t){if(t)return new c(t,e._request)}))}))})})),l.prototype.createIndex=function(){return new u(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new u(this._store.index.apply(this._store,arguments))},o(l,"_store",["name","keyPath","indexNames","autoIncrement"]),s(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),h(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(l,"_store",IDBObjectStore,["deleteIndex"]),p.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},o(p,"_tx",["objectStoreNames","mode"]),a(p,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new p(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[l,u].forEach((function(r){t in r.prototype&&(r.prototype[t.replace("open","iterate")]=function(){var r=e(arguments),i=r[r.length-1],n=this._store||this._index,o=n[t].apply(n,r.slice(0,-1));o.onsuccess=function(){i(o.result)}})}))})),[u,l].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var r=this,i=[];return new Promise((function(n){r.iterateCursor(t,(function(t){t?(i.push(t.value),void 0===e||i.length!=e?t.continue():n(i)):n(i)}))}))})})),t.openDb=function(t,e,r){var n=i(indexedDB,"open",[t,e]),o=n.request;return o&&(o.onupgradeneeded=function(t){r&&r(new f(o.result,t.oldVersion,o.transaction))}),n.then((function(t){return new d(t)}))},t.deleteDb=function(t){return i(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,r){(function(i,n){var o,s;
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */void 0===(s="function"==typeof(o=function(){"use strict";var t,e=Function.call.bind(Function.apply),r=Function.call.bind(Function.call),o=Array.isArray,s=Object.keys,a=function(t){return function(){return!e(t,this,arguments)}},h=function(t){try{return t(),!1}catch(t){return!0}},u=function(t){try{return t()}catch(t){return!1}},c=a(h),l=function(){return!h((function(){return Object.defineProperty({},"x",{get:function(){}})}))},p=!!Object.defineProperty&&l(),f="foo"===function(){}.name,d=Function.call.bind(Array.prototype.forEach),v=Function.call.bind(Array.prototype.reduce),y=Function.call.bind(Array.prototype.filter),g=Function.call.bind(Array.prototype.some),m=function(t,e,r,i){!i&&e in t||(p?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:r}):t[e]=r)},_=function(t,e,r){d(s(e),(function(i){var n=e[i];m(t,i,n,!!r)}))},b=Function.call.bind(Object.prototype.toString),x=function(t){return"function"==typeof t},w={getter:function(t,e,r){if(!p)throw new TypeError("getters require true ES5 support");Object.defineProperty(t,e,{configurable:!0,enumerable:!1,get:r})},proxy:function(t,e,r){if(!p)throw new TypeError("getters require true ES5 support");var i=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,{configurable:i.configurable,enumerable:i.enumerable,get:function(){return t[e]},set:function(r){t[e]=r}})},redefine:function(t,e,r){if(p){var i=Object.getOwnPropertyDescriptor(t,e);i.value=r,Object.defineProperty(t,e,i)}else t[e]=r},defineByDescriptor:function(t,e,r){p?Object.defineProperty(t,e,r):"value"in r&&(t[e]=r.value)},preserveToString:function(t,e){e&&x(e.toString)&&m(t,"toString",e.toString.bind(e),!0)}},T=Object.create||function(t,e){var r=function(){};r.prototype=t;var i=new r;return void 0!==e&&s(e).forEach((function(t){w.defineByDescriptor(i,t,e[t])})),i},E=function(t,e){return!!Object.setPrototypeOf&&u((function(){var r=function e(r){var i=new t(r);return Object.setPrototypeOf(i,e.prototype),i};return Object.setPrototypeOf(r,t),r.prototype=T(t.prototype,{constructor:{value:r}}),e(r)}))},S=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")},O=S(),I=O.isFinite,A=Function.call.bind(String.prototype.indexOf),P=Function.apply.bind(Array.prototype.indexOf),C=Function.call.bind(Array.prototype.concat),M=Function.call.bind(String.prototype.slice),D=Function.call.bind(Array.prototype.push),R=Function.apply.bind(Array.prototype.push),N=Function.call.bind(Array.prototype.shift),L=Math.max,k=Math.min,F=Math.floor,j=Math.abs,B=Math.exp,U=Math.log,G=Math.sqrt,z=Function.call.bind(Object.prototype.hasOwnProperty),H=function(){},X=O.Map,V=X&&X.prototype.delete,Y=X&&X.prototype.get,W=X&&X.prototype.has,q=X&&X.prototype.set,K=O.Symbol||{},Z=K.species||"@@species",$=Number.isNaN||function(t){return t!=t},J=Number.isFinite||function(t){return"number"==typeof t&&I(t)},Q=x(Math.sign)?Math.sign:function(t){var e=Number(t);return 0===e?e:$(e)?e:e<0?-1:1},tt=function(t){var e=Number(t);return e<-1||$(e)?NaN:0===e||e===1/0?e:-1===e?-1/0:1+e-1==0?e:e*(U(1+e)/(1+e-1))},et=function(t){return"[object Arguments]"===b(t)},rt=function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==b(t)&&"[object Function]"===b(t.callee)},it=et(arguments)?et:rt,nt={primitive:function(t){return null===t||"function"!=typeof t&&"object"!=typeof t},string:function(t){return"[object String]"===b(t)},regex:function(t){return"[object RegExp]"===b(t)},symbol:function(t){return"function"==typeof O.Symbol&&"symbol"==typeof t}},ot=function(t,e,r){var i=t[e];m(t,e,r,!0),w.preserveToString(t[e],i)},st="function"==typeof K&&"function"==typeof K.for&&nt.symbol(K()),at=nt.symbol(K.iterator)?K.iterator:"_es6-shim iterator_";O.Set&&"function"==typeof(new O.Set)["@@iterator"]&&(at="@@iterator"),O.Reflect||m(O,"Reflect",{},!0);var ht,ut=O.Reflect,ct=String,lt="undefined"!=typeof document&&document?document.all:null,pt=null==lt?function(t){return null==t}:function(t){return null==t&&t!==lt},ft={Call:function(t,r){var i=arguments.length>2?arguments[2]:[];if(!ft.IsCallable(t))throw new TypeError(t+" is not a function");return e(t,r,i)},RequireObjectCoercible:function(t,e){if(pt(t))throw new TypeError(e||"Cannot call method on "+t);return t},TypeIsObject:function(t){return null!=t&&!0!==t&&!1!==t&&("function"==typeof t||"object"==typeof t||t===lt)},ToObject:function(t,e){return Object(ft.RequireObjectCoercible(t,e))},IsCallable:x,IsConstructor:function(t){return ft.IsCallable(t)},ToInt32:function(t){return ft.ToNumber(t)>>0},ToUint32:function(t){return ft.ToNumber(t)>>>0},ToNumber:function(t){if("[object Symbol]"===b(t))throw new TypeError("Cannot convert a Symbol value to a number");return+t},ToInteger:function(t){var e=ft.ToNumber(t);return $(e)?0:0!==e&&J(e)?(e>0?1:-1)*F(j(e)):e},ToLength:function(t){var e=ft.ToInteger(t);return e<=0?0:e>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e},SameValue:function(t,e){return t===e?0!==t||1/t==1/e:$(t)&&$(e)},SameValueZero:function(t,e){return t===e||$(t)&&$(e)},IsIterable:function(t){return ft.TypeIsObject(t)&&(void 0!==t[at]||it(t))},GetIterator:function(e){if(it(e))return new t(e,"value");var r=ft.GetMethod(e,at);if(!ft.IsCallable(r))throw new TypeError("value is not an iterable");var i=ft.Call(r,e);if(!ft.TypeIsObject(i))throw new TypeError("bad iterator");return i},GetMethod:function(t,e){var r=ft.ToObject(t)[e];if(!pt(r)){if(!ft.IsCallable(r))throw new TypeError("Method not callable: "+e);return r}},IteratorComplete:function(t){return!!t.done},IteratorClose:function(t,e){var r=ft.GetMethod(t,"return");if(void 0!==r){var i,n;try{i=ft.Call(r,t)}catch(t){n=t}if(!e){if(n)throw n;if(!ft.TypeIsObject(i))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(t){var e=arguments.length>1?t.next(arguments[1]):t.next();if(!ft.TypeIsObject(e))throw new TypeError("bad iterator");return e},IteratorStep:function(t){var e=ft.IteratorNext(t);return!ft.IteratorComplete(e)&&e},Construct:function(t,e,r,i){var n=void 0===r?t:r;if(!i&&ut.construct)return ut.construct(t,e,n);var o=n.prototype;ft.TypeIsObject(o)||(o=Object.prototype);var s=T(o),a=ft.Call(t,s,e);return ft.TypeIsObject(a)?a:s},SpeciesConstructor:function(t,e){var r=t.constructor;if(void 0===r)return e;if(!ft.TypeIsObject(r))throw new TypeError("Bad constructor");var i=r[Z];if(pt(i))return e;if(!ft.IsConstructor(i))throw new TypeError("Bad @@species");return i},CreateHTML:function(t,e,r,i){var n=ft.ToString(t),o="<"+e;return""!==r&&(o+=" "+r+'="'+ft.ToString(i).replace(/"/g,"&quot;")+'"'),o+">"+n+"</"+e+">"},IsRegExp:function(t){if(!ft.TypeIsObject(t))return!1;var e=t[K.match];return void 0!==e?!!e:nt.regex(t)},ToString:function(t){return ct(t)}};if(p&&st){var dt=function(t){if(nt.symbol(K[t]))return K[t];var e=K.for("Symbol."+t);return Object.defineProperty(K,t,{configurable:!1,enumerable:!1,writable:!1,value:e}),e};if(!nt.symbol(K.search)){var vt=dt("search"),yt=String.prototype.search;m(RegExp.prototype,vt,(function(t){return ft.Call(yt,t,[this])}));var gt=function(t){var e=ft.RequireObjectCoercible(this);if(!pt(t)){var r=ft.GetMethod(t,vt);if(void 0!==r)return ft.Call(r,t,[e])}return ft.Call(yt,e,[ft.ToString(t)])};ot(String.prototype,"search",gt)}if(!nt.symbol(K.replace)){var mt=dt("replace"),_t=String.prototype.replace;m(RegExp.prototype,mt,(function(t,e){return ft.Call(_t,t,[this,e])}));var bt=function(t,e){var r=ft.RequireObjectCoercible(this);if(!pt(t)){var i=ft.GetMethod(t,mt);if(void 0!==i)return ft.Call(i,t,[r,e])}return ft.Call(_t,r,[ft.ToString(t),e])};ot(String.prototype,"replace",bt)}if(!nt.symbol(K.split)){var xt=dt("split"),wt=String.prototype.split;m(RegExp.prototype,xt,(function(t,e){return ft.Call(wt,t,[this,e])}));var Tt=function(t,e){var r=ft.RequireObjectCoercible(this);if(!pt(t)){var i=ft.GetMethod(t,xt);if(void 0!==i)return ft.Call(i,t,[r,e])}return ft.Call(wt,r,[ft.ToString(t),e])};ot(String.prototype,"split",Tt)}var Et=nt.symbol(K.match),St=Et&&((ht={})[K.match]=function(){return 42},42!=="a".match(ht));if(!Et||St){var Ot=dt("match"),It=String.prototype.match;m(RegExp.prototype,Ot,(function(t){return ft.Call(It,t,[this])}));var At=function(t){var e=ft.RequireObjectCoercible(this);if(!pt(t)){var r=ft.GetMethod(t,Ot);if(void 0!==r)return ft.Call(r,t,[e])}return ft.Call(It,e,[ft.ToString(t)])};ot(String.prototype,"match",At)}}var Pt=function(t,e,r){w.preserveToString(e,t),Object.setPrototypeOf&&Object.setPrototypeOf(t,e),p?d(Object.getOwnPropertyNames(t),(function(i){i in H||r[i]||w.proxy(t,i,e)})):d(Object.keys(t),(function(i){i in H||r[i]||(e[i]=t[i])})),e.prototype=t.prototype,w.redefine(t.prototype,"constructor",e)},Ct=function(){return this},Mt=function(t){p&&!z(t,Z)&&w.getter(t,Z,Ct)},Dt=function(t,e){var r=e||function(){return this};m(t,at,r),!t[at]&&nt.symbol(at)&&(t[at]=r)},Rt=function(t,e,r){p?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:r}):t[e]=r},Nt=function(t,e,r){if(Rt(t,e,r),!ft.SameValue(t[e],r))throw new TypeError("property is nonconfigurable")},Lt=function(t,e,r,i){if(!ft.TypeIsObject(t))throw new TypeError("Constructor requires `new`: "+e.name);var n=e.prototype;ft.TypeIsObject(n)||(n=r);var o=T(n);for(var s in i)if(z(i,s)){var a=i[s];m(o,s,a,!0)}return o};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var kt=String.fromCodePoint;ot(String,"fromCodePoint",(function(t){return ft.Call(kt,this,arguments)}))}var Ft={fromCodePoint:function(t){for(var e,r=[],i=0,n=arguments.length;i<n;i++){if(e=Number(arguments[i]),!ft.SameValue(e,ft.ToInteger(e))||e<0||e>1114111)throw new RangeError("Invalid code point "+e);e<65536?D(r,String.fromCharCode(e)):(e-=65536,D(r,String.fromCharCode(55296+(e>>10))),D(r,String.fromCharCode(e%1024+56320)))}return r.join("")},raw:function(t){var e=ft.ToObject(t,"bad callSite"),r=ft.ToObject(e.raw,"bad raw value"),i=r.length,n=ft.ToLength(i);if(n<=0)return"";for(var o,s,a,h,u=[],c=0;c<n&&(o=ft.ToString(c),a=ft.ToString(r[o]),D(u,a),!(c+1>=n));)s=c+1<arguments.length?arguments[c+1]:"",h=ft.ToString(s),D(u,h),c+=1;return u.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&ot(String,"raw",Ft.raw),_(String,Ft);var jt=function t(e,r){if(r<1)return"";if(r%2)return t(e,r-1)+e;var i=t(e,r/2);return i+i},Bt=1/0,Ut={repeat:function(t){var e=ft.ToString(ft.RequireObjectCoercible(this)),r=ft.ToInteger(t);if(r<0||r>=Bt)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return jt(e,r)},startsWith:function(t){var e=ft.ToString(ft.RequireObjectCoercible(this));if(ft.IsRegExp(t))throw new TypeError('Cannot call method "startsWith" with a regex');var r,i=ft.ToString(t);arguments.length>1&&(r=arguments[1]);var n=L(ft.ToInteger(r),0);return M(e,n,n+i.length)===i},endsWith:function(t){var e=ft.ToString(ft.RequireObjectCoercible(this));if(ft.IsRegExp(t))throw new TypeError('Cannot call method "endsWith" with a regex');var r,i=ft.ToString(t),n=e.length;arguments.length>1&&(r=arguments[1]);var o=void 0===r?n:ft.ToInteger(r),s=k(L(o,0),n);return M(e,s-i.length,s)===i},includes:function(t){if(ft.IsRegExp(t))throw new TypeError('"includes" does not accept a RegExp');var e,r=ft.ToString(t);return arguments.length>1&&(e=arguments[1]),-1!==A(this,r,e)},codePointAt:function(t){var e=ft.ToString(ft.RequireObjectCoercible(this)),r=ft.ToInteger(t),i=e.length;if(r>=0&&r<i){var n=e.charCodeAt(r);if(n<55296||n>56319||r+1===i)return n;var o=e.charCodeAt(r+1);return o<56320||o>57343?n:1024*(n-55296)+(o-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&ot(String.prototype,"includes",Ut.includes),String.prototype.startsWith&&String.prototype.endsWith){var Gt=h((function(){return"/a/".startsWith(/a/)})),zt=u((function(){return!1==="abc".startsWith("a",1/0)}));Gt&&zt||(ot(String.prototype,"startsWith",Ut.startsWith),ot(String.prototype,"endsWith",Ut.endsWith))}if(st){var Ht=u((function(){var t=/a/;return t[K.match]=!1,"/a/".startsWith(t)}));Ht||ot(String.prototype,"startsWith",Ut.startsWith);var Xt=u((function(){var t=/a/;return t[K.match]=!1,"/a/".endsWith(t)}));Xt||ot(String.prototype,"endsWith",Ut.endsWith);var Vt=u((function(){var t=/a/;return t[K.match]=!1,"/a/".includes(t)}));Vt||ot(String.prototype,"includes",Ut.includes)}_(String.prototype,Ut);var Yt=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),Wt=new RegExp("(^["+Yt+"]+)|(["+Yt+"]+$)","g"),qt=function(){return ft.ToString(ft.RequireObjectCoercible(this)).replace(Wt,"")},Kt=["","",""].join(""),Zt=new RegExp("["+Kt+"]","g"),$t=/^[-+]0x[0-9a-f]+$/i,Jt=Kt.trim().length!==Kt.length;m(String.prototype,"trim",qt,Jt);var Qt=function(t){return{value:t,done:0===arguments.length}},te=function(t){ft.RequireObjectCoercible(t),this._s=ft.ToString(t),this._i=0};te.prototype.next=function(){var t=this._s,e=this._i;if(void 0===t||e>=t.length)return this._s=void 0,Qt();var r,i,n=t.charCodeAt(e);return i=n<55296||n>56319||e+1===t.length?1:(r=t.charCodeAt(e+1))<56320||r>57343?1:2,this._i=e+i,Qt(t.substr(e,i))},Dt(te.prototype),Dt(String.prototype,(function(){return new te(this)}));var ee={from:function(t){var e,i,n,o=this;if(arguments.length>1&&(e=arguments[1]),void 0===e)i=!1;else{if(!ft.IsCallable(e))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2]),i=!0}var s,a,h,u=void 0!==(it(t)||ft.GetMethod(t,at));if(u){a=ft.IsConstructor(o)?Object(new o):[];var c,l,p=ft.GetIterator(t);for(h=0;!1!==(c=ft.IteratorStep(p));){l=c.value;try{i&&(l=void 0===n?e(l,h):r(e,n,l,h)),a[h]=l}catch(t){throw ft.IteratorClose(p,!0),t}h+=1}s=h}else{var f,d=ft.ToObject(t);for(s=ft.ToLength(d.length),a=ft.IsConstructor(o)?Object(new o(s)):new Array(s),h=0;h<s;++h)f=d[h],i&&(f=void 0===n?e(f,h):r(e,n,f,h)),Nt(a,h,f)}return a.length=s,a},of:function(){for(var t=arguments.length,e=this,r=o(e)||!ft.IsCallable(e)?new Array(t):ft.Construct(e,[t]),i=0;i<t;++i)Nt(r,i,arguments[i]);return r.length=t,r}};_(Array,ee),Mt(Array),_((t=function(t,e){this.i=0,this.array=t,this.kind=e}).prototype,{next:function(){var e=this.i,r=this.array;if(!(this instanceof t))throw new TypeError("Not an ArrayIterator");if(void 0!==r)for(var i=ft.ToLength(r.length);e<i;e++){var n,o=this.kind;return"key"===o?n=e:"value"===o?n=r[e]:"entry"===o&&(n=[e,r[e]]),this.i=e+1,Qt(n)}return this.array=void 0,Qt()}}),Dt(t.prototype);var re=Array.of===ee.of||function(){var t=function(t){this.length=t};t.prototype=[];var e=Array.of.apply(t,[1,2]);return e instanceof t&&2===e.length}();re||ot(Array,"of",ee.of);var ie={copyWithin:function(t,e){var r,i=ft.ToObject(this),n=ft.ToLength(i.length),o=ft.ToInteger(t),s=ft.ToInteger(e),a=o<0?L(n+o,0):k(o,n),h=s<0?L(n+s,0):k(s,n);arguments.length>2&&(r=arguments[2]);var u=void 0===r?n:ft.ToInteger(r),c=u<0?L(n+u,0):k(u,n),l=k(c-h,n-a),p=1;for(h<a&&a<h+l&&(p=-1,h+=l-1,a+=l-1);l>0;)h in i?i[a]=i[h]:delete i[a],h+=p,a+=p,l-=1;return i},fill:function(t){var e,r;arguments.length>1&&(e=arguments[1]),arguments.length>2&&(r=arguments[2]);var i=ft.ToObject(this),n=ft.ToLength(i.length);e=ft.ToInteger(void 0===e?0:e),r=ft.ToInteger(void 0===r?n:r);for(var o=e<0?L(n+e,0):k(e,n),s=r<0?n+r:r,a=o;a<n&&a<s;++a)i[a]=t;return i},find:function(t){var e=ft.ToObject(this),i=ft.ToLength(e.length);if(!ft.IsCallable(t))throw new TypeError("Array#find: predicate must be a function");for(var n,o=arguments.length>1?arguments[1]:null,s=0;s<i;s++)if(n=e[s],o){if(r(t,o,n,s,e))return n}else if(t(n,s,e))return n},findIndex:function(t){var e=ft.ToObject(this),i=ft.ToLength(e.length);if(!ft.IsCallable(t))throw new TypeError("Array#findIndex: predicate must be a function");for(var n=arguments.length>1?arguments[1]:null,o=0;o<i;o++)if(n){if(r(t,n,e[o],o,e))return o}else if(t(e[o],o,e))return o;return-1},keys:function(){return new t(this,"key")},values:function(){return new t(this,"value")},entries:function(){return new t(this,"entry")}};if(Array.prototype.keys&&!ft.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ft.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[at]&&(_(Array.prototype,{values:Array.prototype[at]}),nt.symbol(K.unscopables)&&(Array.prototype[K.unscopables].values=!0)),f&&Array.prototype.values&&"values"!==Array.prototype.values.name){var ne=Array.prototype.values;ot(Array.prototype,"values",(function(){return ft.Call(ne,this,arguments)})),m(Array.prototype,at,Array.prototype.values,!0)}_(Array.prototype,ie),1/[!0].indexOf(!0,-0)<0&&m(Array.prototype,"indexOf",(function(t){var e=P(this,arguments);return 0===e&&1/e<0?0:e}),!0),Dt(Array.prototype,(function(){return this.values()})),Object.getPrototypeOf&&Dt(Object.getPrototypeOf([].values()));var oe,se=u((function(){return 0===Array.from({length:-1}).length})),ae=1===(oe=Array.from([0].entries())).length&&o(oe[0])&&0===oe[0][0]&&0===oe[0][1];se&&ae||ot(Array,"from",ee.from);var he=u((function(){return Array.from([0],void 0)}));if(!he){var ue=Array.from;ot(Array,"from",(function(t){return arguments.length>1&&void 0!==arguments[1]?ft.Call(ue,this,arguments):r(ue,this,t)}))}var ce=-(Math.pow(2,32)-1),le=function(t,e){var i={length:ce};return i[e?(i.length>>>0)-1:0]=!0,u((function(){return r(t,i,(function(){throw new RangeError("should not reach here")}),[]),!0}))};if(!le(Array.prototype.forEach)){var pe=Array.prototype.forEach;ot(Array.prototype,"forEach",(function(t){return ft.Call(pe,this.length>=0?this:[],arguments)}),!0)}if(!le(Array.prototype.map)){var fe=Array.prototype.map;ot(Array.prototype,"map",(function(t){return ft.Call(fe,this.length>=0?this:[],arguments)}),!0)}if(!le(Array.prototype.filter)){var de=Array.prototype.filter;ot(Array.prototype,"filter",(function(t){return ft.Call(de,this.length>=0?this:[],arguments)}),!0)}if(!le(Array.prototype.some)){var ve=Array.prototype.some;ot(Array.prototype,"some",(function(t){return ft.Call(ve,this.length>=0?this:[],arguments)}),!0)}if(!le(Array.prototype.every)){var ye=Array.prototype.every;ot(Array.prototype,"every",(function(t){return ft.Call(ye,this.length>=0?this:[],arguments)}),!0)}if(!le(Array.prototype.reduce)){var ge=Array.prototype.reduce;ot(Array.prototype,"reduce",(function(t){return ft.Call(ge,this.length>=0?this:[],arguments)}),!0)}if(!le(Array.prototype.reduceRight,!0)){var me=Array.prototype.reduceRight;ot(Array.prototype,"reduceRight",(function(t){return ft.Call(me,this.length>=0?this:[],arguments)}),!0)}var _e=8!==Number("0o10"),be=2!==Number("0b10"),xe=g(Kt,(function(t){return 0===Number(t+0+t)}));if(_e||be||xe){var we=Number,Te=/^0b[01]+$/i,Ee=/^0o[0-7]+$/i,Se=Te.test.bind(Te),Oe=Ee.test.bind(Ee),Ie=function(t){var e;if("function"==typeof t.valueOf&&(e=t.valueOf(),nt.primitive(e)))return e;if("function"==typeof t.toString&&(e=t.toString(),nt.primitive(e)))return e;throw new TypeError("No default value")},Ae=Zt.test.bind(Zt),Pe=$t.test.bind($t),Ce=function(){var t=function(e){var r;"string"==typeof(r=arguments.length>0?nt.primitive(e)?e:Ie(e,"number"):0)&&(r=ft.Call(qt,r),Se(r)?r=parseInt(M(r,2),2):Oe(r)?r=parseInt(M(r,2),8):(Ae(r)||Pe(r))&&(r=NaN));var i=this,n=u((function(){return we.prototype.valueOf.call(i),!0}));return i instanceof t&&!n?new we(r):we(r)};return t}();Pt(we,Ce,{}),_(Ce,{NaN:we.NaN,MAX_VALUE:we.MAX_VALUE,MIN_VALUE:we.MIN_VALUE,NEGATIVE_INFINITY:we.NEGATIVE_INFINITY,POSITIVE_INFINITY:we.POSITIVE_INFINITY}),Number=Ce,w.redefine(O,"Number",Ce)}var Me=Math.pow(2,53)-1;_(Number,{MAX_SAFE_INTEGER:Me,MIN_SAFE_INTEGER:-Me,EPSILON:2220446049250313e-31,parseInt:O.parseInt,parseFloat:O.parseFloat,isFinite:J,isInteger:function(t){return J(t)&&ft.ToInteger(t)===t},isSafeInteger:function(t){return Number.isInteger(t)&&j(t)<=Number.MAX_SAFE_INTEGER},isNaN:$}),m(Number,"parseInt",O.parseInt,Number.parseInt!==O.parseInt),1===[,1].find((function(){return!0}))&&ot(Array.prototype,"find",ie.find),0!==[,1].findIndex((function(){return!0}))&&ot(Array.prototype,"findIndex",ie.findIndex);var De,Re,Ne,Le=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),ke=function(t,e){p&&Le(t,e)&&Object.defineProperty(t,e,{enumerable:!1})},Fe=function(){for(var t=Number(this),e=arguments.length,r=e-t,i=new Array(r<0?0:r),n=t;n<e;++n)i[n-t]=arguments[n];return i},je=function(t){return function(e,r){return e[r]=t[r],e}},Be=function(t,e){var r,i=s(Object(e));return ft.IsCallable(Object.getOwnPropertySymbols)&&(r=y(Object.getOwnPropertySymbols(Object(e)),Le(e))),v(C(i,r||[]),je(e),t)},Ue={assign:function(t,e){var r=ft.ToObject(t,"Cannot convert undefined or null to object");return v(ft.Call(Fe,1,arguments),Be,r)},is:function(t,e){return ft.SameValue(t,e)}},Ge=Object.assign&&Object.preventExtensions&&function(){var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}}();if(Ge&&ot(Object,"assign",Ue.assign),_(Object,Ue),p){var ze={setPrototypeOf:function(t,e){var i,n=function(t,e){return function(t,e){if(!ft.TypeIsObject(t))throw new TypeError("cannot set prototype on a non-object");if(null!==e&&!ft.TypeIsObject(e))throw new TypeError("can only set prototype to an object or null"+e)}(t,e),r(i,t,e),t};try{i=t.getOwnPropertyDescriptor(t.prototype,"__proto__").set,r(i,{},null)}catch(e){if(t.prototype!=={}.__proto__)return;i=function(t){this.__proto__=t},n.polyfill=n(n({},null),t.prototype)instanceof t}return n}(Object)};_(Object,ze)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(De=Object.create(null),Re=Object.getPrototypeOf,Ne=Object.setPrototypeOf,Object.getPrototypeOf=function(t){var e=Re(t);return e===De?null:e},Object.setPrototypeOf=function(t,e){return Ne(t,null===e?De:e)},Object.setPrototypeOf.polyfill=!1);var He=!h((function(){return Object.keys("foo")}));if(!He){var Xe=Object.keys;ot(Object,"keys",(function(t){return Xe(ft.ToObject(t))})),s=Object.keys}var Ve=h((function(){return Object.keys(/a/g)}));if(Ve){var Ye=Object.keys;ot(Object,"keys",(function(t){if(nt.regex(t)){var e=[];for(var r in t)z(t,r)&&D(e,r);return e}return Ye(t)})),s=Object.keys}if(Object.getOwnPropertyNames){var We=!h((function(){return Object.getOwnPropertyNames("foo")}));if(!We){var qe="object"==typeof window?Object.getOwnPropertyNames(window):[],Ke=Object.getOwnPropertyNames;ot(Object,"getOwnPropertyNames",(function(t){var e=ft.ToObject(t);if("[object Window]"===b(e))try{return Ke(e)}catch(t){return C([],qe)}return Ke(e)}))}}if(Object.getOwnPropertyDescriptor){var Ze=!h((function(){return Object.getOwnPropertyDescriptor("foo","bar")}));if(!Ze){var $e=Object.getOwnPropertyDescriptor;ot(Object,"getOwnPropertyDescriptor",(function(t,e){return $e(ft.ToObject(t),e)}))}}if(Object.seal){var Je=!h((function(){return Object.seal("foo")}));if(!Je){var Qe=Object.seal;ot(Object,"seal",(function(t){return ft.TypeIsObject(t)?Qe(t):t}))}}if(Object.isSealed){var tr=!h((function(){return Object.isSealed("foo")}));if(!tr){var er=Object.isSealed;ot(Object,"isSealed",(function(t){return!ft.TypeIsObject(t)||er(t)}))}}if(Object.freeze){var rr=!h((function(){return Object.freeze("foo")}));if(!rr){var ir=Object.freeze;ot(Object,"freeze",(function(t){return ft.TypeIsObject(t)?ir(t):t}))}}if(Object.isFrozen){var nr=!h((function(){return Object.isFrozen("foo")}));if(!nr){var or=Object.isFrozen;ot(Object,"isFrozen",(function(t){return!ft.TypeIsObject(t)||or(t)}))}}if(Object.preventExtensions){var sr=!h((function(){return Object.preventExtensions("foo")}));if(!sr){var ar=Object.preventExtensions;ot(Object,"preventExtensions",(function(t){return ft.TypeIsObject(t)?ar(t):t}))}}if(Object.isExtensible){var hr=!h((function(){return Object.isExtensible("foo")}));if(!hr){var ur=Object.isExtensible;ot(Object,"isExtensible",(function(t){return!!ft.TypeIsObject(t)&&ur(t)}))}}if(Object.getPrototypeOf){var cr=!h((function(){return Object.getPrototypeOf("foo")}));if(!cr){var lr=Object.getPrototypeOf;ot(Object,"getPrototypeOf",(function(t){return lr(ft.ToObject(t))}))}}var pr,fr=p&&((pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ft.IsCallable(pr.get));if(p&&!fr){var dr=function(){if(!ft.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t};w.getter(RegExp.prototype,"flags",dr)}var vr,yr=p&&u((function(){return"/a/i"===String(new RegExp(/a/g,"i"))})),gr=st&&p&&((vr=/./)[K.match]=!1,RegExp(vr)===vr),mr=u((function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})})),_r=mr&&u((function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})}));if(!mr||!_r){var br=RegExp.prototype.toString;m(RegExp.prototype,"toString",(function(){var t=ft.RequireObjectCoercible(this);return nt.regex(t)?r(br,t):"/"+ct(t.source)+"/"+ct(t.flags)}),!0),w.preserveToString(RegExp.prototype.toString,br)}if(p&&(!yr||gr)){var xr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,wr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},Tr=function(){return this.source},Er=ft.IsCallable(wr.get)?wr.get:Tr,Sr=RegExp,Or=function t(e,r){var i=ft.IsRegExp(e);return this instanceof t||!i||void 0!==r||e.constructor!==t?nt.regex(e)?new t(ft.Call(Er,e),void 0===r?ft.Call(xr,e):r):(i&&(e.source,void 0===r&&e.flags),new Sr(e,r)):e};Pt(Sr,Or,{$input:!0}),RegExp=Or,w.redefine(O,"RegExp",Or)}if(p){var Ir={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};d(s(Ir),(function(t){t in RegExp&&!(Ir[t]in RegExp)&&w.getter(RegExp,Ir[t],(function(){return RegExp[t]}))}))}Mt(RegExp);var Ar=1/Number.EPSILON,Pr=function(t){return t+Ar-Ar},Cr=Math.pow(2,-23),Mr=Math.pow(2,127)*(2-Cr),Dr=Math.pow(2,-126),Rr=Math.E,Nr=Math.LOG2E,Lr=Math.LOG10E,kr=Number.prototype.clz;delete Number.prototype.clz;var Fr={acosh:function(t){var e=Number(t);if($(e)||t<1)return NaN;if(1===e)return 0;if(e===1/0)return e;var r=1/(e*e);if(e<2)return tt(e-1+G(1-r)*e);var i=e/2;return tt(i+G(1-r)*i-1)+1/Nr},asinh:function(t){var e=Number(t);if(0===e||!I(e))return e;var r=j(e),i=r*r,n=Q(e);return r<1?n*tt(r+i/(G(i+1)+1)):n*(tt(r/2+G(1+1/i)*r/2-1)+1/Nr)},atanh:function(t){var e=Number(t);if(0===e)return e;if(-1===e)return-1/0;if(1===e)return 1/0;if($(e)||e<-1||e>1)return NaN;var r=j(e);return Q(e)*tt(2*r/(1-r))/2},cbrt:function(t){var e=Number(t);if(0===e)return e;var r,i=e<0;return i&&(e=-e),r=e===1/0?1/0:(e/((r=B(U(e)/3))*r)+2*r)/3,i?-r:r},clz32:function(t){var e=Number(t),r=ft.ToUint32(e);return 0===r?32:kr?ft.Call(kr,r):31-F(U(r+.5)*Nr)},cosh:function(t){var e=Number(t);if(0===e)return 1;if($(e))return NaN;if(!I(e))return 1/0;var r=B(j(e)-1);return(r+1/(r*Rr*Rr))*(Rr/2)},expm1:function(t){var e=Number(t);if(e===-1/0)return-1;if(!I(e)||0===e)return e;if(j(e)>.5)return B(e)-1;for(var r=e,i=0,n=1;i+r!==i;)i+=r,r*=e/(n+=1);return i},hypot:function(t,e){for(var r=0,i=0,n=0;n<arguments.length;++n){var o=j(Number(arguments[n]));i<o?(r*=i/o*(i/o),r+=1,i=o):r+=o>0?o/i*(o/i):o}return i===1/0?1/0:i*G(r)},log2:function(t){return U(t)*Nr},log10:function(t){return U(t)*Lr},log1p:tt,sign:Q,sinh:function(t){var e=Number(t);if(!I(e)||0===e)return e;var r=j(e);if(r<1){var i=Math.expm1(r);return Q(e)*i*(1+1/(i+1))/2}var n=B(r-1);return Q(e)*(n-1/(n*Rr*Rr))*(Rr/2)},tanh:function(t){var e=Number(t);return $(e)||0===e?e:e>=20?1:e<=-20?-1:(Math.expm1(e)-Math.expm1(-e))/(B(e)+B(-e))},trunc:function(t){var e=Number(t);return e<0?-F(-e):F(e)},imul:function(t,e){var r=ft.ToUint32(t),i=ft.ToUint32(e),n=65535&r,o=65535&i;return n*o+((r>>>16&65535)*o+n*(i>>>16&65535)<<16>>>0)|0},fround:function(t){var e=Number(t);if(0===e||e===1/0||e===-1/0||$(e))return e;var r=Q(e),i=j(e);if(i<Dr)return r*Pr(i/Dr/Cr)*Dr*Cr;var n=(1+Cr/Number.EPSILON)*i,o=n-(n-i);return o>Mr||$(o)?r*(1/0):r*o}},jr=function(t,e,r){return j(1-t/e)/Number.EPSILON<(r||8)};_(Math,Fr),m(Math,"sinh",Fr.sinh,Math.sinh(710)===1/0),m(Math,"cosh",Fr.cosh,Math.cosh(710)===1/0),m(Math,"log1p",Fr.log1p,-1e-17!==Math.log1p(-1e-17)),m(Math,"asinh",Fr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),m(Math,"asinh",Fr.asinh,Math.asinh(1e300)===1/0),m(Math,"atanh",Fr.atanh,0===Math.atanh(1e-300)),m(Math,"tanh",Fr.tanh,-2e-17!==Math.tanh(-2e-17)),m(Math,"acosh",Fr.acosh,Math.acosh(Number.MAX_VALUE)===1/0),m(Math,"acosh",Fr.acosh,!jr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),m(Math,"cbrt",Fr.cbrt,!jr(Math.cbrt(1e-300),1e-100)),m(Math,"sinh",Fr.sinh,-2e-17!==Math.sinh(-2e-17));var Br=Math.expm1(10);m(Math,"expm1",Fr.expm1,Br>22025.465794806718||Br<22025.465794806718);var Ur=Math.round,Gr=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),zr=Ar+1,Hr=2*Ar-1,Xr=[zr,Hr].every((function(t){return Math.round(t)===t}));m(Math,"round",(function(t){var e=F(t);return t-e<.5?e:-1===e?-0:e+1}),!Gr||!Xr),w.preserveToString(Math.round,Ur);var Vr=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=Fr.imul,w.preserveToString(Math.imul,Vr)),2!==Math.imul.length&&ot(Math,"imul",(function(t,e){return ft.Call(Vr,Math,arguments)}));var Yr,Wr,qr=function(){var t=O.setTimeout;if("function"==typeof t||"object"==typeof t){ft.IsPromise=function(t){return!!ft.TypeIsObject(t)&&void 0!==t._promise};var e,i=function(t){if(!ft.IsConstructor(t))throw new TypeError("Bad promise constructor");var e=this;if(e.resolve=void 0,e.reject=void 0,e.promise=new t((function(t,r){if(void 0!==e.resolve||void 0!==e.reject)throw new TypeError("Bad Promise implementation!");e.resolve=t,e.reject=r})),!ft.IsCallable(e.resolve)||!ft.IsCallable(e.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ft.IsCallable(window.postMessage)&&(e=function(){var t=[];return window.addEventListener("message",(function(e){if(e.source===window&&"zero-timeout-message"===e.data){if(e.stopPropagation(),0===t.length)return;N(t)()}}),!0),function(e){D(t,e),window.postMessage("zero-timeout-message","*")}});var o,s,a,h,u=ft.IsCallable(O.setImmediate)?O.setImmediate:"object"==typeof n&&n.nextTick?n.nextTick:(o=O.Promise,(s=o&&o.resolve&&o.resolve())&&function(t){return s.then(t)}||(ft.IsCallable(e)?e():function(e){t(e,0)})),c=function(t){return t},l=function(t){throw t},p={},f=function(t,e,r){u((function(){d(t,e,r)}))},d=function(t,e,r){var i,n;if(e===p)return t(r);try{i=t(r),n=e.resolve}catch(t){i=t,n=e.reject}n(i)},v=function(t,e){var r=t._promise,i=r.reactionLength;if(i>0&&(f(r.fulfillReactionHandler0,r.reactionCapability0,e),r.fulfillReactionHandler0=void 0,r.rejectReactions0=void 0,r.reactionCapability0=void 0,i>1))for(var n=1,o=0;n<i;n++,o+=3)f(r[o+0],r[o+2],e),t[o+0]=void 0,t[o+1]=void 0,t[o+2]=void 0;r.result=e,r.state=1,r.reactionLength=0},y=function(t,e){var r=t._promise,i=r.reactionLength;if(i>0&&(f(r.rejectReactionHandler0,r.reactionCapability0,e),r.fulfillReactionHandler0=void 0,r.rejectReactions0=void 0,r.reactionCapability0=void 0,i>1))for(var n=1,o=0;n<i;n++,o+=3)f(r[o+1],r[o+2],e),t[o+0]=void 0,t[o+1]=void 0,t[o+2]=void 0;r.result=e,r.state=2,r.reactionLength=0},g=function(t){var e=!1;return{resolve:function(r){var i;if(!e){if(e=!0,r===t)return y(t,new TypeError("Self resolution"));if(!ft.TypeIsObject(r))return v(t,r);try{i=r.then}catch(e){return y(t,e)}if(!ft.IsCallable(i))return v(t,r);u((function(){b(t,r,i)}))}},reject:function(r){if(!e)return e=!0,y(t,r)}}},m=function(t,e,i,n){t===h?r(t,e,i,n,p):r(t,e,i,n)},b=function(t,e,r){var i=g(t),n=i.resolve,o=i.reject;try{m(r,e,n,o)}catch(t){o(t)}},x=function(){var t=function(e){if(!(this instanceof t))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ft.IsCallable(e))throw new TypeError("not a valid resolver");var r=Lt(this,t,a,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),i=g(r),n=i.reject;try{e(i.resolve,n)}catch(t){n(t)}return r};return t}();a=x.prototype;var w=function(t,e,r,i){var n=!1;return function(o){n||(n=!0,e[t]=o,0==--i.count&&(0,r.resolve)(e))}};return _(x,{all:function(t){var e=this;if(!ft.TypeIsObject(e))throw new TypeError("Promise is not object");var r,n,o=new i(e);try{return function(t,e,r){for(var i,n,o=t.iterator,s=[],a={count:1},h=0;;){try{if(!1===(i=ft.IteratorStep(o))){t.done=!0;break}n=i.value}catch(e){throw t.done=!0,e}s[h]=void 0;var u=e.resolve(n),c=w(h,s,r,a);a.count+=1,m(u.then,u,c,r.reject),h+=1}return 0==--a.count&&(0,r.resolve)(s),r.promise}(n={iterator:r=ft.GetIterator(t),done:!1},e,o)}catch(t){var s=t;if(n&&!n.done)try{ft.IteratorClose(r,!0)}catch(t){s=t}return(0,o.reject)(s),o.promise}},race:function(t){var e=this;if(!ft.TypeIsObject(e))throw new TypeError("Promise is not object");var r,n,o=new i(e);try{return function(t,e,r){for(var i,n,o,s=t.iterator;;){try{if(!1===(i=ft.IteratorStep(s))){t.done=!0;break}n=i.value}catch(e){throw t.done=!0,e}o=e.resolve(n),m(o.then,o,r.resolve,r.reject)}return r.promise}(n={iterator:r=ft.GetIterator(t),done:!1},e,o)}catch(t){var s=t;if(n&&!n.done)try{ft.IteratorClose(r,!0)}catch(t){s=t}return(0,o.reject)(s),o.promise}},reject:function(t){if(!ft.TypeIsObject(this))throw new TypeError("Bad promise constructor");var e=new i(this);return(0,e.reject)(t),e.promise},resolve:function(t){var e=this;if(!ft.TypeIsObject(e))throw new TypeError("Bad promise constructor");if(ft.IsPromise(t)&&t.constructor===e)return t;var r=new i(e);return(0,r.resolve)(t),r.promise}}),_(a,{catch:function(t){return this.then(null,t)},then:function(t,e){var r=this;if(!ft.IsPromise(r))throw new TypeError("not a promise");var n,o=ft.SpeciesConstructor(r,x),s=arguments.length>2&&arguments[2]===p;n=s&&o===x?p:new i(o);var a,h=ft.IsCallable(t)?t:c,u=ft.IsCallable(e)?e:l,d=r._promise;if(0===d.state){if(0===d.reactionLength)d.fulfillReactionHandler0=h,d.rejectReactionHandler0=u,d.reactionCapability0=n;else{var v=3*(d.reactionLength-1);d[v+0]=h,d[v+1]=u,d[v+2]=n}d.reactionLength+=1}else if(1===d.state)a=d.result,f(h,n,a);else{if(2!==d.state)throw new TypeError("unexpected Promise state");a=d.result,f(u,n,a)}return n.promise}}),p=new i(x),h=a.then,x}}();if(O.Promise&&(delete O.Promise.accept,delete O.Promise.defer,delete O.Promise.prototype.chain),"function"==typeof qr){_(O,{Promise:qr});var Kr=E(O.Promise,(function(t){return t.resolve(42).then((function(){}))instanceof t})),Zr=!h((function(){return O.Promise.reject(42).then(null,5).then(null,H)})),$r=h((function(){return O.Promise.call(3,H)})),Jr=function(t){var e=t.resolve(5);e.constructor={};var r=t.resolve(e);try{r.then(null,H).then(null,H)}catch(t){return!0}return e===r}(O.Promise),Qr=p&&(Yr=0,Wr=Object.defineProperty({},"then",{get:function(){Yr+=1}}),Promise.resolve(Wr),1===Yr),ti=function t(e){var r=new Promise(e);e(3,(function(){})),this.then=r.then,this.constructor=t};ti.prototype=Promise.prototype,ti.all=Promise.all;var ei=u((function(){return!!ti.all([1,2])}));if(Kr&&Zr&&$r&&!Jr&&Qr&&!ei||(Promise=qr,ot(O,"Promise",qr)),1!==Promise.all.length){var ri=Promise.all;ot(Promise,"all",(function(t){return ft.Call(ri,this,arguments)}))}if(1!==Promise.race.length){var ii=Promise.race;ot(Promise,"race",(function(t){return ft.Call(ii,this,arguments)}))}if(1!==Promise.resolve.length){var ni=Promise.resolve;ot(Promise,"resolve",(function(t){return ft.Call(ni,this,arguments)}))}if(1!==Promise.reject.length){var oi=Promise.reject;ot(Promise,"reject",(function(t){return ft.Call(oi,this,arguments)}))}ke(Promise,"all"),ke(Promise,"race"),ke(Promise,"resolve"),ke(Promise,"reject"),Mt(Promise)}var si,ai,hi=function(t){var e=s(v(t,(function(t,e){return t[e]=!0,t}),{}));return t.join(":")===e.join(":")},ui=hi(["z","a","bb"]),ci=hi(["z",1,"a","3",2]);if(p){var li=function(t,e){return e||ui?pt(t)?"^"+ft.ToString(t):"string"==typeof t?"$"+t:"number"==typeof t?ci?t:"n"+t:"boolean"==typeof t?"b"+t:null:null},pi=function(){return Object.create?Object.create(null):{}},fi=function(t,e,i){if(o(i)||nt.string(i))d(i,(function(t){if(!ft.TypeIsObject(t))throw new TypeError("Iterator value "+t+" is not an entry object");e.set(t[0],t[1])}));else if(i instanceof t)r(t.prototype.forEach,i,(function(t,r){e.set(r,t)}));else{var n,s;if(!pt(i)){if(s=e.set,!ft.IsCallable(s))throw new TypeError("bad map");n=ft.GetIterator(i)}if(void 0!==n)for(;;){var a=ft.IteratorStep(n);if(!1===a)break;var h=a.value;try{if(!ft.TypeIsObject(h))throw new TypeError("Iterator value "+h+" is not an entry object");r(s,e,h[0],h[1])}catch(t){throw ft.IteratorClose(n,!0),t}}}},di=function(t,e,i){if(o(i)||nt.string(i))d(i,(function(t){e.add(t)}));else if(i instanceof t)r(t.prototype.forEach,i,(function(t){e.add(t)}));else{var n,s;if(!pt(i)){if(s=e.add,!ft.IsCallable(s))throw new TypeError("bad set");n=ft.GetIterator(i)}if(void 0!==n)for(;;){var a=ft.IteratorStep(n);if(!1===a)break;var h=a.value;try{r(s,e,h)}catch(t){throw ft.IteratorClose(n,!0),t}}}},vi={Map:function(){var t={},e=function(t,e){this.key=t,this.value=e,this.next=null,this.prev=null};e.prototype.isRemoved=function(){return this.key===t};var i,n=function(t,e){if(!ft.TypeIsObject(t)||!function(t){return!!t._es6map}(t))throw new TypeError("Method Map.prototype."+e+" called on incompatible receiver "+ft.ToString(t))},o=function(t,e){n(t,"[[MapIterator]]"),this.head=t._head,this.i=this.head,this.kind=e};Dt(o.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var t,e=this.i,r=this.kind,i=this.head;if(void 0===this.i)return Qt();for(;e.isRemoved()&&e!==i;)e=e.prev;for(;e.next!==i;)if(!(e=e.next).isRemoved())return t="key"===r?e.key:"value"===r?e.value:[e.key,e.value],this.i=e,Qt(t);return this.i=void 0,Qt()}});var s=function t(){if(!(this instanceof t))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var r=Lt(this,t,i,{_es6map:!0,_head:null,_map:X?new X:null,_size:0,_storage:pi()}),n=new e(null,null);return n.next=n.prev=n,r._head=n,arguments.length>0&&fi(t,r,arguments[0]),r};return i=s.prototype,w.getter(i,"size",(function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size})),_(i,{get:function(t){var e;n(this,"get");var r=li(t,!0);if(null!==r)return(e=this._storage[r])?e.value:void 0;if(this._map)return(e=Y.call(this._map,t))?e.value:void 0;for(var i=this._head,o=i;(o=o.next)!==i;)if(ft.SameValueZero(o.key,t))return o.value},has:function(t){n(this,"has");var e=li(t,!0);if(null!==e)return void 0!==this._storage[e];if(this._map)return W.call(this._map,t);for(var r=this._head,i=r;(i=i.next)!==r;)if(ft.SameValueZero(i.key,t))return!0;return!1},set:function(t,r){n(this,"set");var i,o=this._head,s=o,a=li(t,!0);if(null!==a){if(void 0!==this._storage[a])return this._storage[a].value=r,this;i=this._storage[a]=new e(t,r),s=o.prev}else this._map&&(W.call(this._map,t)?Y.call(this._map,t).value=r:(i=new e(t,r),q.call(this._map,t,i),s=o.prev));for(;(s=s.next)!==o;)if(ft.SameValueZero(s.key,t))return s.value=r,this;return i=i||new e(t,r),ft.SameValue(-0,t)&&(i.key=0),i.next=this._head,i.prev=this._head.prev,i.prev.next=i,i.next.prev=i,this._size+=1,this},delete:function(e){n(this,"delete");var r=this._head,i=r,o=li(e,!0);if(null!==o){if(void 0===this._storage[o])return!1;i=this._storage[o].prev,delete this._storage[o]}else if(this._map){if(!W.call(this._map,e))return!1;i=Y.call(this._map,e).prev,V.call(this._map,e)}for(;(i=i.next)!==r;)if(ft.SameValueZero(i.key,e))return i.key=t,i.value=t,i.prev.next=i.next,i.next.prev=i.prev,this._size-=1,!0;return!1},clear:function(){n(this,"clear"),this._map=X?new X:null,this._size=0,this._storage=pi();for(var e=this._head,r=e,i=r.next;(r=i)!==e;)r.key=t,r.value=t,i=r.next,r.next=r.prev=e;e.next=e.prev=e},keys:function(){return n(this,"keys"),new o(this,"key")},values:function(){return n(this,"values"),new o(this,"value")},entries:function(){return n(this,"entries"),new o(this,"key+value")},forEach:function(t){n(this,"forEach");for(var e=arguments.length>1?arguments[1]:null,i=this.entries(),o=i.next();!o.done;o=i.next())e?r(t,e,o.value[1],o.value[0],this):t(o.value[1],o.value[0],this)}}),Dt(i,i.entries),s}(),Set:function(){var t,e=function(t,e){if(!ft.TypeIsObject(t)||!function(t){return t._es6set&&void 0!==t._storage}(t))throw new TypeError("Set.prototype."+e+" called on incompatible receiver "+ft.ToString(t))},i=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var r=Lt(this,e,t,{_es6set:!0,"[[SetData]]":null,_storage:pi()});if(!r._es6set)throw new TypeError("bad set");return arguments.length>0&&di(e,r,arguments[0]),r};t=i.prototype;var n=function(t){if(!t["[[SetData]]"]){var e=new vi.Map;t["[[SetData]]"]=e,d(s(t._storage),(function(t){var r=function(t){var e=t;if("^null"===e)return null;if("^undefined"!==e){var r=e.charAt(0);return"$"===r?M(e,1):"n"===r?+M(e,1):"b"===r?"btrue"===e:+e}}(t);e.set(r,r)})),t["[[SetData]]"]=e}t._storage=null};w.getter(i.prototype,"size",(function(){return e(this,"size"),this._storage?s(this._storage).length:(n(this),this["[[SetData]]"].size)})),_(i.prototype,{has:function(t){var r;return e(this,"has"),this._storage&&null!==(r=li(t))?!!this._storage[r]:(n(this),this["[[SetData]]"].has(t))},add:function(t){var r;return e(this,"add"),this._storage&&null!==(r=li(t))?(this._storage[r]=!0,this):(n(this),this["[[SetData]]"].set(t,t),this)},delete:function(t){var r;if(e(this,"delete"),this._storage&&null!==(r=li(t))){var i=z(this._storage,r);return delete this._storage[r]&&i}return n(this),this["[[SetData]]"].delete(t)},clear:function(){e(this,"clear"),this._storage&&(this._storage=pi()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return e(this,"values"),n(this),new o(this["[[SetData]]"].values())},entries:function(){return e(this,"entries"),n(this),new o(this["[[SetData]]"].entries())},forEach:function(t){e(this,"forEach");var i=arguments.length>1?arguments[1]:null,o=this;n(o),this["[[SetData]]"].forEach((function(e,n){i?r(t,i,n,n,o):t(n,n,o)}))}}),m(i.prototype,"keys",i.prototype.values,!0),Dt(i.prototype,i.prototype.values);var o=function(t){this.it=t};return o.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},Dt(o.prototype),i}()},yi=O.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(yi&&(O.Set=vi.Set),O.Map||O.Set){var gi=u((function(){return 2===new Map([[1,2]]).get(1)}));gi||(O.Map=function t(){if(!(this instanceof t))throw new TypeError('Constructor Map requires "new"');var e=new X;return arguments.length>0&&fi(t,e,arguments[0]),delete e.constructor,Object.setPrototypeOf(e,O.Map.prototype),e},O.Map.prototype=T(X.prototype),m(O.Map.prototype,"constructor",O.Map,!0),w.preserveToString(O.Map,X));var mi=new Map,_i=((ai=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,ai),ai.get(0)===ai&&ai.get(-0)===ai&&ai.has(0)&&ai.has(-0)),bi=mi.set(1,2)===mi;_i&&bi||ot(Map.prototype,"set",(function(t,e){return r(q,this,0===t?0:t,e),this})),_i||(_(Map.prototype,{get:function(t){return r(Y,this,0===t?0:t)},has:function(t){return r(W,this,0===t?0:t)}},!0),w.preserveToString(Map.prototype.get,Y),w.preserveToString(Map.prototype.has,W));var xi=new Set,wi=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&((si=xi).delete(0),si.add(-0),!si.has(0)),Ti=xi.add(1)===xi;if(!wi||!Ti){var Ei=Set.prototype.add;Set.prototype.add=function(t){return r(Ei,this,0===t?0:t),this},w.preserveToString(Set.prototype.add,Ei)}if(!wi){var Si=Set.prototype.has;Set.prototype.has=function(t){return r(Si,this,0===t?0:t)},w.preserveToString(Set.prototype.has,Si);var Oi=Set.prototype.delete;Set.prototype.delete=function(t){return r(Oi,this,0===t?0:t)},w.preserveToString(Set.prototype.delete,Oi)}var Ii=E(O.Map,(function(t){var e=new t([]);return e.set(42,42),e instanceof t})),Ai=Object.setPrototypeOf&&!Ii,Pi=function(){try{return!(O.Map()instanceof O.Map)}catch(t){return t instanceof TypeError}}();0===O.Map.length&&!Ai&&Pi||(O.Map=function t(){if(!(this instanceof t))throw new TypeError('Constructor Map requires "new"');var e=new X;return arguments.length>0&&fi(t,e,arguments[0]),delete e.constructor,Object.setPrototypeOf(e,t.prototype),e},O.Map.prototype=X.prototype,m(O.Map.prototype,"constructor",O.Map,!0),w.preserveToString(O.Map,X));var Ci=E(O.Set,(function(t){var e=new t([]);return e.add(42,42),e instanceof t})),Mi=Object.setPrototypeOf&&!Ci,Di=function(){try{return!(O.Set()instanceof O.Set)}catch(t){return t instanceof TypeError}}();if(0!==O.Set.length||Mi||!Di){var Ri=O.Set;O.Set=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');var e=new Ri;return arguments.length>0&&di(t,e,arguments[0]),delete e.constructor,Object.setPrototypeOf(e,t.prototype),e},O.Set.prototype=Ri.prototype,m(O.Set.prototype,"constructor",O.Set,!0),w.preserveToString(O.Set,Ri)}var Ni=new O.Map,Li=!u((function(){return Ni.keys().next().done}));if(("function"!=typeof O.Map.prototype.clear||0!==(new O.Set).size||0!==Ni.size||"function"!=typeof O.Map.prototype.keys||"function"!=typeof O.Set.prototype.keys||"function"!=typeof O.Map.prototype.forEach||"function"!=typeof O.Set.prototype.forEach||c(O.Map)||c(O.Set)||"function"!=typeof Ni.keys().next||Li||!Ii)&&_(O,{Map:vi.Map,Set:vi.Set},!0),O.Set.prototype.keys!==O.Set.prototype.values&&m(O.Set.prototype,"keys",O.Set.prototype.values,!0),Dt(Object.getPrototypeOf((new O.Map).keys())),Dt(Object.getPrototypeOf((new O.Set).keys())),f&&"has"!==O.Set.prototype.has.name){var ki=O.Set.prototype.has;ot(O.Set.prototype,"has",(function(t){return r(ki,this,t)}))}}_(O,vi),Mt(O.Map),Mt(O.Set)}var Fi=function(t){if(!ft.TypeIsObject(t))throw new TypeError("target must be an object")},ji={apply:function(){return ft.Call(ft.Call,null,arguments)},construct:function(t,e){if(!ft.IsConstructor(t))throw new TypeError("First argument must be a constructor.");var r=arguments.length>2?arguments[2]:t;if(!ft.IsConstructor(r))throw new TypeError("new.target must be a constructor.");return ft.Construct(t,e,r,"internal")},deleteProperty:function(t,e){if(Fi(t),p){var r=Object.getOwnPropertyDescriptor(t,e);if(r&&!r.configurable)return!1}return delete t[e]},has:function(t,e){return Fi(t),e in t}};Object.getOwnPropertyNames&&Object.assign(ji,{ownKeys:function(t){Fi(t);var e=Object.getOwnPropertyNames(t);return ft.IsCallable(Object.getOwnPropertySymbols)&&R(e,Object.getOwnPropertySymbols(t)),e}});var Bi=function(t){return!h(t)};if(Object.preventExtensions&&Object.assign(ji,{isExtensible:function(t){return Fi(t),Object.isExtensible(t)},preventExtensions:function(t){return Fi(t),Bi((function(){return Object.preventExtensions(t)}))}}),p){var Ui=function(t,e,r){var i=Object.getOwnPropertyDescriptor(t,e);if(!i){var n=Object.getPrototypeOf(t);if(null===n)return;return Ui(n,e,r)}return"value"in i?i.value:i.get?ft.Call(i.get,r):void 0},Gi=function(t,e,i,n){var o=Object.getOwnPropertyDescriptor(t,e);if(!o){var s=Object.getPrototypeOf(t);if(null!==s)return Gi(s,e,i,n);o={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in o?!!o.writable&&!!ft.TypeIsObject(n)&&(Object.getOwnPropertyDescriptor(n,e)?ut.defineProperty(n,e,{value:i}):ut.defineProperty(n,e,{value:i,writable:!0,enumerable:!0,configurable:!0})):!!o.set&&(r(o.set,n,i),!0)};Object.assign(ji,{defineProperty:function(t,e,r){return Fi(t),Bi((function(){return Object.defineProperty(t,e,r)}))},getOwnPropertyDescriptor:function(t,e){return Fi(t),Object.getOwnPropertyDescriptor(t,e)},get:function(t,e){Fi(t);var r=arguments.length>2?arguments[2]:t;return Ui(t,e,r)},set:function(t,e,r){Fi(t);var i=arguments.length>3?arguments[3]:t;return Gi(t,e,r,i)}})}if(Object.getPrototypeOf){var zi=Object.getPrototypeOf;ji.getPrototypeOf=function(t){return Fi(t),zi(t)}}if(Object.setPrototypeOf&&ji.getPrototypeOf){var Hi=function(t,e){for(var r=e;r;){if(t===r)return!0;r=ji.getPrototypeOf(r)}return!1};Object.assign(ji,{setPrototypeOf:function(t,e){if(Fi(t),null!==e&&!ft.TypeIsObject(e))throw new TypeError("proto must be an object or null");return e===ut.getPrototypeOf(t)||!(ut.isExtensible&&!ut.isExtensible(t))&&!Hi(t,e)&&(Object.setPrototypeOf(t,e),!0)}})}var Xi=function(t,e){ft.IsCallable(O.Reflect[t])?u((function(){return O.Reflect[t](1),O.Reflect[t](NaN),O.Reflect[t](!0),!0}))&&ot(O.Reflect,t,e):m(O.Reflect,t,e)};Object.keys(ji).forEach((function(t){Xi(t,ji[t])}));var Vi=O.Reflect.getPrototypeOf;if(f&&Vi&&"getPrototypeOf"!==Vi.name&&ot(O.Reflect,"getPrototypeOf",(function(t){return r(Vi,O.Reflect,t)})),O.Reflect.setPrototypeOf&&u((function(){return O.Reflect.setPrototypeOf(1,{}),!0}))&&ot(O.Reflect,"setPrototypeOf",ji.setPrototypeOf),O.Reflect.defineProperty&&(u((function(){var t=!O.Reflect.defineProperty(1,"test",{value:1}),e="function"!=typeof Object.preventExtensions||!O.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return t&&e}))||ot(O.Reflect,"defineProperty",ji.defineProperty)),O.Reflect.construct&&(u((function(){var t=function(){};return O.Reflect.construct((function(){}),[],t)instanceof t}))||ot(O.Reflect,"construct",ji.construct)),"Invalid Date"!==String(new Date(NaN))){var Yi=Date.prototype.toString,Wi=function(){var t=+this;return t!=t?"Invalid Date":ft.Call(Yi,this)};ot(Date.prototype,"toString",Wi)}var qi={anchor:function(t){return ft.CreateHTML(this,"a","name",t)},big:function(){return ft.CreateHTML(this,"big","","")},blink:function(){return ft.CreateHTML(this,"blink","","")},bold:function(){return ft.CreateHTML(this,"b","","")},fixed:function(){return ft.CreateHTML(this,"tt","","")},fontcolor:function(t){return ft.CreateHTML(this,"font","color",t)},fontsize:function(t){return ft.CreateHTML(this,"font","size",t)},italics:function(){return ft.CreateHTML(this,"i","","")},link:function(t){return ft.CreateHTML(this,"a","href",t)},small:function(){return ft.CreateHTML(this,"small","","")},strike:function(){return ft.CreateHTML(this,"strike","","")},sub:function(){return ft.CreateHTML(this,"sub","","")},sup:function(){return ft.CreateHTML(this,"sup","","")}};d(Object.keys(qi),(function(t){var e=String.prototype[t],i=!1;if(ft.IsCallable(e)){var n=r(e,"",' " '),o=C([],n.match(/"/g)).length;i=n!==n.toLowerCase()||o>2}else i=!0;i&&ot(String.prototype,t,qi[t])}));var Ki=function(){if(!st)return!1;var t="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!t)return!1;if(void 0!==t(K()))return!0;if("[null]"!==t([K()]))return!0;var e={a:K()};return e[K()]=!0,"{}"!==t(e)}(),Zi=u((function(){return!st||"{}"===JSON.stringify(Object(K()))&&"[{}]"===JSON.stringify([Object(K())])}));if(Ki||!Zi){var $i=JSON.stringify;ot(JSON,"stringify",(function(t){if("symbol"!=typeof t){var e;arguments.length>1&&(e=arguments[1]);var i=[t];if(o(e))i.push(e);else{var n=ft.IsCallable(e)?e:null,s=function(t,e){var i=n?r(n,this,t,e):e;if("symbol"!=typeof i)return nt.symbol(i)?je({})(i):i};i.push(s)}return arguments.length>2&&i.push(arguments[2]),$i.apply(this,i)}}))}return O})?o.call(e,r,e,t):o)||(t.exports=s)}).call(this,r(2),r(11))},function(t,e,r){},function(t,e,r){"use strict";(function(t){var e=r(14),i=r(15),n=r.n(i);
/*!
 * @pixi/polyfill - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
window.Promise||(window.Promise=e.Polyfill),Object.assign||(Object.assign=n.a);var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!o.performance||!o.performance.now){var s=Date.now();o.performance||(o.performance={}),o.performance.now=function(){return Date.now()-s}}for(var a=Date.now(),h=["ms","moz","webkit","o"],u=0;u<h.length&&!o.requestAnimationFrame;++u){var c=h[u];o.requestAnimationFrame=o[c+"RequestAnimationFrame"],o.cancelAnimationFrame=o[c+"CancelAnimationFrame"]||o[c+"CancelRequestAnimationFrame"]}o.requestAnimationFrame||(o.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+a-e;return r<0&&(r=0),a=e,setTimeout((function(){a=Date.now(),t(performance.now())}),r)}),o.cancelAnimationFrame||(o.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array)}).call(this,r(2))},function(t,e,r){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(n.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(n.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(21),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(2))},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var i,n,o,s,a,h=1,u={},c=!1,l=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},i=function(t){o.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(n=l.documentElement,i=function(t){var e=l.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):i=function(t){setTimeout(d,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&d(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(e){t.postMessage(s+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var n={callback:t,args:e};return u[h]=n,i(h),h++},p.clearImmediate=f}function f(t){delete u[t]}function d(t){if(c)setTimeout(d,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(r,i)}}(e)}finally{f(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(2),r(11))},function(t,e,r){(function(t,i){var n;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof i&&i;s.global!==s&&s.window!==s&&s.self;var a,h=2147483647,u=36,c=1,l=26,p=38,f=700,d=72,v=128,y="-",g=/^xn--/,m=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=u-c,w=Math.floor,T=String.fromCharCode;function E(t){throw new RangeError(b[t])}function S(t,e){for(var r=t.length,i=[];r--;)i[r]=e(t[r]);return i}function O(t,e){var r=t.split("@"),i="";return r.length>1&&(i=r[0]+"@",t=r[1]),i+S((t=t.replace(_,".")).split("."),e).join(".")}function I(t){for(var e,r,i=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(r=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&r)+65536):(i.push(e),n--):i.push(e);return i}function A(t){return S(t,(function(t){var e="";return t>65535&&(e+=T((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=T(t)})).join("")}function P(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function C(t,e,r){var i=0;for(t=r?w(t/f):t>>1,t+=w(t/e);t>x*l>>1;i+=u)t=w(t/x);return w(i+(x+1)*t/(t+p))}function M(t){var e,r,i,n,o,s,a,p,f,g,m,_=[],b=t.length,x=0,T=v,S=d;for((r=t.lastIndexOf(y))<0&&(r=0),i=0;i<r;++i)t.charCodeAt(i)>=128&&E("not-basic"),_.push(t.charCodeAt(i));for(n=r>0?r+1:0;n<b;){for(o=x,s=1,a=u;n>=b&&E("invalid-input"),((p=(m=t.charCodeAt(n++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:u)>=u||p>w((h-x)/s))&&E("overflow"),x+=p*s,!(p<(f=a<=S?c:a>=S+l?l:a-S));a+=u)s>w(h/(g=u-f))&&E("overflow"),s*=g;S=C(x-o,e=_.length+1,0==o),w(x/e)>h-T&&E("overflow"),T+=w(x/e),x%=e,_.splice(x++,0,T)}return A(_)}function D(t){var e,r,i,n,o,s,a,p,f,g,m,_,b,x,S,O=[];for(_=(t=I(t)).length,e=v,r=0,o=d,s=0;s<_;++s)(m=t[s])<128&&O.push(T(m));for(i=n=O.length,n&&O.push(y);i<_;){for(a=h,s=0;s<_;++s)(m=t[s])>=e&&m<a&&(a=m);for(a-e>w((h-r)/(b=i+1))&&E("overflow"),r+=(a-e)*b,e=a,s=0;s<_;++s)if((m=t[s])<e&&++r>h&&E("overflow"),m==e){for(p=r,f=u;!(p<(g=f<=o?c:f>=o+l?l:f-o));f+=u)S=p-g,x=u-g,O.push(T(P(g+S%x,0))),p=w(S/x);O.push(T(P(p,0))),o=C(r,b,i==n),r=0,++i}++r,++e}return O.join("")}a={version:"1.4.1",ucs2:{decode:I,encode:A},decode:M,encode:D,toASCII:function(t){return O(t,(function(t){return m.test(t)?"xn--"+D(t):t}))},toUnicode:function(t){return O(t,(function(t){return g.test(t)?M(t.slice(4).toLowerCase()):t}))}},void 0===(n=function(){return a}.call(e,r,e,t))||(t.exports=n)}()}).call(this,r(23)(t),r(2))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(26),e.encode=e.stringify=r(27)},function(t,e,r){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var h=1e3;o&&"number"==typeof o.maxKeys&&(h=o.maxKeys);var u=t.length;h>0&&u>h&&(u=h);for(var c=0;c<u;++c){var l,p,f,d,v=t[c].replace(a,"%20"),y=v.indexOf(r);y>=0?(l=v.substr(0,y),p=v.substr(y+1)):(l=v,p=""),f=decodeURIComponent(l),d=decodeURIComponent(p),i(s,f)?n(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(i(s))+r;return n(t[s])?o(t[s],(function(t){return a+encodeURIComponent(i(t))})).join(e):a+encodeURIComponent(i(t[s]))})).join(e):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var r=[],i=0;i<t.length;i++)r.push(e(t[i],i));return r}var s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){"use strict";r.r(e),r.d(e,"__extends",(function(){return n})),r.d(e,"__assign",(function(){return o})),r.d(e,"__rest",(function(){return s})),r.d(e,"__decorate",(function(){return a})),r.d(e,"__param",(function(){return h})),r.d(e,"__metadata",(function(){return u})),r.d(e,"__awaiter",(function(){return c})),r.d(e,"__generator",(function(){return l})),r.d(e,"__exportStar",(function(){return p})),r.d(e,"__values",(function(){return f})),r.d(e,"__read",(function(){return d})),r.d(e,"__spread",(function(){return v})),r.d(e,"__spreadArrays",(function(){return y})),r.d(e,"__await",(function(){return g})),r.d(e,"__asyncGenerator",(function(){return m})),r.d(e,"__asyncDelegator",(function(){return _})),r.d(e,"__asyncValues",(function(){return b})),r.d(e,"__makeTemplateObject",(function(){return x})),r.d(e,"__importStar",(function(){return w})),r.d(e,"__importDefault",(function(){return T}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function n(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var o=function(){return(o=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function s(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]])}return r}function a(t,e,r,i){var n,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,r,s):n(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s}function h(t,e){return function(r,i){e(r,i,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,r,i){return new(r||(r=Promise))((function(n,o){function s(t){try{h(i.next(t))}catch(t){o(t)}}function a(t){try{h(i.throw(t))}catch(t){o(t)}}function h(t){t.done?n(t.value):new r((function(e){e(t.value)})).then(s,a)}h((i=i.apply(t,e||[])).next())}))}function l(t,e){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function p(t,e){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function d(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,n,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(t){n[t]&&(i[t]=function(e){return new Promise((function(r,i){o.push([t,e,r,i])>1||a(t,e)}))})}function a(t,e){try{(r=n[t](e)).value instanceof g?Promise.resolve(r.value.v).then(h,u):c(o[0][2],r)}catch(t){c(o[0][3],t)}var r}function h(t){a("next",t)}function u(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function _(t){var e,r;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,n){e[i]=t[i]?function(e){return(r=!r)?{value:g(t[i](e)),done:"return"===i}:n?n(e):e}:n}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=f(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(r){e[r]=t[r]&&function(e){return new Promise((function(i,n){(function(t,e,r,i){Promise.resolve(i).then((function(e){t({value:e,done:r})}),e)})(i,n,(e=t[r](e)).done,e.value)}))}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}},function(t,e,r){"use strict";r.r(e),r.d(e,"__extends",(function(){return n})),r.d(e,"__assign",(function(){return o})),r.d(e,"__rest",(function(){return s})),r.d(e,"__decorate",(function(){return a})),r.d(e,"__param",(function(){return h})),r.d(e,"__metadata",(function(){return u})),r.d(e,"__awaiter",(function(){return c})),r.d(e,"__generator",(function(){return l})),r.d(e,"__exportStar",(function(){return p})),r.d(e,"__values",(function(){return f})),r.d(e,"__read",(function(){return d})),r.d(e,"__spread",(function(){return v})),r.d(e,"__spreadArrays",(function(){return y})),r.d(e,"__await",(function(){return g})),r.d(e,"__asyncGenerator",(function(){return m})),r.d(e,"__asyncDelegator",(function(){return _})),r.d(e,"__asyncValues",(function(){return b})),r.d(e,"__makeTemplateObject",(function(){return x})),r.d(e,"__importStar",(function(){return w})),r.d(e,"__importDefault",(function(){return T}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function n(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var o=function(){return(o=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function s(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]])}return r}function a(t,e,r,i){var n,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,r,s):n(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s}function h(t,e){return function(r,i){e(r,i,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,r,i){return new(r||(r=Promise))((function(n,o){function s(t){try{h(i.next(t))}catch(t){o(t)}}function a(t){try{h(i.throw(t))}catch(t){o(t)}}function h(t){t.done?n(t.value):new r((function(e){e(t.value)})).then(s,a)}h((i=i.apply(t,e||[])).next())}))}function l(t,e){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function p(t,e){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function d(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,n,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(t){n[t]&&(i[t]=function(e){return new Promise((function(r,i){o.push([t,e,r,i])>1||a(t,e)}))})}function a(t,e){try{(r=n[t](e)).value instanceof g?Promise.resolve(r.value.v).then(h,u):c(o[0][2],r)}catch(t){c(o[0][3],t)}var r}function h(t){a("next",t)}function u(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function _(t){var e,r;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,n){e[i]=t[i]?function(e){return(r=!r)?{value:g(t[i](e)),done:"return"===i}:n?n(e):e}:n}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=f(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(r){e[r]=t[r]&&function(e){return new Promise((function(i,n){(function(t,e,r,i){Promise.resolve(i).then((function(e){t({value:e,done:r})}),e)})(i,n,(e=t[r](e)).done,e.value)}))}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}},function(t,e,r){"use strict";r.r(e),r.d(e,"__extends",(function(){return n})),r.d(e,"__assign",(function(){return o})),r.d(e,"__rest",(function(){return s})),r.d(e,"__decorate",(function(){return a})),r.d(e,"__param",(function(){return h})),r.d(e,"__metadata",(function(){return u})),r.d(e,"__awaiter",(function(){return c})),r.d(e,"__generator",(function(){return l})),r.d(e,"__exportStar",(function(){return p})),r.d(e,"__values",(function(){return f})),r.d(e,"__read",(function(){return d})),r.d(e,"__spread",(function(){return v})),r.d(e,"__spreadArrays",(function(){return y})),r.d(e,"__await",(function(){return g})),r.d(e,"__asyncGenerator",(function(){return m})),r.d(e,"__asyncDelegator",(function(){return _})),r.d(e,"__asyncValues",(function(){return b})),r.d(e,"__makeTemplateObject",(function(){return x})),r.d(e,"__importStar",(function(){return w})),r.d(e,"__importDefault",(function(){return T}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function n(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var o=function(){return(o=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function s(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]])}return r}function a(t,e,r,i){var n,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,r,s):n(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s}function h(t,e){return function(r,i){e(r,i,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,r,i){return new(r||(r=Promise))((function(n,o){function s(t){try{h(i.next(t))}catch(t){o(t)}}function a(t){try{h(i.throw(t))}catch(t){o(t)}}function h(t){t.done?n(t.value):new r((function(e){e(t.value)})).then(s,a)}h((i=i.apply(t,e||[])).next())}))}function l(t,e){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function p(t,e){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function d(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,n,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(t){n[t]&&(i[t]=function(e){return new Promise((function(r,i){o.push([t,e,r,i])>1||a(t,e)}))})}function a(t,e){try{(r=n[t](e)).value instanceof g?Promise.resolve(r.value.v).then(h,u):c(o[0][2],r)}catch(t){c(o[0][3],t)}var r}function h(t){a("next",t)}function u(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function _(t){var e,r;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,n){e[i]=t[i]?function(e){return(r=!r)?{value:g(t[i](e)),done:"return"===i}:n?n(e):e}:n}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=f(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(r){e[r]=t[r]&&function(e){return new Promise((function(i,n){(function(t,e,r,i){Promise.resolve(i).then((function(e){t({value:e,done:r})}),e)})(i,n,(e=t[r](e)).done,e.value)}))}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}},function(t,e,r){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function i(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r.r(e),r.d(e,"LogLevel",(function(){return n})),r.d(e,"Logger",(function(){return h})),r.d(e,"setLogLevel",(function(){return u}));var n,o=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(n||(n={}));var s=n.INFO,a=function(t,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(!(e<t.logLevel)){var s=(new Date).toISOString();switch(e){case n.DEBUG:case n.VERBOSE:console.log.apply(console,i(["["+s+"]  "+t.name+":"],r));break;case n.INFO:console.info.apply(console,i(["["+s+"]  "+t.name+":"],r));break;case n.WARN:console.warn.apply(console,i(["["+s+"]  "+t.name+":"],r));break;case n.ERROR:console.error.apply(console,i(["["+s+"]  "+t.name+":"],r));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},h=function(){function t(t){this.name=t,this._logLevel=s,this._logHandler=a,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in n))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,i([this,n.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,i([this,n.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,i([this,n.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,i([this,n.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,i([this,n.ERROR],t))},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(t){o.forEach((function(e){e.logLevel=t}))}},function(t,e,r){"use strict";r.r(e);r(17),r(18),r(19);var i=r(1),n=r.n(i);var o,s,a,h,u,c,l,p,f,d,v,y,g,m,_={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:
/*!
 * @pixi/settings - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
function(t){var e=!0;if(n.a.tablet||n.a.phone){if(e=!1,n.a.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r)parseInt(r[1],10)>=11&&(e=!0)}if(n.a.android.device){var i=navigator.userAgent.match(/Android\s([0-9.]*)/);if(i)parseInt(i[1],10)>=7&&(e=!0)}}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:n.a.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!n.a.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},b=r(12),x=r.n(b),w=r(13),T=r.n(w),E=r(6),S=r.n(E);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(o||(o={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(s||(s={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(a||(a={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(h||(h={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(u||(u={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(c||(c={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(l||(l={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(p||(p={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(f||(f={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(d||(d={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(v||(v={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(y||(y={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(g||(g={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(m||(m={})),
/*!
 * @pixi/utils - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
_.RETINA_PREFIX=/@([0-9\.]+)x/,_.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var O,I=!1,A="5.2.0";function P(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function C(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)}var M=function(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[a.NORMAL_NPM]=a.NORMAL,t[a.ADD_NPM]=a.ADD,t[a.SCREEN_NPM]=a.SCREEN,e[a.NORMAL]=a.NORMAL_NPM,e[a.ADD]=a.ADD_NPM,e[a.SCREEN]=a.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();function D(t,e){return M[e?1:0][t]}function R(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var r=t>>16&255,i=t>>8&255,n=255&t;return(255*e<<24)+((r=r*e+.5|0)<<16)+((i=i*e+.5|0)<<8)+(n=n*e+.5|0)}function N(t,e,r,i){return(r=r||new Float32Array(4))[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(i||void 0===i)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function L(t,e,r){var i,n=t.length;if(!(e>=n||0===r)){var o=n-(r=e+r>n?n-e:r);for(i=e;i<o;++i)t[i]=t[i+r];t.length=o}}var k=0;function F(){return++k}function j(t){return 0===t?0:t<0?-1:1}function B(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function U(t){return!(t&t-1||!t)}function G(t){var e=(t>65535)<<4,r=((t>>>=e)>255)<<3;return e|=r,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1}var z={},H=Object.create(null),X=Object.create(null);var V=function(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||_.RESOLUTION,this.resize(t,e)},Y={width:{configurable:!0},height:{configurable:!0}};V.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},V.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},V.prototype.destroy=function(){this.context=null,this.canvas=null},Y.width.get=function(){return this.canvas.width},Y.width.set=function(t){this.canvas.width=t},Y.height.get=function(){return this.canvas.height},Y.height.set=function(t){this.canvas.height=t},Object.defineProperties(V.prototype,Y);var W;function q(t,e){var r=_.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):void 0!==e?e:1}var K={};function Z(t,e,r){if(void 0===r&&(r=3),!K[e]){var i=(new Error).stack;void 0===i?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),K[e]=!0}}
/*!
 * @pixi/math - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var $,J=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e},t}(),Q=function(){function t(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0),this._x=r,this._y=i,this.cb=t,this.scope=e}return t.prototype.clone=function(e,r){return void 0===e&&(e=this.cb),void 0===r&&(r=this.scope),new t(e,r,this._x,this._y)},t.prototype.set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope))},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),t}(),tt=2*Math.PI,et=180/Math.PI,rt=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}($||($={}));var it=function(){function t(t,e,r,i,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,r,i,n,o){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},t.prototype.apply=function(t,e){e=e||new J;var r=t.x,i=t.y;return e.x=this.a*r+this.c*i+this.tx,e.y=this.b*r+this.d*i+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new J;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,n=t.y;return e.x=this.d*r*i+-this.c*r*n+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*n+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,o=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},t.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,r,i,n,o,s,a,h){return this.a=Math.cos(s+h)*n,this.b=Math.sin(s+h)*n,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,i=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,o=-Math.atan2(-i,n),s=Math.atan2(r,e),a=Math.abs(o+s);return a<1e-5||Math.abs(tt-a)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,o=t*i-e*r;return this.a=i/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-i*n)/o,this.ty=-(t*this.ty-e*n)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!0,configurable:!0}),t}(),nt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ot=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],st=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],at=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ht=[],ut=[],ct=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];ht.push(e);for(var r=0;r<16;r++)for(var i=ct(nt[t]*nt[r]+st[t]*ot[r]),n=ct(ot[t]*nt[r]+at[t]*ot[r]),o=ct(nt[t]*st[r]+st[t]*at[r]),s=ct(ot[t]*st[r]+at[t]*at[r]),a=0;a<16;a++)if(nt[a]===i&&ot[a]===n&&st[a]===o&&at[a]===s){e.push(a);break}}for(t=0;t<16;t++){var h=new it;h.set(nt[t],ot[t],st[t],at[t],0,0),ut.push(h)}}();var lt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return nt[t]},uY:function(t){return ot[t]},vX:function(t){return st[t]},vY:function(t){return at[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return ht[t][e]},sub:function(t,e){return ht[t][lt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?lt.S:lt.N:2*Math.abs(e)<=Math.abs(t)?t>0?lt.E:lt.W:e>0?t>0?lt.SE:lt.SW:t>0?lt.NE:lt.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=ut[lt.inv(e)];n.tx=r,n.ty=i,t.append(n)}},pt=function(){function t(){this.worldTransform=new it,this.localTransform=new it,this.position=new Q(this.onChange,this,0,0),this.scale=new Q(this.onChange,this,1,1),this.pivot=new Q(this.onChange,this,0,0),this.skew=new Q(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,i=this.worldTransform;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!0,configurable:!0}),t.IDENTITY=new t,t}(),ft=function(){function t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=$.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(n-i,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=n-i,this},t}(),dt=function(){function t(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.x=t,this.y=e,this.radius=r,this.type=$.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,i=this.x-t,n=this.y-e;return(i*=i)+(n*=n)<=r},t.prototype.getBounds=function(){return new ft(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}(),vt=function(){function t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t,this.y=e,this.width=r,this.height=i,this.type=$.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,i=(e-this.y)/this.height;return(r*=r)+(i*=i)<=1},t.prototype.getBounds=function(){return new ft(this.x-this.width,this.y-this.height,this.width,this.height)},t}(),yt=function(){function t(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(Array.isArray(e[0])&&(e=e[0]),e[0]instanceof J){for(var i=[],n=0,o=(e=e).length;n<o;n++)i.push(e[n].x,e[n].y);e=i}this.points=e,this.type=$.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,o=i-1;n<i;o=n++){var s=this.points[2*n],a=this.points[2*n+1],h=this.points[2*o],u=this.points[2*o+1];a>e!=u>e&&t<(e-a)/(u-a)*(h-s)+s&&(r=!r)}return r},t}(),gt=function(){function t(t,e,r,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=$.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},t}();
/*!
 * @pixi/display - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
_.SORTABLE_CHILDREN=!1;var mt=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null};mt.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},mt.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},mt.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?ft.EMPTY:((t=t||new ft(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},mt.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},mt.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,o=t[0],s=t[1];e=o<e?o:e,r=s<r?s:r,i=o>i?o:i,n=s>n?s:n,e=(o=t[2])<e?o:e,r=(s=t[3])<r?s:r,i=o>i?o:i,n=s>n?s:n,e=(o=t[4])<e?o:e,r=(s=t[5])<r?s:r,i=o>i?o:i,n=s>n?s:n,e=(o=t[6])<e?o:e,r=(s=t[7])<r?s:r,i=o>i?o:i,n=s>n?s:n,this.minX=e,this.minY=r,this.maxX=i,this.maxY=n},mt.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},mt.prototype.addFrameMatrix=function(t,e,r,i,n){var o=t.a,s=t.b,a=t.c,h=t.d,u=t.tx,c=t.ty,l=this.minX,p=this.minY,f=this.maxX,d=this.maxY,v=o*e+a*r+u,y=s*e+h*r+c;l=v<l?v:l,p=y<p?y:p,f=v>f?v:f,d=y>d?y:d,l=(v=o*i+a*r+u)<l?v:l,p=(y=s*i+h*r+c)<p?y:p,f=v>f?v:f,d=y>d?y:d,l=(v=o*e+a*n+u)<l?v:l,p=(y=s*e+h*n+c)<p?y:p,f=v>f?v:f,d=y>d?y:d,l=(v=o*i+a*n+u)<l?v:l,p=(y=s*i+h*n+c)<p?y:p,f=v>f?v:f,d=y>d?y:d,this.minX=l,this.minY=p,this.maxX=f,this.maxY=d},mt.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,o=this.maxX,s=this.maxY,a=e;a<r;a+=2){var h=t[a],u=t[a+1];i=h<i?h:i,n=u<n?u:n,o=h>o?h:o,s=u>s?u:s}this.minX=i,this.minY=n,this.maxX=o,this.maxY=s},mt.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},mt.prototype.addVerticesMatrix=function(t,e,r,i,n,o){var s=t.a,a=t.b,h=t.c,u=t.d,c=t.tx,l=t.ty;n=n||0,o=o||0;for(var p=this.minX,f=this.minY,d=this.maxX,v=this.maxY,y=r;y<i;y+=2){var g=e[y],m=e[y+1],_=s*g+h*m+c,b=u*m+a*g+l;p=Math.min(p,_-n),d=Math.max(d,_+n),f=Math.min(f,b-o),v=Math.max(v,b+o)}this.minX=p,this.minY=f,this.maxX=d,this.maxY=v},mt.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},mt.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,i=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=n&&i<=o){var s=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=r<s?r:s,this.minY=i<a?i:a,this.maxX=n>h?n:h,this.maxY=o>u?o:u}},mt.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},mt.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,i=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=n&&i<=o){var s=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=r<s?r:s,this.minY=i<a?i:a,this.maxX=n>h?n:h,this.maxY=o>u?o:u}},mt.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},mt.prototype.addFramePad=function(t,e,r,i,n,o){t-=n,e-=o,r+=n,i+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i};var _t=function(t){function e(){t.call(this),this.tempDisplayObjectParent=null,this.transform=new pt,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new mt,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return e.mixin=function(t){for(var r=Object.keys(t),i=0;i<r.length;++i){var n=r[i];Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t,n))}},r._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent},e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new ft),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new ft),t=this._localBoundsRect);var i=this.getBounds(!1,t);return this.parent=r,this.transform=e,i},e.prototype.toGlobal=function(t,e,r){return void 0===r&&(r=!1),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.render=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,r,i,n,o,s,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},r.x.get=function(){return this.position.x},r.x.set=function(t){this.transform.position.x=t},r.y.get=function(){return this.position.y},r.y.set=function(t){this.transform.position.y=t},r.worldTransform.get=function(){return this.transform.worldTransform},r.localTransform.get=function(){return this.transform.localTransform},r.position.get=function(){return this.transform.position},r.position.set=function(t){this.transform.position.copyFrom(t)},r.scale.get=function(){return this.transform.scale},r.scale.set=function(t){this.transform.scale.copyFrom(t)},r.pivot.get=function(){return this.transform.pivot},r.pivot.set=function(t){this.transform.pivot.copyFrom(t)},r.skew.get=function(){return this.transform.skew},r.skew.set=function(t){this.transform.skew.copyFrom(t)},r.rotation.get=function(){return this.transform.rotation},r.rotation.set=function(t){this.transform.rotation=t},r.angle.get=function(){return this.transform.rotation*et},r.angle.set=function(t){this.transform.rotation=t*rt},r.zIndex.get=function(){return this._zIndex},r.zIndex.set=function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},r.worldVisible.get=function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},r.mask.get=function(){return this._mask},r.mask.set=function(t){if(this._mask){var e=this._mask.maskObject||this._mask;e.renderable=!0,e.isMask=!1}if(this._mask=t,this._mask){var r=this._mask.maskObject||this._mask;r.renderable=!1,r.isMask=!0}},Object.defineProperties(e.prototype,r),e}(x.a);function bt(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}_t.prototype.displayObjectUpdateTransform=_t.prototype.updateTransform;var xt=function(t){function e(){t.call(this),this.children=[],this.sortableChildren=_.SORTABLE_CHILDREN,this.sortDirty=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={width:{configurable:!0},height:{configurable:!0}};return e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments,r=arguments.length;if(r>1)for(var i=0;i<r;i++)this.addChild(e[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),i=this.getChildIndex(e);this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);L(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments,r=arguments.length;if(r>1)for(var i=0;i<r;i++)this.removeChild(e[i]);else{var n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,L(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,L(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0);var r,i=t,n="number"==typeof e?e:this.children.length,o=n-i;if(o>0&&o<=n){r=this.children.splice(i,o);for(var s=0;s<r.length;++s)r[s].parent=null,r[s].transform&&(r[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<r.length;++a)r[a].emit("removed",this),this.emit("childRemoved",r[a],this,a);return r}if(0===o&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(bt),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var r=e._mask.maskObject||e._mask;r.calculateBounds(),this._bounds.addBoundsMask(e._bounds,r._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var i=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);for(var n=0,o=this.children.length;n<o;n++)this.children[n].render(t);t.batch.flush(),r&&t.mask.pop(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var r="boolean"==typeof e?e:e&&e.children,i=this.removeChildren(0,this.children.length);if(r)for(var n=0;n<i.length;++n)i[n].destroy(e)},r.width.get=function(){return this.scale.x*this.getLocalBounds().width},r.width.set=function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},r.height.get=function(){return this.scale.y*this.getLocalBounds().height},r.height.set=function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},Object.defineProperties(e.prototype,r),e}(_t);xt.prototype.containerUpdateTransform=xt.prototype.updateTransform;_t.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0});var wt=function(t){this._hookDiv=null,(n.a.tablet||n.a.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessibility=!1,window.addEventListener("keydown",this._onKeyDown,!1)};wt.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",(function(){t.isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},wt.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},wt.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},wt.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessibility&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},wt.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}},wt.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,r=t.height/this.renderer.height,i=this.div;i.style.left=t.left+"px",i.style.top=t.top+"px",i.style.width=this.renderer.width+"px",i.style.height=this.renderer.height+"px";for(var n=0;n<this.children.length;n++){var o=this.children[n];if(o.renderId!==this.renderId)o._accessibleActive=!1,L(this.children,n,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,n--,0===this.children.length&&this.deactivate();else{i=o._accessibleDiv;var s=o.hitArea,a=o.worldTransform;o.hitArea?(i.style.left=(a.tx+s.x*a.a)*e+"px",i.style.top=(a.ty+s.y*a.d)*r+"px",i.style.width=s.width*a.a*e+"px",i.style.height=s.height*a.d*r+"px"):(s=o.getBounds(),this.capHitArea(s),i.style.left=s.x*e+"px",i.style.top=s.y*r+"px",i.style.width=s.width*e+"px",i.style.height=s.height*r+"px",i.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(i.title=o.accessibleTitle),i.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&i.setAttribute("aria-label",o.accessibleHint)),o.accessibleTitle===i.title&&o.tabIndex===i.tabIndex||(i.title=o.accessibleTitle,i.tabIndex=o.tabIndex,this.debug&&this.updateDebugHTML(i))}}this.renderId++}},wt.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},wt.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},wt.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},wt.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},wt.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},wt.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},wt.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},wt.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},wt.prototype.destroy=function(){this.destroyTouchHook(),this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null};
/*!
 * @pixi/runner - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Tt,Et=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,r,i,n,o,s,a){if(arguments.length>8)throw new Error("max arguments reached");var h=this,u=h.name,c=h.items;this._aliasCount++;for(var l=0,p=c.length;l<p;l++)c[l][u](t,e,r,i,n,o,s,a);return c===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t}();Object.defineProperties(Et.prototype,{dispatch:{value:Et.prototype.emit},run:{value:Et.prototype.emit}}),
/*!
 * @pixi/ticker - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
_.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(Tt||(Tt={}));var St=function(){function t(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.fn=t,this.context=e,this.priority=r,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),Ot=function(){function t(){var t=this;this._head=new St(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/_.TARGET_FPMS,this.elapsedMS=1/_.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,r){return void 0===r&&(r=Tt.NORMAL),this._addListener(new St(t,e,r))},t.prototype.addOnce=function(t,e,r){return void 0===r&&(r=Tt.NORMAL),this._addListener(new St(t,e,r,!0))},t.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*_.TARGET_FPMS;for(var i=this._head,n=i.next;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,_.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!0,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!0,configurable:!0}),t}(),It=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Tt.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Ot.shared:new Ot,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}(),At=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Et("setRealSize",2),this.onUpdate=new Et("update"),this.onError=new Et("onError",1)},Pt={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};At.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.run(this._width,this._height)},At.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},At.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.run(t,e))},Pt.valid.get=function(){return!!this._width&&!!this._height},At.prototype.update=function(){this.destroyed||this.onUpdate.run()},At.prototype.load=function(){return Promise.resolve()},Pt.width.get=function(){return this._width},Pt.height.get=function(){return this._height},At.prototype.upload=function(t,e,r){return!1},At.prototype.style=function(t,e,r){return!1},At.prototype.dispose=function(){},At.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(At.prototype,Pt);var Ct=function(t){function e(e){var r=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;t.call(this,r,i),this.source=e,this.noSubImage=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,W||(W=document.createElement("a")),W.href=t;var r=!(t=S.a.parse(W.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"}(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},e.prototype.upload=function(t,e,r,i){var n=t.gl,o=e.realWidth,s=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===v.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==o||r.height!==s?(r.width=o,r.height=s,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source.naturalWidth||this.source.videoWidth||this.source.width,r=this.source.naturalHeight||this.source.videoHeight||this.source.height;this.resize(e,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(At),Mt=function(t){function e(e,r){if(r=r||{},!(e instanceof HTMLImageElement)){var i=new Image;t.crossOrigin(i,e,r.crossorigin),i.src=e,e=i}t.call(this,e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==r.createBitmap?r.createBitmap:_.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.alphaMode="number"==typeof r.alphaMode?r.alphaMode:null,void 0!==r.premultiplyAlpha&&(this.premultiplyAlpha=r.premultiplyAlpha),this.bitmap=null,this._load=null,!1!==r.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(t){var e=this;return void 0!==t&&(this.createBitmap=t),this._load?this._load:(this._load=new Promise((function(t){e.url=e.source.src;var r=e.source,i=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){return e.onError.run(t)})})),this._load)},e.prototype.process=function(){var t=this;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha===v.UNPACK?"premultiply":"none"}).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process):Promise.resolve(this)},e.prototype.upload=function(e,r,i){if("number"==typeof this.alphaMode&&(r.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,r,i,this.bitmap),!this.preserveBitmap){var n=!0;for(var o in r._glTextures){var s=r._glTextures[o];if(s!==i&&s.dirtyId!==r.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e}(Ct),Dt=[];function Rt(t,e){if(!t)return null;var r="";if("string"==typeof t){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(r=i[1].toLowerCase())}for(var n=Dt.length-1;n>=0;--n){var o=Dt[n];if(o.test&&o.test(t,r))return new o(t,e)}return new Mt(t,e)}var Nt=function(t){function e(e,r){var i=r||{},n=i.width,o=i.height;if(!n||!o)throw new Error("BufferResource width or height invalid");t.call(this,n,o),this.data=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.upload=function(t,e,r){var i=t.gl;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===v.UNPACK),r.width===e.width&&r.height===e.height?i.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(r.width=e.width,r.height=e.height,i.texImage2D(e.target,0,r.internalFormat,e.width,e.height,0,e.format,r.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(At),Lt={scaleMode:p.NEAREST,format:u.RGBA,alphaMode:v.NPM},kt=function(t){function e(e,r){void 0===e&&(e=null),void 0===r&&(r=null),t.call(this);var i=(r=r||{}).alphaMode,n=r.mipmap,o=r.anisotropicLevel,s=r.scaleMode,a=r.width,h=r.height,p=r.wrapMode,f=r.format,d=r.type,y=r.target,g=r.resolution,m=r.resourceOptions;!e||e instanceof At||((e=Rt(e,m)).internal=!0),this.width=a||0,this.height=h||0,this.resolution=g||_.RESOLUTION,this.mipmap=void 0!==n?n:_.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==o?o:_.ANISOTROPIC_LEVEL,this.wrapMode=p||_.WRAP_MODE,this.scaleMode=void 0!==s?s:_.SCALE_MODE,this.format=f||u.RGBA,this.type=d||l.UNSIGNED_BYTE,this.target=y||c.TEXTURE_2D,this.alphaMode=void 0!==i?i:v.UNPACK,void 0!==r.premultiplyAlpha&&(this.premultiplyAlpha=r.premultiplyAlpha),this.uid=F(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&h>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.setResource(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={realWidth:{configurable:!0},realHeight:{configurable:!0}};return r.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},r.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},e.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=U(this.realWidth)&&U(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete X[this.cacheId],delete H[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.from=function(t,r,i){void 0===i&&(i=_.STRICT_TEXTURE_CACHE);var n="string"==typeof t,o=null;n?o=t:(t._pixiId||(t._pixiId="pixiid_"+F()),o=t._pixiId);var s=X[o];if(n&&i&&!s)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return s||((s=new e(t,r)).cacheId=o,e.addToCache(s,o)),s},e.fromBuffer=function(t,r,i,n){t=t||new Float32Array(r*i*4);var o=new Nt(t,{width:r,height:i}),s=t instanceof Float32Array?l.FLOAT:l.UNSIGNED_BYTE;return new e(o,Object.assign(Lt,n||{width:r,height:i,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),X[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),X[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=X[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete X[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete X[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperties(e.prototype,r),e}(x.a);kt._globalBatch=0;var Ft=function(t){function e(e,r){var i;r=r||{};var n=e;Array.isArray(e)&&(i=e,n=e.length),t.call(this,r.width,r.height),this.items=[],this.itemDirtyIds=[];for(var o=0;o<n;o++){var s=new kt;this.items.push(s),this.itemDirtyIds.push(-1)}if(this.length=n,this._load=null,i)for(var a=0;a<n;a++)this.addResourceAt(Rt(i[a],r),a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=c.TEXTURE_2D_ARRAY;for(var r=0;r<this.length;r++)this.items[r].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})),r=e.map((function(t){return t.load()}));return this._load=Promise.all(r).then((function(){var r=e[0],i=r.width,n=r.height;return t.resize(i,n),Promise.resolve(t)})),this._load},e.prototype.upload=function(t,e,r){var i=this.length,n=this.itemDirtyIds,o=this.items,s=t.gl;r.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=o[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},e}(At),jt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(Ct),Bt=function(t){function e(r,i){if(i=i||{},t.call(this,r,i),this.length!==e.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var n=0;n<e.SIDES;n++)this.items[n].target=c.TEXTURE_CUBE_MAP_POSITIVE_X+n;!1!==i.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=c.TEXTURE_CUBE_MAP},e.prototype.upload=function(t,r,i){for(var n=this.itemDirtyIds,o=0;o<e.SIDES;o++){var s=this.items[o];n[o]<s.dirtyId&&(n[o]=s.dirtyId,s.valid&&s.resource.upload(t,s,i))}return!0},e}(Ft);Bt.SIDES=6;var Ut=function(t){function e(e,r){r=r||{},t.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=e,this.scale=r.scale||1,this._overrideWidth=r.width,this._overrideHeight=r.height,this._resolve=null,this._crossorigin=r.crossorigin,this._load=null,!1!==r.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load)},e.prototype._loadSvg=function(){var e=this,r=new Image;t.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(t){r.onerror=null,e.onError.run(t)},r.onload=function(){var t=r.width,i=r.height;if(!t||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var n=t*e.scale,o=i*e.scale;(e._overrideWidth||e._overrideHeight)&&(n=e._overrideWidth||e._overrideHeight/i*t,o=e._overrideHeight||e._overrideWidth/t*i),n=Math.round(n),o=Math.round(o);var s=e.source;s.width=n,s.height=o,s._pixiId="canvas_"+F(),s.getContext("2d").drawImage(r,0,0,t,i,0,0,n,o),e._resolve(),e._resolve=null}},e.getSize=function(t){var r=e.SVG_SIZE.exec(t),i={};return r&&(i[r[1]]=Math.round(parseFloat(r[3])),i[r[5]]=Math.round(parseFloat(r[7]))),i},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"==typeof t&&0===t.indexOf("data:image/svg+xml;base64")||"string"==typeof t&&0===t.indexOf("<svg")},e}(Ct);Ut.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var Gt=function(t){function e(e,r){if(r=r||{},!(e instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),"string"==typeof e&&(e=[e]),t.crossOrigin(i,e[0].src||e[0],r.crossorigin);for(var n=0;n<e.length;++n){var o=document.createElement("source"),s=e[n],a=s.src,h=s.mime,u=(a=a||e[n]).split("?").shift().toLowerCase(),c=u.substr(u.lastIndexOf(".")+1);h=h||"video/"+c,o.src=a,o.type=h,i.appendChild(o)}e=i}t.call(this,e),this.noSubImage=!0,this._autoUpdate=!0,this._isAutoUpdating=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==r.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==r.autoLoad&&this.load()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return e.prototype.update=function(e){if(void 0===e&&(e=0),!this.destroyed){var r=Ot.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this,e),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(r){t.valid?r(t):(t._resolve=r,e.load())})),this._load},e.prototype._onError=function(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(Ot.shared.add(this.update,this),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(Ot.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isAutoUpdating&&Ot.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),t.prototype.dispose.call(this)},r.autoUpdate.get=function(){return this._autoUpdate},r.autoUpdate.set=function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(Ot.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(Ot.shared.add(this.update,this),this._isAutoUpdating=!0))},r.updateFPS.get=function(){return this._updateFPS},r.updateFPS.set=function(t){t!==this._updateFPS&&(this._updateFPS=t)},e.test=function(t,r){return t instanceof HTMLVideoElement||e.TYPES.indexOf(r)>-1},Object.defineProperties(e.prototype,r),e}(Ct);Gt.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var zt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(Ct);Dt.push(Mt,zt,jt,Gt,Ut,Nt,Bt,Ft);var Ht=function(t){this.renderer=t};Ht.prototype.destroy=function(){this.renderer=null};var Xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.upload=function(t,e,r){var i=t.gl;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===v.UNPACK),r.width===e.width&&r.height===e.height?i.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(r.width=e.width,r.height=e.height,i.texImage2D(e.target,0,i.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(Nt),Vt=function(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Et("disposeFramebuffer",2)},Yt={colorTexture:{configurable:!0}};Yt.colorTexture.get=function(){return this.colorTextures[0]},Vt.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new kt(null,{scaleMode:0,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Vt.prototype.addDepthTexture=function(t){return this.depthTexture=t||new kt(new Xt(null,{width:this.width,height:this.height}),{scaleMode:0,resolution:1,width:this.width,height:this.height,mipmap:!1,format:u.DEPTH_COMPONENT,type:l.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Vt.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Vt.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Vt.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,e/o)}}},Vt.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Object.defineProperties(Vt.prototype,Yt);var Wt=function(t){function e(e){"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});t.call(this,null,e);var r=e||{},i=r.width,n=r.height;this.mipmap=!1,this.width=Math.ceil(i)||100,this.height=Math.ceil(n)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new Vt(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.maskStack=[],this.filterStack=[{}]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.framebuffer=null},e}(kt),qt=function(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)};qt.prototype.set=function(t,e,r){var i=e.width,n=e.height;if(r){var o=t.width/2/i,s=t.height/2/n,a=t.x/i+o,h=t.y/n+s;r=lt.add(r,lt.NW),this.x0=a+o*lt.uX(r),this.y0=h+s*lt.uY(r),r=lt.add(r,2),this.x1=a+o*lt.uX(r),this.y1=h+s*lt.uY(r),r=lt.add(r,2),this.x2=a+o*lt.uX(r),this.y2=h+s*lt.uY(r),r=lt.add(r,2),this.x3=a+o*lt.uX(r),this.y3=h+s*lt.uY(r)}else this.x0=t.x/i,this.y0=t.y/n,this.x1=(t.x+t.width)/i,this.y1=t.y/n,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/n,this.x3=t.x/i,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var Kt=new qt,Zt=function(t){function e(r,i,n,o,s,a){if(t.call(this),this.noFrame=!1,i||(this.noFrame=!0,i=new ft(0,0,1,1)),r instanceof e&&(r=r.baseTexture),this.baseTexture=r,this._frame=i,this.trim=o,this.valid=!1,this.requiresUpdate=!1,this._uvs=Kt,this.uvMatrix=null,this.orig=n||i,this._rotate=Number(s||0),!0===s)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new J(a.x,a.y):new J(0,0),this._updateID=0,this.textureCacheIds=[],r.valid?this.noFrame?r.valid&&this.onBaseTextureUpdated(r):this.frame=i:r.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&r.on("update",this.onBaseTextureUpdated,this)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var r=this.baseTexture.resource;r&&H[r.url]&&e.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===Kt&&(this._uvs=new qt),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,r,i){void 0===r&&(r={}),void 0===i&&(i=_.STRICT_TEXTURE_CACHE);var n="string"==typeof t,o=null;n?o=t:(t._pixiId||(t._pixiId="pixiid_"+F()),o=t._pixiId);var s=H[o];if(n&&i&&!s)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return s||(r.resolution||(r.resolution=q(t)),(s=new e(new kt(t,r))).baseTexture.cacheId=o,kt.addToCache(s.baseTexture,o),e.addToCache(s,o)),s},e.fromBuffer=function(t,r,i,n){return new e(kt.fromBuffer(t,r,i,n))},e.fromLoader=function(t,r,i){var n=new Mt(t);n.url=r;var o=new e(new kt(n,{scaleMode:_.SCALE_MODE,resolution:q(r)}));return i||(i=r),kt.addToCache(o.baseTexture,i),e.addToCache(o,i),i!==r&&(kt.addToCache(o.baseTexture,r),e.addToCache(o,r)),o},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),H[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),H[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=H[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete H[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)H[t.textureCacheIds[i]]===t&&delete H[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},r.resolution.get=function(){return this.baseTexture.resolution},r.frame.get=function(){return this._frame},r.frame.set=function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,o=e+i>this.baseTexture.width,s=r+n>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",h="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,u="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+u)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},r.rotate.get=function(){return this._rotate},r.rotate.set=function(t){this._rotate=t,this.valid&&this.updateUvs()},r.width.get=function(){return this.orig.width},r.height.get=function(){return this.orig.height},Object.defineProperties(e.prototype,r),e}(x.a);function $t(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}Zt.EMPTY=new Zt(new kt),$t(Zt.EMPTY),$t(Zt.EMPTY.baseTexture),Zt.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Zt(new kt(new jt(t)))}(),$t(Zt.WHITE),$t(Zt.WHITE.baseTexture);var Jt=function(t){function e(e,r){var i=null;if(!(e instanceof Wt)){var n=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4];console.warn("Please use RenderTexture.create("+n+", "+o+") instead of the ctor directly."),i=arguments[0],r=null,e=new Wt({width:n,height:o,scaleMode:s,resolution:a})}t.call(this,e,r),this.legacyRenderer=i,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){return"number"==typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new Wt(t))},e}(Zt),Qt=function(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0};Qt.prototype.createTexture=function(t,e){var r=new Wt(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Jt(r)},Qt.prototype.getOptimalTexture=function(t,e,r){void 0===r&&(r=1);var i=Qt.SCREEN_KEY;t*=r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=B(t)))<<16|65535&(e=B(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return n||(n=this.createTexture(t,e)),n.filterPoolKey=i,n.setResolution(r),n},Qt.prototype.getFilterTexture=function(t,e){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution);return r.filterFrame=t.filterFrame,r},Qt.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},Qt.prototype.returnFilterTexture=function(t){this.returnTexture(t)},Qt.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},Qt.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=Qt.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=t.width>0&&t.height>0,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},Qt.SCREEN_KEY="screen";var te=function(t,e,r,i,n,o,s){void 0===r&&(r=!1),void 0===i&&(i=5126),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=o,this.instance=s};te.prototype.destroy=function(){this.buffer=null},te.from=function(t,e,r,i,n){return new te(t,e,r,i,n)};var ee=0,re=function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=ee++,this.disposeRunner=new Et("disposeBuffer",2)};function ie(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}re.prototype.update=function(t){this.data=t||this.data,this._updateID++},re.prototype.dispose=function(){this.disposeRunner.run(this,!1)},re.prototype.destroy=function(){this.dispose(),this.data=null},re.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new re(t)};var ne={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var oe={5126:4,5123:2,5121:1},se=0,ae={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},he=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=se++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Et("disposeGeometry",2),this.refCount=0};he.prototype.addAttribute=function(t,e,r,i,n,o,s,a){if(void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e.data||(e instanceof Array&&(e=new Float32Array(e)),e=new re(e));var h=t.split("|");if(h.length>1){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,r,i,n);return this}var c=this.buffers.indexOf(e);return-1===c&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new te(c,r,i,n,o,s,a),this.instanced=this.instanced||a,this},he.prototype.getAttribute=function(t){return this.attributes[t]},he.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},he.prototype.addIndex=function(t){return t.data||(t instanceof Array&&(t=new Uint16Array(t)),t=new re(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},he.prototype.getIndex=function(){return this.indexBuffer},he.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new re;for(t in this.attributes){var n=this.attributes[t],o=this.buffers[n.buffer];e.push(o.data),r.push(n.size*oe[n.type]/4),n.buffer=0}for(i.data=function(t,e){for(var r=0,i=0,n={},o=0;o<t.length;o++)i+=e[o],r+=t[o].length;for(var s=new ArrayBuffer(4*r),a=null,h=0,u=0;u<t.length;u++){var c=e[u],l=t[u],p=ie(l);n[p]||(n[p]=new ne[p](s)),a=n[p];for(var f=0;f<l.length;f++){a[(f/c|0)*i+h+f%c]=l[f]}h+=c}return new Float32Array(s)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},he.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},he.prototype.dispose=function(){this.disposeRunner.run(this,!1)},he.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},he.prototype.clone=function(){for(var t=new he,e=0;e<this.buffers.length;e++)t.buffers[e]=new re(this.buffers[e].data.slice());for(var r in this.attributes){var i=this.attributes[r];t.attributes[r]=new te(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},he.merge=function(t){for(var e,r=new he,i=[],n=[],o=[],s=0;s<t.length;s++){e=t[s];for(var a=0;a<e.buffers.length;a++)n[a]=n[a]||0,n[a]+=e.buffers[a].data.length,o[a]=0}for(var h=0;h<e.buffers.length;h++)i[h]=new(ae[ie(e.buffers[h].data)])(n[h]),r.buffers[h]=new re(i[h]);for(var u=0;u<t.length;u++){e=t[u];for(var c=0;c<e.buffers.length;c++)i[c].set(e.buffers[c].data,o[c]),o[c]+=e.buffers[c].data.length}if(r.attributes=e.attributes,e.indexBuffer){r.indexBuffer=r.buffers[e.buffers.indexOf(e.indexBuffer)],r.indexBuffer.index=!0;for(var l=0,p=0,f=0,d=0,v=0;v<e.buffers.length;v++)if(e.buffers[v]!==e.indexBuffer){d=v;break}for(var y in e.attributes){var g=e.attributes[y];(0|g.buffer)===d&&(p+=g.size*oe[g.type]/4)}for(var m=0;m<t.length;m++){for(var _=t[m].indexBuffer.data,b=0;b<_.length;b++)r.indexBuffer.data[b+f]+=l;l+=e.buffers[d].data.length/p,f+=_.length}}return r};var ue=function(t){function e(){t.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(he),ce=function(t){function e(){t.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new re(this.vertices),this.uvBuffer=new re(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,e){var r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+e.width/t.width,this.uvs[3]=i,this.uvs[4]=r+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=r,this.uvs[7]=i+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(he),le=0,pe=function(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=le++,this.static=!!e};pe.prototype.update=function(){this.dirtyId++},pe.prototype.add=function(t,e,r){this.uniforms[t]=new pe(e,r)},pe.from=function(t,e){return new pe(t,e)};var fe=function(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new ft,this.destinationFrame=new ft,this.filters=[]};fe.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};var de=function(t){function e(e){t.call(this,e),this.defaultFilterStack=[{}],this.texturePool=new Qt,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new ue,this.quadUv=new ce,this.tempRect=new ft,this.activeState={},this.globalUniforms=new pe({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this._pixelsWidth=e.view.width,this._pixelsHeight=e.view.height}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new fe,o=e[0].resolution,s=e[0].padding,a=e[0].autoFit,h=e[0].legacy,u=1;u<e.length;u++){var c=e[u];o=Math.min(o,c.resolution),s=Math.max(s,c.padding),a=a||c.autoFit,h=h||c.legacy}1===i.length&&(this.defaultFilterStack[0].renderTexture=r.renderTexture.current),i.push(n),n.resolution=o,n.legacy=h,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(s),a&&n.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),n.sourceFrame.ceil(o),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height,n.renderTexture.filterFrame=n.sourceFrame,r.renderTexture.bind(n.renderTexture,n.sourceFrame),r.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,o=i.inputPixel,s=i.inputClamp;if(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=n[0]*e.resolution,o[1]=n[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*n[2]-.5*o[2],s[3]=e.sourceFrame.height*n[3]-.5*o[3],e.legacy){var a=i.filterArea;a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var h=t[t.length-1];if(1===r.length)r[0].apply(this,e.renderTexture,h.renderTexture,!1,e),this.returnFilterTexture(e.renderTexture);else{var u=e.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,e.resolution);c.filterFrame=u.filterFrame;var l=0;for(l=0;l<r.length-1;++l){r[l].apply(this,u,c,!0,e);var p=u;u=c,c=p}r[l].apply(this,u,h.renderTexture,!1,e),this.returnFilterTexture(u),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},e.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;n.renderTexture.bind(r,r?r.filterFrame:null),i&&n.renderTexture.clear(),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.state.set(t.state),n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(h.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(h.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,o=e._texture.orig,s=t.set(n.width,0,0,n.height,i.x,i.y),a=e.worldTransform.copyTo(it.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,r){return void 0===r&&(r=1),this.texturePool.getOptimalTexture(t,e,r)},e.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}(Ht),ve=function(t){this.renderer=t};ve.prototype.flush=function(){},ve.prototype.destroy=function(){this.renderer=null},ve.prototype.start=function(){},ve.prototype.stop=function(){this.flush()},ve.prototype.render=function(t){};var ye=function(t){function e(e){t.call(this,e),this.emptyRenderer=new ve(e),this.currentRenderer=this.emptyRenderer}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;i>=0;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},e.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,o=t.ids,s=t.count,a=0,h=0;h<s;h++){var u=n[h],c=u._batchLocation;if(c>=0&&c<i&&e[c]===u)o[h]=c;else for(;a<i;){var l=e[a];if(!l||l._batchEnabled!==r||l._batchLocation!==a){o[h]=a,u._batchLocation=a,e[a]=u;break}a++}}},e}(Ht);_.PREFER_ENV=n.a.any?o.WEBGL:o.WEBGL2,_.STRICT_TEXTURE_CACHE=!1;var ge=0,me=function(t){function e(e){t.call(this,e),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={isLost:{configurable:!0}};return r.isLost.get=function(){return!this.gl||this.gl.isContextLost()},e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=ge++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=ge++,this.renderer.runners.contextChange.run(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var r;if(_.PREFER_ENV>=o.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),r},e.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBKIT_WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.run(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(e.prototype,r),e}(Ht),_e=function(t){function e(e){t.call(this,e),this.managedFramebuffers=[],this.unknownFramebuffer=new Vt(10,10)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={size:{configurable:!0}};return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ft,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;_.PREFER_ENV===o.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}},e.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++)t.colorTextures[n].texturePart?this.renderer.texture.unbind(t.colorTextures[n].texture):this.renderer.texture.unbind(t.colorTextures[n]);t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},r.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},e.prototype.clear=function(t,e,r,i){var n=this.gl;n.clearColor(t,e,r,i),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},e.prototype.initFramebuffer=function(t){var e={framebuffer:this.gl.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},e.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1));for(var n=[],o=0;o<i;o++){var s=t.colorTextures[o];s.texturePart?(this.renderer.texture.bind(s.texture,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,e.TEXTURE_CUBE_MAP_NEGATIVE_X+s.side,s.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,e.TEXTURE_2D,s._glTextures[this.CONTEXT_UID].texture,0)),n.push(e.COLOR_ATTACHMENT0+o)}if((n.length>1&&e.drawBuffers(n),t.depthTexture)&&this.writeDepthTexture){var a=t.depthTexture;this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,0)}r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},e.prototype.disposeFramebuffer=function(t,e){var r=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(r){delete t.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(i.deleteFramebuffer(r.framebuffer),r.stencil&&i.deleteRenderbuffer(r.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var r=t.width,i=t.height,n=this.gl,o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,r,i),e.stencil=o,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ft},Object.defineProperties(e.prototype,r),e}(Ht),be=function(t){this.buffer=t,this.updateID=-1,this.byteLength=-1,this.refCount=0},xe={5126:4,5123:2,5121:1},we=function(t){function e(e){t.call(this,e),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!t.createVertexArray){var r=this.renderer.context.extensions.vertexArrayObject;_.PREFER_ENV===o.WEBGL_LEGACY&&(r=null),r?(t.createVertexArray=function(){return r.createVertexArrayOES()},t.bindVertexArray=function(t){return r.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return r.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){},t.bindVertexArray=function(){},t.deleteVertexArray=function(){})}if(!t.vertexAttribDivisor){var i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=function(t,e){return i.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,n,o){return i.drawElementsInstancedANGLE(t,e,r,n,o)},t.drawArraysInstanced=function(t,e,r,n){return i.drawArraysInstancedANGLE(t,e,r,n)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID];i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={});var n=i[e.program.id]||this.initGeometryVao(t,e.program);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i=t.buffers[r],n=i._glBuffers[this.CONTEXT_UID];if(i._updateID!==n.updateID){n.updateID=i._updateID;var o=i.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(o,n.buffer),this._boundBuffer=n,n.byteLength>=i.data.byteLength)e.bufferSubData(o,0,i.data);else{var s=i.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=i.data.byteLength,e.bufferData(o,i.data,s)}}}},e.prototype.checkCompatibility=function(t,e){var r=t.attributes,i=e.attributeData;for(var n in i)if(!r[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},e.prototype.getSignature=function(t,e){var r=t.attributes,i=e.attributeData,n=["g",t.id];for(var o in r)i[o]&&n.push(o);return n.join("-")},e.prototype.initGeometryVao=function(t,e){this.checkCompatibility(t,e);var r=this.gl,i=this.CONTEXT_UID,n=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],s=o[n];if(s)return o[e.id]=s,s;var a=t.buffers,h=t.attributes,u={},c={};for(var l in a)u[l]=0,c[l]=0;for(var p in h)!h[p].size&&e.attributeData[p]?h[p].size=e.attributeData[p].size:h[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),u[h[p].buffer]+=h[p].size*xe[h[p].type];for(var f in h){var d=h[f],v=d.size;void 0===d.stride&&(u[d.buffer]===v*xe[d.type]?d.stride=0:d.stride=u[d.buffer]),void 0===d.start&&(d.start=c[d.buffer],c[d.buffer]+=v*xe[d.type])}s=r.createVertexArray(),r.bindVertexArray(s);for(var y=0;y<a.length;y++){var g=a[y];g._glBuffers[i]||(g._glBuffers[i]=new be(r.createBuffer()),this.managedBuffers[g.id]=g,g.disposeRunner.add(this)),g._glBuffers[i].refCount++}return this.activateVao(t,e),this._activeVao=s,o[e.id]=s,o[n]=s,s},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var r=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var o=0;o<n.length;o++){var s=n[o]._glBuffers[this.CONTEXT_UID];s.refCount--,0!==s.refCount||e||this.disposeBuffer(n[o],e)}if(!e)for(var a in r)if("g"===a[0]){var h=r[a];this._activeVao===h&&this.unbind(),i.deleteVertexArray(h)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);e=Object.keys(this.managedBuffers);for(var i=0;i<e.length;i++)this.disposeBuffer(this.managedBuffers[e[i]],t)},e.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,o=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var s=null;for(var a in o){var h=o[a],u=n[h.buffer]._glBuffers[i];if(e.attributeData[a]){s!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),s=u);var c=e.attributeData[a].location;if(r.enableVertexAttribArray(c),r.vertexAttribPointer(c,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(c,1)}}}},e.prototype.draw=function(t,e,r,i){var n=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(r||0)*s,i||1):n.drawElements(t,e||o.indexBuffer.data.length,a,(r||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,r,e||o.getSize(),i||1):n.drawArrays(t,r,e||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(Ht),Te=function(t){this.type=m.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null};function Ee(t,e,r,i){var n=Se(t,t.VERTEX_SHADER,e),o=Se(t,t.FRAGMENT_SHADER,r),s=t.createProgram();if(t.attachShader(s,n),t.attachShader(s,o),i)for(var a in i)t.bindAttribLocation(s,i[a],a);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(n),t.deleteShader(o),s}function Se(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(console.warn(r),console.error(t.getShaderInfoLog(i)),null)}function Oe(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return Ie(2*e);case"bvec3":return Ie(3*e);case"bvec4":return Ie(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function Ie(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}Te.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=m.NONE,this.autoDetect=!0),this._target=null},Te.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var Ae,Pe={},Ce=Pe;function Me(){if(Ce===Pe||Ce&&Ce.isContextLost()){var t,e=document.createElement("canvas");_.PREFER_ENV>=o.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),Ce=t}return Ce}function De(t,e,r){if("precision"!==t.substring(0,9)){var i=e;return e===g.HIGH&&r!==g.HIGH&&(i=g.MEDIUM),"precision "+i+" float;\n"+t}return r!==g.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var Re={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Ne(t){return Re[t]}var Le=null,ke={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function Fe(t,e){if(!Le){var r=Object.keys(ke);Le={};for(var i=0;i<r.length;++i){var n=r[i];Le[t[n]]=ke[n]}}return Le[e]}var je={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Be={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Ue,Ge=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function ze(t){for(var e="",r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}var He=0,Xe={},Ve=function t(e,r,i){void 0===i&&(i="pixi-shader"),this.id=He++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),Xe[i]?(Xe[i]++,i+="-"+Xe[i]):Xe[i]=1,this.vertexSrc="#define SHADER_NAME "+i+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+"\n"+this.fragmentSrc,this.vertexSrc=De(this.vertexSrc,_.PRECISION_VERTEX,g.HIGH),this.fragmentSrc=De(this.fragmentSrc,_.PRECISION_FRAGMENT,function(){if(!Ae){Ae=g.MEDIUM;var t=Me();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Ae=e.precision?g.HIGH:g.MEDIUM}}return Ae}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null},Ye={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};Ve.prototype.extractData=function(t,e){var r=Me();if(r){var i=Ee(r,t,e);this.attributeData=this.getAttributeData(i,r),this.uniformData=this.getUniformData(i,r),r.deleteProgram(i)}else this.uniformData={},this.attributeData={}},Ve.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<n;o++){var s=e.getActiveAttrib(t,o),a=Fe(e,s.type),h={type:a,name:s.name,size:Ne(a),location:0};r[s.name]=h,i.push(h)}i.sort((function(t,e){return t.name>e.name?1:-1}));for(var u=0;u<i.length;u++)i[u].location=u;return r},Ve.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var o=e.getActiveUniform(t,n),s=o.name.replace(/\[.*?\]/,""),a=o.name.match(/\[.*?\]/,""),h=Fe(e,o.type);r[s]={type:h,size:o.size,isArray:a,value:Oe(h,o.size)}}return r},Ye.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},Ye.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},Ve.from=function(t,e,r){var i=t+e,n=z[i];return n||(z[i]=n=new Ve(t,e,r)),n},Object.defineProperties(Ve,Ye);var We=function(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof pe?e:new pe(e):new pe({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))},qe={uniforms:{configurable:!0}};We.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){var i=e.uniforms[r];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},We.prototype.destroy=function(){this.uniformGroup=null},qe.uniforms.get=function(){return this.uniformGroup.uniforms},We.from=function(t,e,r){var i=Ve.from(t,e);return new We(i,r)},Object.defineProperties(We.prototype,qe);var Ke=function(){this.data=0,this.blendMode=a.NORMAL,this.polygonOffset=0,this.blend=!0},Ze={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};Ze.blend.get=function(){return!!(1&this.data)},Ze.blend.set=function(t){!!(1&this.data)!==t&&(this.data^=1)},Ze.offsets.get=function(){return!!(2&this.data)},Ze.offsets.set=function(t){!!(2&this.data)!==t&&(this.data^=2)},Ze.culling.get=function(){return!!(4&this.data)},Ze.culling.set=function(t){!!(4&this.data)!==t&&(this.data^=4)},Ze.depthTest.get=function(){return!!(8&this.data)},Ze.depthTest.set=function(t){!!(8&this.data)!==t&&(this.data^=8)},Ze.clockwiseFrontFace.get=function(){return!!(16&this.data)},Ze.clockwiseFrontFace.set=function(t){!!(16&this.data)!==t&&(this.data^=16)},Ze.blendMode.get=function(){return this._blendMode},Ze.blendMode.set=function(t){this.blend=t!==a.NONE,this._blendMode=t},Ze.polygonOffset.get=function(){return this._polygonOffset},Ze.polygonOffset.set=function(t){this.offsets=!!t,this._polygonOffset=t},Ke.for2d=function(){var t=new Ke;return t.depthTest=!1,t.blend=!0,t},Object.defineProperties(Ke.prototype,Ze);var $e=function(t){function e(r,i,n){var o=Ve.from(r||e.defaultVertexSrc,i||e.defaultFragmentSrc);t.call(this,o,n),this.padding=0,this.resolution=_.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new Ke}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={blendMode:{configurable:!0}},i={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return e.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i,n)},r.blendMode.get=function(){return this.state.blendMode},r.blendMode.set=function(t){this.state.blendMode=t},i.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},i.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},Object.defineProperties(e.prototype,r),Object.defineProperties(e,i),e}(We);$e.SOURCE_KEY_MAP={};var Je="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",Qe="varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",tr=new it,er=function(t,e){this._texture=t,this.mapCoord=new it,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1},rr={texture:{configurable:!0}};rr.texture.get=function(){return this._texture},rr.texture.set=function(t){this._texture=t,this._updateID=-1},er.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],o=t[i+1];e[i]=n*r.a+o*r.c+r.tx,e[i+1]=n*r.b+o*r.d+r.ty}return e},er.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._updateID===e._updateID)return!1;this._updateID=e._updateID;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(tr.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(tr));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,h=this.clampOffset;return s[0]=(e._frame.x+a+h)/o.width,s[1]=(e._frame.y+a+h)/o.height,s[2]=(e._frame.x+e._frame.width-a+h)/o.width,s[3]=(e._frame.y+e._frame.height-a+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},Object.defineProperties(er.prototype,rr);var ir=function(t){function e(e){var r=new it;t.call(this,Je,Qe),e.renderable=!1,this.maskSprite=e,this.maskMatrix=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t,e,r,i){var n=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.transform||(o.transform=new er(o,0)),o.transform.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.transform.uClampFrame,t.applyFilter(this,e,r,i))},e}($e),nr=function(t){function e(e){t.call(this,e),this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){if(!e.isMaskData){var r=this.maskDataPool.pop()||new Te;r.pooled=!0,r.maskObject=e,e=r}switch(e.autoDetect&&this.detect(e),e.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),e._target=t,e.type){case m.SCISSOR:this.maskStack.push(e),this.renderer.scissor.push(e);break;case m.STENCIL:this.maskStack.push(e),this.renderer.stencil.push(e);break;case m.SPRITE:e.copyCountersOrReset(null),this.pushSpriteMask(e),this.maskStack.push(e)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case m.SCISSOR:this.renderer.scissor.pop();break;case m.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case m.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=m.SPRITE;else if(t.type=m.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var r=e.worldTransform,i=Math.atan2(r.b,r.a),n=Math.atan2(r.d,r.c);i=Math.round(i*(180/Math.PI)*100),n=((n=Math.round(n*(180/Math.PI)*100)-i)%18e3+18e3)%18e3,0===(i=(i%9e3+9e3)%9e3)&&9e3===n&&(t.type=m.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new ir(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e;var n=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=n,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(Ht),or=function(t){function e(e){t.call(this,e),this.maskStack=[],this.glConst=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;var i=this.getStackLength();i!==r&&(0===i?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this,this),this.maskStack=null},e}(Ht),sr=function(t){function e(e){t.call(this,e),this.glConst=WebGLRenderingContext.SCISSOR_TEST}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,o=r.destinationFrame,s=e?e.resolution:this.renderer.resolution,a=(t.x-n.x)*s+o.x,h=(t.y-n.y)*s+o.y,u=t.width*s,c=t.height*s;i&&(a+=i.tx*s,h+=i.ty*s),e||(h=this.renderer.height-c-h),this.renderer.gl.scissor(a,h,u,c)},e}(or),ar=function(t){function e(e){t.call(this,e),this.glConst=WebGLRenderingContext.STENCIL_TEST}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(or),hr=function(t){function e(e){t.call(this,e),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new it,this.transform=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix;i?(n.a=1/t.width*2*r,n.d=-1/t.height*2*r,n.tx=-1-e.x*n.a,n.ty=1-e.y*n.d):(n.a=1/t.width*2*r,n.d=1/t.height*2*r,n.tx=-1-e.x*n.a,n.ty=-1-e.y*n.d)},e.prototype.setTransform=function(){},e}(Ht),ur=new ft,cr=function(t){function e(e){t.call(this,e),this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ft,this.destinationFrame=new ft}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(t,e,r){void 0===t&&(t=null),this.current=t;var i,n=this.renderer;if(t){var o=t.baseTexture;i=o.resolution,r||(ur.width=o.realWidth,ur.height=o.realHeight,r=ur),e||(e=r),this.renderer.framebuffer.bind(o.framebuffer,r),this.renderer.projection.update(r,e,i,!1),this.renderer.mask.setMaskStack(o.maskStack)}else i=this.renderer.resolution,r||(ur.width=n.width,ur.height=n.height,r=ur),e||(e=r),n.framebuffer.bind(null,r),this.renderer.projection.update(r,e,i,!0),this.renderer.mask.setMaskStack(this.defaultMaskStack);this.sourceFrame.copyFrom(e),this.destinationFrame.x=r.x/i,this.destinationFrame.y=r.y/i,this.destinationFrame.width=r.width/i,this.destinationFrame.height=r.height/i,e===r&&this.sourceFrame.copyFrom(this.destinationFrame)},e.prototype.clear=function(t){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(Ht),lr=function(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}};lr.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null};var pr=0,fr=function(t){function e(e){t.call(this,e),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=pr++}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Ue)return Ue;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Ue=!0===t({a:"b"},"a","b")}catch(t){Ue=!1}return Ue}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||this.syncUniformGroup(t.uniformGroup),i},e.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t){var e=this.getglProgram();t.static&&t.dirtyId===e.uniformGroups[t.id]||(e.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,e))},e.prototype.syncUniforms=function(t,e){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var r=0,i="var v = null;\n    var cv = null\n    var gl = renderer.gl";for(var n in t.uniforms){var o=e[n];if(o)if("float"===o.type&&1===o.size)i+="\n            if(uv."+n+" !== ud."+n+".value)\n            {\n                ud."+n+".value = uv."+n+"\n                gl.uniform1f(ud."+n+".location, uv."+n+")\n            }\n";else if("sampler2D"!==o.type&&"samplerCube"!==o.type&&"sampler2DArray"!==o.type||1!==o.size||o.isArray)if("mat3"===o.type&&1===o.size)void 0!==t.uniforms[n].a?i+="\n                gl.uniformMatrix3fv(ud."+n+".location, false, uv."+n+".toArray(true));\n                \n":i+="\n                gl.uniformMatrix3fv(ud."+n+".location, false, uv."+n+");\n                \n";else if("vec2"===o.type&&1===o.size)void 0!==t.uniforms[n].x?i+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+n+".location, v.x, v.y);\n                }\n":i+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+n+".location, v[0], v[1]);\n                }\n                \n";else if("vec4"===o.type&&1===o.size)void 0!==t.uniforms[n].width?i+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+n+".location, v.x, v.y, v.width, v.height)\n                }\n":i+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+n+".location, v[0], v[1], v[2], v[3])\n                }\n                \n";else{i+="\n            cv = ud."+n+".value;\n            v = uv."+n+";\n            "+(1===o.size?je:Be)[o.type].replace("location","ud."+n+".location")+";\n"}else i+="\n            renderer.texture.bind(uv."+n+", "+r+");\n\n            if(ud."+n+".value !== "+r+")\n            {\n                ud."+n+".value = "+r+";\n                gl.uniform1i(ud."+n+".location, "+r+");\n; // eslint-disable-line max-len\n            }\n",r++;else t.uniforms[n].group&&(i+="\n                    renderer.shader.syncUniformGroup(uv."+n+");\n                ")}return new Function("ud","uv","renderer",i)}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var r=t.uniforms,i=[];for(var n in r)i.push(n),e[n]&&i.push(e[n].type);return i.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(var n in r.attributeData)i[n]=r.attributeData[n].location;var o=Ee(e,r.vertexSrc,r.fragmentSrc,i),s={};for(var a in r.uniformData){var h=r.uniformData[a];s[a]={location:e.getUniformLocation(o,a),value:Oe(h.type,h.size)}}var u=new lr(o,s);return r.glPrograms[this.renderer.CONTEXT_UID]=u,u},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(Ht);var dr=0,vr=1,yr=2,gr=3,mr=4,_r=function(t){function e(e){t.call(this,e),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=a.NONE,this._blendEq=!1,this.map=[],this.map[dr]=this.setBlend,this.map[vr]=this.setOffset,this.map[yr]=this.setCullFace,this.map[gr]=this.setDepthTest,this.map[mr]=this.setFrontFace,this.checks=[],this.defaultState=new Ke,this.defaultState.blend=!0,this.defaultState.depth=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[a.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.ADD]=[t.ONE,t.ONE],e[a.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.NONE]=[0,0],e[a.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[a.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[a.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[a.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[a.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[a.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[a.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[a.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[a.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[a.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var r=0;r<this.checks.length;r++)this.checks[r](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(e.polygonOffset,0)},e}(Ht),br=function(t){function e(e){t.call(this,e),this.count=0,this.checkCount=0,this.maxIdle=_.GC_MAX_IDLE,this.checkCountMax=_.GC_MAX_CHECK_COUNT,this.mode=_.GC_MODE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==y.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[i]=null,r=!0)}if(r){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},e.prototype.unload=function(t){var e=this.renderer.textureSystem;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},e}(Ht),xr=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},wr=function(t){function e(e){t.call(this,e),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new kt}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new xr(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new xr(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var o=0;o<this.boundTextures.length;o++)this.bind(null,o)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var r=this.gl;if(t){if((t=t.baseTexture||t).valid){t.touched=this.renderer.textureGC.count;var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(var n=0;n<r.length;n++)r[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[t.target].texture),r[n]=null)},e.prototype.initTexture=function(t){var e=new xr(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var r=this.renderer.gl;t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===l.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var r=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(r,t,e));else{var i=t.realWidth,n=t.realHeight,o=r.gl;(e.width!==i||e.height!==n||e.dirtyId<0)&&(e.width=i,e.height=n,o.texImage2D(t.target,0,e.internalFormat,i,n,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var r=this.gl;if((t=t.baseTexture||t)._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var i=this.managedTextures.indexOf(t);-1!==i&&L(this.managedTextures,i,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==d.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=0,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=f.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var r=this.gl;if(e.mipmap&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===p.LINEAR){var n=Math.min(t.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode?r.LINEAR:r.NEAREST)},e}(Ht),Tr=new it,Er=function(t){function e(r){void 0===r&&(r={}),t.call(this,"WebGL",r),r=this.options,this.type=s.WEBGL,this.gl=null,this.CONTEXT_UID=0,this.runners={destroy:new Et("destroy"),contextChange:new Et("contextChange",1),reset:new Et("reset"),update:new Et("update"),postrender:new Et("postrender"),prerender:new Et("prerender"),resize:new Et("resize",2)},this.globalUniforms=new pe({projectionMatrix:new it},!0),this.addSystem(nr,"mask").addSystem(me,"context").addSystem(_r,"state").addSystem(fr,"shader").addSystem(wr,"texture").addSystem(we,"geometry").addSystem(_e,"framebuffer").addSystem(sr,"scissor").addSystem(ar,"stencil").addSystem(hr,"projection").addSystem(br,"textureGC").addSystem(de,"filter").addSystem(cr,"renderTexture").addSystem(ye,"batch"),this.initPlugins(e.__plugins),r.context?this.context.initFromContext(r.context):this.context.initFromOptions({alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:this.options.powerPreference}),this.renderingToScreen=!0,function(t){if(!I){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+A+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+A+" - "+t+" - http://www.pixijs.com/");I=!0}}(2===this.context.webGLVersion?"WebGL 2":"WebGL 1"),this.resize(this.options.width,this.options.height)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t){if(void 0===O&&(O=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:_.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!r||!r.getContextAttributes().stencil);if(r){var n=r.getExtension("WEBGL_lose_context");n&&n.loseContext()}return r=null,i}catch(t){return!1}}()),O)return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var r=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var i in this[e]=r,this.runners)this.runners[i].add(r);return this},e.prototype.render=function(t,e,r,i,n){if(this.renderingToScreen=!e,this.runners.prerender.run(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(e||(this._lastObjectRendered=t),!n){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.run(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,r){t.prototype.resize.call(this,e,r),this.runners.resize.run(e,r)},e.prototype.reset=function(){return this.runners.reset.run(),this},e.prototype.clear=function(){this.framebuffer.bind(),this.framebuffer.clear()},e.prototype.destroy=function(e){for(var r in this.runners.destroy.run(),this.runners)this.runners[r].destroy();t.prototype.destroy.call(this,e),this.gl=null},e.registerPlugin=function(t,r){e.__plugins=e.__plugins||{},e.__plugins[t]=r},e}(function(t){function e(e,r){t.call(this),(r=Object.assign({},_.RENDER_OPTIONS,r)).roundPixels&&(_.ROUND_PIXELS=r.roundPixels,Z("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),this.options=r,this.type=s.UNKNOWN,this.screen=new ft(0,0,r.width,r.height),this.view=r.view||document.createElement("canvas"),this.resolution=r.resolution||_.RESOLUTION,this.transparent=r.transparent,this.autoDensity=r.autoDensity||r.autoResize||!1,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=r.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new xt,this._lastObjectRendered=this._tempDisplayObjectParent,this.plugins={}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={width:{configurable:!0},height:{configurable:!0},backgroundColor:{configurable:!0}};return e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},r.width.get=function(){return this.view.width},r.height.get=function(){return this.view.height},e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds()).width&&(i.width=1),0===i.height&&(i.height=1);var n=Jt.create(0|i.width,0|i.height,e,r);return Tr.tx=-i.x,Tr.ty=-i.y,this.render(t,n,!1,Tr,!!t.parent),n},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=s.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoDensity=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},r.backgroundColor.get=function(){return this._backgroundColor},r.backgroundColor.set=function(t){this._backgroundColor=t,this._backgroundColorString=C(t),P(t,this._backgroundColorRgba)},Object.defineProperties(e.prototype,r),e}(x.a));var Sr="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",Or=function(){this.texArray=null,this.blend=0,this.type=h.TRIANGLES,this.start=0,this.size=0,this.data=null},Ir=function(){this.elements=[],this.ids=[],this.count=0};Ir.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0};var Ar=function(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)},Pr={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};Pr.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},Pr.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},Pr.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},Pr.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},Pr.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},Ar.prototype.view=function(t){return this[t+"View"]},Ar.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},Ar.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Object.defineProperties(Ar.prototype,Pr);var Cr=function(t){function e(e){t.call(this,e),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=Ke.for2d(),this.size=4*_.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){var t=this.renderer.gl;_.PREFER_ENV===o.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),_.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=Ge.replace(/%forloop%/gi,ze(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,r=e._textureArrayPool,i=this.size/4,n=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new Or);for(;r.length<n;)r.push(new Ir);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,r=this.MAX_TEXTURES,i=e._textureArrayPool,n=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++kt._globalBatch,h=0,u=i[0],c=0;n.copyBoundTextures(o,r);for(var l=0;l<this._bufferSize;++l){var p=t[l];t[l]=null,p._batchEnabled!==a&&(u.count>=r&&(n.boundArray(u,o,a,r),this.buildDrawCalls(u,c,l),c=l,u=i[++h],++a),p._batchEnabled=a,p.touched=s,u.elements[u.count++]=p)}u.count>0&&(n.boundArray(u,o,a,r),this.buildDrawCalls(u,c,this._bufferSize),++h,++a);for(var f=0;f<o.length;f++)o[f]=null;kt._globalBatch=a},e.prototype.buildDrawCalls=function(t,r,i){var n=this._bufferedElements,o=this._attributeBuffer,s=this._indexBuffer,a=this.vertexSize,h=e._drawCallPool,u=this._dcIndex,c=this._aIndex,l=this._iIndex,p=h[u];p.start=this._iIndex,p.texArray=t;for(var f=r;f<i;++f){var d=n[f],v=d._texture.baseTexture,y=M[v.alphaMode?1:0][d.blendMode];n[f]=null,r<f&&p.blend!==y&&(p.size=l-p.start,r=f,(p=h[++u]).texArray=t,p.start=l),this.packInterleavedGeometry(d,o,s,c,l),c+=d.vertexData.length/2*a,l+=d.indices.length,p.blend=y}r<i&&(p.size=l-p.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=l},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,r=this._indexBuffer;_.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,r=this.renderer,i=r.gl,n=r.state,o=e._drawCallPool,s=null,a=0;a<t;a++){var h=o[a],u=h.texArray,c=h.type,l=h.size,p=h.start,f=h.blend;s!==u&&(s=u,this.bindAndClearTexArray(u)),n.setBlendMode(f),i.drawElements(c,l,i.UNSIGNED_SHORT,2*p)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),_.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=B(Math.ceil(t/8)),r=G(e),i=8*e;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);var n=this._aBuffers[i];return n||(this._aBuffers[i]=n=new Ar(i*this.vertexSize*4)),n},e.prototype.getIndexBuffer=function(t){var e=B(Math.ceil(t/12)),r=G(e),i=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);var n=this._iBuffers[r];return n||(this._iBuffers[r]=n=new Uint16Array(i)),n},e.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var o=e.uint32View,s=e.float32View,a=i/this.vertexSize,h=t.uvs,u=t.indices,c=t.vertexData,l=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),f=p<1&&t._texture.baseTexture.alphaMode?R(t._tintRGB,p):t._tintRGB+(255*p<<24),d=0;d<c.length;d+=2)s[i++]=c[d],s[i++]=c[d+1],s[i++]=h[d],s[i++]=h[d+1],o[i++]=f,s[i++]=l;for(var v=0;v<u.length;v++)r[n++]=a+u[v]},e}(ve);Cr._drawCallPool=[],Cr._textureArrayPool=[];var Mr=function(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')};Mr.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=pe.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Ve(this.vertexSrc,i)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new it,default:this.defaultGroupCache[t]};return new We(this.programCache[t],n)},Mr.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"};var Dr=function(t){function e(e){void 0===e&&(e=!1),t.call(this),this._buffer=new re(null,e,!1),this._indexBuffer=new re(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,l.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,l.FLOAT).addAttribute("aColor",this._buffer,4,!0,l.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,l.FLOAT).addIndex(this._indexBuffer)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(he),Rr="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Nr="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Lr=function(){},kr={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};Lr.create=function(t){var e=Object.assign({vertex:Rr,fragment:Nr,geometryClass:Dr,vertexSize:6},t),r=e.vertex,i=e.fragment,n=e.vertexSize,o=e.geometryClass;return function(t){function e(e){t.call(this,e),this.shaderGenerator=new Mr(r,i),this.geometryClass=o,this.vertexSize=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Cr)},kr.defaultVertexSrc.get=function(){return Rr},kr.defaultFragmentTemplate.get=function(){return Nr},Object.defineProperties(Lr,kr);var Fr=Lr.create(),jr=new ft,Br=function(t){this.renderer=t,t.extract=this};
/*!
 * @pixi/extract - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Br.prototype.image=function(t,e,r){var i=new Image;return i.src=this.base64(t,e,r),i},Br.prototype.base64=function(t,e,r){return this.canvas(t).toDataURL(e,r)},Br.prototype.canvas=function(t){var e,r,i,n=this.renderer,o=!1,s=!1;t&&(t instanceof Jt?i=t:(i=this.renderer.generateTexture(t),s=!0)),i?(e=i.baseTexture.resolution,r=i.frame,o=!1,n.renderTexture.bind(i)):(e=this.renderer.resolution,o=!0,(r=jr).width=this.renderer.width,r.height=this.renderer.height,n.renderTexture.bind(null));var a=Math.floor(r.width*e+1e-4),h=Math.floor(r.height*e+1e-4),u=new V(a,h,1),c=new Uint8Array(4*a*h),l=n.gl;l.readPixels(r.x*e,r.y*e,a,h,l.RGBA,l.UNSIGNED_BYTE,c);var p=u.context.getImageData(0,0,a,h);return Br.arrayPostDivide(c,p.data),u.context.putImageData(p,0,0),o&&(u.context.scale(1,-1),u.context.drawImage(u.canvas,0,-h)),s&&i.destroy(!0),u.canvas},Br.prototype.pixels=function(t){var e,r,i,n=this.renderer,o=!1;t&&(t instanceof Jt?i=t:(i=this.renderer.generateTexture(t),o=!0)),i?(e=i.baseTexture.resolution,r=i.frame,n.renderTexture.bind(i)):(e=n.resolution,(r=jr).width=n.width,r.height=n.height,n.renderTexture.bind(null));var s=r.width*e,a=r.height*e,h=new Uint8Array(4*s*a),u=n.gl;return u.readPixels(r.x*e,r.y*e,s,a,u.RGBA,u.UNSIGNED_BYTE,h),o&&i.destroy(!0),Br.arrayPostDivide(h,h),h},Br.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},Br.arrayPostDivide=function(t,e){for(var r=0;r<t.length;r+=4){var i=e[r+3]=t[r+3];0!==i?(e[r]=Math.round(Math.min(255*t[r]/i,255)),e[r+1]=Math.round(Math.min(255*t[r+1]/i,255)),e[r+2]=Math.round(Math.min(255*t[r+2]/i,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}};
/*!
 * @pixi/interaction - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Ur=function(){this.global=new J,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0},Gr={pointerId:{configurable:!0}};Gr.pointerId.get=function(){return this.identifier},Ur.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},Ur.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},Ur.prototype.reset=function(){this.isPrimary=!1},Object.defineProperties(Ur.prototype,Gr);var zr=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null};zr.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},zr.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null};var Hr=function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE},Xr={pointerId:{configurable:!0},flags:{configurable:!0},none:{configurable:!0},over:{configurable:!0},rightDown:{configurable:!0},leftDown:{configurable:!0}};Hr.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Xr.pointerId.get=function(){return this._pointerId},Xr.flags.get=function(){return this._flags},Xr.flags.set=function(t){this._flags=t},Xr.none.get=function(){return this._flags===this.constructor.FLAGS.NONE},Xr.over.get=function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},Xr.over.set=function(t){this._doSet(this.constructor.FLAGS.OVER,t)},Xr.rightDown.get=function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},Xr.rightDown.set=function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)},Xr.leftDown.get=function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},Xr.leftDown.set=function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)},Object.defineProperties(Hr.prototype,Xr),Hr.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});var Vr=function(){this._tempPoint=new J};Vr.prototype.recursiveFindHit=function(t,e,r,i,n){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=n=e.interactive||n,h=!0;if(e.hitArea?(i&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(i=!1,h=!1)),a=!1):e._mask&&i&&(e._mask.containsPoint&&e._mask.containsPoint(o)||(i=!1)),h&&e.interactiveChildren&&e.children)for(var u=e.children,c=u.length-1;c>=0;c--){var l=u[c],p=this.recursiveFindHit(t,l,r,i,a);if(p){if(!l.parent)continue;a=!1,p&&(t.target&&(i=!1),s=!0)}}return n&&(i&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),r&&r(t,e,!!s))),s},Vr.prototype.findHit=function(t,e,r,i){this.recursiveFindHit(t,e,r,i,!1)};var Yr={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};_t.mixin(Yr);var Wr=1,qr={target:null,data:{global:null}},Kr=function(t){function e(e,r){t.call(this),r=r||{},this.renderer=e,this.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,this.interactionFrequency=r.interactionFrequency||10,this.mouse=new Ur,this.mouse.identifier=Wr,this.mouse.global.set(-999999),this.activeInteractionData={},this.activeInteractionData[Wr]=this.mouse,this.interactionDataPool=[],this.eventData=new zr,this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.mouseOverRenderer=!1,this.supportsTouchEvents="ontouchstart"in window,this.supportsPointerEvents=!!window.PointerEvent,this.onPointerUp=this.onPointerUp.bind(this),this.processPointerUp=this.processPointerUp.bind(this),this.onPointerCancel=this.onPointerCancel.bind(this),this.processPointerCancel=this.processPointerCancel.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.processPointerDown=this.processPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.processPointerMove=this.processPointerMove.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.processPointerOverOut=this.processPointerOverOut.bind(this),this.onPointerOver=this.onPointerOver.bind(this),this.cursorStyles={default:"inherit",pointer:"pointer"},this.currentCursorMode=null,this.cursor=null,this.resolution=1,this.delayedEvents=[],this.search=new Vr,this.setTargetElement(this.renderer.view,this.renderer.resolution)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hitTest=function(t,e){return qr.target=null,qr.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(qr,e,null,!0),qr.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(Ot.system.add(this.update,this,Tt.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(Ot.system.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var r=this.activeInteractionData[e];if(r.originalEvent&&"touch"!==r.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,r){r.stopPropagationHint&&t!==r.stopsPropagatingAt||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},e.prototype.delayDispatchEvent=function(t,e,r){this.delayedEvents.push({displayObject:t,eventString:e,eventData:r})},e.prototype.mapPositionToPoint=function(t,e,r){var i;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=1/this.resolution;t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)*n,t.y=(r-i.top)*(this.interactionDOMElement.height/i.height)*n},e.prototype.processInteractive=function(t,e,r,i){var n=this.search.findHit(t,e,r,i),o=this.delayedEvents;if(!o.length)return n;t.stopPropagationHint=!1;var s=o.length;this.delayedEvents=[];for(var a=0;a<s;a++){var h=o[a],u=h.displayObject,c=h.eventString,l=h.eventData;l.stopsPropagatingAt===u&&(l.stopPropagationHint=!0),this.dispatchEvent(u,c,l)}return n},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var r=e.length,i=0;i<r;i++){var n=e[i],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===n.pointerType)this.emit("touchstart",s);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,r){var i=t.data,n=t.data.identifier;if(r)if(e.trackedPointers[n]||(e.trackedPointers[n]=new Hr(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===i.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===i.pointerType||"pen"===i.pointerType){var o=2===i.button;o?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,r){for(var i=this.normalizeToPointerData(t),n=i.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var a=i[s],h=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(u.data.originalEvent=t,this.processInteractive(u,this.renderer._lastObjectRendered,r,e||!o),this.emit(e?"pointercancel":"pointerup"+o,u),"mouse"===a.pointerType||"pen"===a.pointerType){var c=2===a.button;this.emit(c?"rightup"+o:"mouseup"+o,u)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,u),this.releaseInteractionDataForPointerId(a.pointerId,h))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var r=t.data,i=t.data.identifier;void 0!==e.trackedPointers[i]&&(delete e.trackedPointers[i],this.dispatchEvent(e,"pointercancel",t),"touch"===r.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,r){var i=t.data,n=t.data.identifier,o=e.trackedPointers[n],s="touch"===i.pointerType,a="mouse"===i.pointerType||"pen"===i.pointerType,h=!1;if(a){var u=2===i.button,c=Hr.FLAGS,l=u?c.RIGHT_DOWN:c.LEFT_DOWN,p=void 0!==o&&o.flags&l;r?(this.dispatchEvent(e,u?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,u?"rightclick":"click",t),h=!0)):p&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),o&&(u?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!h||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[n]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var r=e.length,i=0;i<r;i++){var n=e[i],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===n.pointerType&&this.emit("touchmove",s),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,r){var i=t.data,n="touch"===i.pointerType,o="mouse"===i.pointerType||"pen"===i.pointerType;o&&this.processPointerOverOut(t,e,r),this.moveWhenInside&&!r||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,r);i.data.originalEvent=e,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(r.identifier)}},e.prototype.processPointerOverOut=function(t,e,r){var i=t.data,n=t.data.identifier,o="mouse"===i.pointerType||"pen"===i.pointerType,s=e.trackedPointers[n];r&&!s&&(s=e.trackedPointers[n]=new Hr(n)),void 0!==s&&(r&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[n]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],r=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,r);i.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",i)},e.prototype.getInteractionDataForPointerId=function(t){var e,r=t.pointerId;return r===Wr||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[r]?e=this.activeInteractionData[r]:((e=this.interactionDataPool.pop()||new Ur).identifier=r,this.activeInteractionData[r]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,r){return t.data=r,this.mapPositionToPoint(r.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=r.global.x,e.globalY=r.global.y),r.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,i=t.changedTouches.length;r<i;r++){var n=t.changedTouches[r];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=Wr),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(x.a),Zr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive)return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},$r=function(){this.reset()};$r.prototype.clone=function(){var t=new $r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},$r.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Zt.WHITE,this.matrix=null,this.visible=!1},$r.prototype.destroy=function(){this.texture=null,this.matrix=null};var Jr={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,i=t.holes,n=e.points,o=e.indices;if(r.length>=6){for(var s=[],a=0;a<i.length;a++){var h=i[a];s.push(r.length/2),r=r.concat(h.points)}var u=T()(r,s,2);if(!u)return;for(var c=n.length/2,l=0;l<u.length;l+=3)o.push(u[l]+c),o.push(u[l+1]+c),o.push(u[l+2]+c);for(var p=0;p<r.length;p++)n.push(r[p])}}},Qr={build:function(t){var e,r,i=t.shape,n=t.points,o=i.x,s=i.y;if(n.length=0,t.type===$.CIRC?(e=i.radius,r=i.radius):(e=i.width,r=i.height),0!==e&&0!==r){var a=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(i.width+i.height));a/=2.3;for(var h=2*Math.PI/a,u=0;u<a;u++)n.push(o+Math.sin(-h*u)*e,s+Math.cos(-h*u)*r);n.push(n[0],n[1])}},triangulate:function(t,e){var r=t.points,i=e.points,n=e.indices,o=i.length/2,s=o;i.push(t.shape.x,t.shape.y);for(var a=0;a<r.length;a+=2)i.push(r[a],r[a+1]),n.push(o++,s,o)}},ti={build:function(t){var e=t.shape,r=e.x,i=e.y,n=e.width,o=e.height,s=t.points;s.length=0,s.push(r,i,r+n,i,r+n,i+o,r,i+o)},triangulate:function(t,e){var r=t.points,i=e.points,n=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},ei={build:function(t){var e=t.shape,r=t.points,i=e.x,n=e.y,o=e.width,s=e.height,a=e.radius;r.length=0,ii(i,n+a,i,n,i+a,n,r),ii(i+o-a,n,i+o,n,i+o,n+a,r),ii(i+o,n+s-a,i+o,n+s,i+o-a,n+s,r),ii(i+a,n+s,i,n+s,i,n+s-a,r)},triangulate:function(t,e){for(var r=t.points,i=e.points,n=e.indices,o=i.length/2,s=T()(r,null,2),a=0,h=s.length;a<h;a+=3)n.push(s[a]+o),n.push(s[a+1]+o),n.push(s[a+2]+o);for(var u=0,c=r.length;u<c;u++)i.push(r[u],r[++u])}};function ri(t,e,r){return t+(e-t)*r}function ii(t,e,r,i,n,o,s){void 0===s&&(s=[]);for(var a=s,h=0,u=0,c=0,l=0,p=0,f=0,d=0,v=0;d<=20;++d)h=ri(t,r,v=d/20),u=ri(e,i,v),c=ri(r,n,v),l=ri(i,o,v),p=ri(h,c,v),f=ri(u,l,v),a.push(p,f);return a}function ni(t,e){t.lineStyle.native?function(t,e){var r=0,i=t.shape,n=t.points||i.points,o=i.type!==$.POLY||i.closeStroke;if(0===n.length)return;var s=e.points,a=e.indices,h=n.length/2,u=s.length/2,c=u;for(s.push(n[0],n[1]),r=1;r<h;r++)s.push(n[2*r],n[2*r+1]),a.push(c,c+1),c++;o&&a.push(c,u)}(t,e):function(t,e){var r=t.shape,i=t.points||r.points.slice(),n=e.closePointEps;if(0===i.length)return;var o=t.lineStyle,s=new J(i[0],i[1]),a=new J(i[i.length-2],i[i.length-1]),h=r.type!==$.POLY||r.closeStroke,u=Math.abs(s.x-a.x)<n&&Math.abs(s.y-a.y)<n;if(h){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));var c=a.x+.5*(s.x-a.x),l=a.y+.5*(s.y-a.y);i.unshift(c,l),i.push(c,l)}var p=e.points,f=i.length/2,d=i.length,v=p.length/2,y=o.width/2,g=i[0],m=i[1],_=i[2],b=i[3],x=0,w=0,T=-(m-b),E=g-_,S=0,O=0,I=0,A=0,P=Math.sqrt(T*T+E*E);T/=P,E/=P,T*=y,E*=y;var C=o.alignment,M=2*(1-C),D=2*C;p.push(g-T*M,m-E*M),p.push(g+T*D,m+E*D);for(var R=1;R<f-1;++R){g=i[2*(R-1)],m=i[2*(R-1)+1],_=i[2*R],b=i[2*R+1],x=i[2*(R+1)],w=i[2*(R+1)+1],T=-(m-b),E=g-_,P=Math.sqrt(T*T+E*E),T/=P,E/=P,T*=y,E*=y,S=-(b-w),O=_-x,P=Math.sqrt(S*S+O*O),S/=P,O/=P;var N=-E+m-(-E+b),L=-T+_-(-T+g),k=(-T+g)*(-E+b)-(-T+_)*(-E+m),F=-(O*=y)+w-(-O+b),j=-(S*=y)+_-(-S+x),B=(-S+x)*(-O+b)-(-S+_)*(-O+w),U=N*j-F*L;if(Math.abs(U)<.1)U+=10.1,p.push(_-T*M,b-E*M),p.push(_+T*D,b+E*D);else{var G=(L*B-j*k)/U,z=(F*k-N*B)/U;(G-_)*(G-_)+(z-b)*(z-b)>196*y*y?(I=T-S,A=E-O,P=Math.sqrt(I*I+A*A),I/=P,A/=P,I*=y,A*=y,p.push(_-I*M,b-A*M),p.push(_+I*D,b+A*D),p.push(_-I*D*M,b-A*M),d++):(p.push(_+(G-_)*M,b+(z-b)*M),p.push(_-(G-_)*D,b-(z-b)*D))}}g=i[2*(f-2)],m=i[2*(f-2)+1],_=i[2*(f-1)],b=i[2*(f-1)+1],T=-(m-b),E=g-_,P=Math.sqrt(T*T+E*E),T/=P,E/=P,T*=y,E*=y,p.push(_-T*M,b-E*M),p.push(_+T*D,b+E*D);for(var H=e.indices,X=0;X<d-2;++X)H.push(v,v+1,v+2),v++}(t,e)}var oi=function(t){function e(e,r,i,n,o,s){o=o||n/2;for(var a=-1*Math.PI/2+s,h=2*i,u=tt/h,c=[],l=0;l<h;l++){var p=l%2?o:n,f=l*u+a;c.push(e+p*Math.cos(f),r+p*Math.sin(f))}t.call(this,c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(yt),si=function(){};si.curveTo=function(t,e,r,i,n,o){var s=o[o.length-2],a=o[o.length-1]-e,h=s-t,u=i-e,c=r-t,l=Math.abs(a*c-h*u);if(l<1e-8||0===n)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var p=a*a+h*h,f=u*u+c*c,d=a*u+h*c,v=n*Math.sqrt(p)/l,y=n*Math.sqrt(f)/l,g=v*d/p,m=y*d/f,_=v*c+y*h,b=v*u+y*a,x=h*(y+g),w=a*(y+g),T=c*(v+m),E=u*(v+m);return{cx:_+t,cy:b+e,radius:n,startAngle:Math.atan2(w-b,x-_),endAngle:Math.atan2(E-b,T-_),anticlockwise:h*u>c*a}},si.arc=function(t,e,r,i,n,o,s,a,h){for(var u=s-o,c=Zr._segmentsCount(Math.abs(u)*n,40*Math.ceil(Math.abs(u)/tt)),l=u/(2*c),p=2*l,f=Math.cos(l),d=Math.sin(l),v=c-1,y=v%1/v,g=0;g<=v;++g){var m=l+o+p*(g+y*g),_=Math.cos(m),b=-Math.sin(m);h.push((f*_+d*b)*n+r,(f*-b+d*_)*n+i)}};var ai=function(){};ai.curveLength=function(t,e,r,i,n,o,s,a){for(var h=0,u=0,c=0,l=0,p=0,f=0,d=0,v=0,y=0,g=0,m=0,_=t,b=e,x=1;x<=10;++x)g=_-(v=(d=(f=(p=1-(u=x/10))*p)*p)*t+3*f*u*r+3*p*(c=u*u)*n+(l=c*u)*s),m=b-(y=d*e+3*f*u*i+3*p*c*o+l*a),_=v,b=y,h+=Math.sqrt(g*g+m*m);return h},ai.curveTo=function(t,e,r,i,n,o,s){var a=s[s.length-2],h=s[s.length-1];s.length-=2;var u=Zr._segmentsCount(ai.curveLength(a,h,t,e,r,i,n,o)),c=0,l=0,p=0,f=0,d=0;s.push(a,h);for(var v=1,y=0;v<=u;++v)p=(l=(c=1-(y=v/u))*c)*c,d=(f=y*y)*y,s.push(p*a+3*l*y*t+3*c*f*r+d*n,p*h+3*l*y*e+3*c*f*i+d*o)};var hi=function(){};hi.curveLength=function(t,e,r,i,n,o){var s=t-2*r+n,a=e-2*i+o,h=2*r-2*t,u=2*i-2*e,c=4*(s*s+a*a),l=4*(s*h+a*u),p=h*h+u*u,f=2*Math.sqrt(c+l+p),d=Math.sqrt(c),v=2*c*d,y=2*Math.sqrt(p),g=l/d;return(v*f+d*l*(f-y)+(4*p*c-l*l)*Math.log((2*d+g+f)/(g+y)))/(4*v)},hi.curveTo=function(t,e,r,i,n){for(var o=n[n.length-2],s=n[n.length-1],a=Zr._segmentsCount(hi.curveLength(o,s,t,e,r,i)),h=0,u=0,c=1;c<=a;++c){var l=c/a;h=o+(t-o)*l,u=s+(e-s)*l,n.push(h+(t+(r-t)*l-h)*l,u+(e+(i-e)*l-u)*l)}};var ui=function(){this.reset()};ui.prototype.begin=function(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r},ui.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},ui.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0};var ci={};ci[$.POLY]=Jr,ci[$.CIRC]=Qr,ci[$.ELIP]=Qr,ci[$.RECT]=ti,ci[$.RREC]=ei;var li=[],pi=[],fi=function(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=null),void 0===i&&(i=null),this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=i,this.type=t.type,this.points=[],this.holes=[]};fi.prototype.clone=function(){return new fi(this.shape,this.fillStyle,this.lineStyle,this.matrix)},fi.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null};var di=new J,vi=new mt,yi=function(t){function e(){t.call(this),this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.dirty=0,this.batchDirty=-1,this.cacheDirty=-1,this.clearDirty=0,this.drawCalls=[],this.batches=[],this.shapeIndex=0,this._bounds=new mt,this.boundsDirty=-1,this.boundsPadding=0,this.batchable=!1,this.indicesUint16=null,this.uvsFloat32=null,this.closePointEps=1e-4}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={bounds:{configurable:!0}};return r.bounds.get=function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].textures.length=0,pi.push(this.drawCalls[t]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var r=this.batches[e];r.start=0,r.attribStart=0,r.style=null,li.push(r)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,r,i){var n=new fi(t,e,r,i);return this.graphicsData.push(n),this.dirty++,this},e.prototype.drawHole=function(t,e){if(!this.graphicsData.length)return null;var r=new fi(t,null,null,e),i=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=i.lineStyle,i.holes.push(r),this.dirty++,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,r=0;r<e.length;++r){var i=e[r];if(i.fillStyle.visible&&(i.shape&&(i.matrix?i.matrix.applyInverse(t,di):di.copyFrom(t),i.shape.contains(di.x,di.y)))){var n=!1;if(i.holes)for(var o=0;o<i.holes.length;o++){if(i.holes[o].shape.contains(di.x,di.y)){n=!0;break}}if(!n)return!0}}return!1},e.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,e=this.graphicsData,r=null,i=null;this.batches.length>0&&(i=(r=this.batches[this.batches.length-1]).style);for(var n=this.shapeIndex;n<e.length;n++){this.shapeIndex++;var o=e[n],s=o.fillStyle,a=o.lineStyle;ci[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var h=0;h<2;h++){var u=0===h?s:a;if(u.visible){var c=u.texture.baseTexture,l=this.indices.length,p=this.points.length/2;c.wrapMode=f.REPEAT,r&&!this._compareStyles(i,u)&&(r.end(l,p),r.size>0&&(r=null)),r||((r=li.pop()||new ui).begin(u,l,p),this.batches.push(r),i=u);var d=this.points.length/2;0===h?this.processFill(o):this.processLine(o);var v=this.points.length/2-d;this.addUvs(this.points,t,u.texture,d,v,u.matrix)}}}if(r){var y=this.indices.length,g=this.points.length/2;r.end(y,g),this.indicesUint16=new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var r=this.graphicsData[t],i=r.fillStyle,n=r.lineStyle;if(i&&!i.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,r=t.length;e<r;e++)for(var i=t[e],n=0;n<i.size;n++){var o=i.start+n;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}},e.prototype.isBatchable=function(){for(var t=this.batches,r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++kt._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].textures.length=0,pi.push(this.drawCalls[e]);this.drawCalls.length=0;var r=this.colors,i=this.textureIds,n=pi.pop();n||((n=new Or).textures=new Ir),n.textures.count=0,n.start=0,n.size=0,n.type=h.TRIANGLES;var o=0,s=null,a=0,u=!1,c=h.TRIANGLES,l=0;this.drawCalls.push(n);for(var p=0;p<this.batches.length;p++){var f=this.batches[p],d=f.style,v=d.texture.baseTexture;u!==!!d.native&&(c=(u=!!d.native)?h.LINES:h.TRIANGLES,s=null,o=8,t++),s!==v&&(s=v,v._batchEnabled!==t&&(8===o&&(t++,o=0,n.size>0&&((n=pi.pop())||((n=new Or).textures=new Ir),this.drawCalls.push(n)),n.start=l,n.size=0,n.textures.count=0,n.type=c),v.touched=1,v._batchEnabled=t,v._batchLocation=o,v.wrapMode=10497,n.textures.elements[n.textures.count++]=v,o++)),n.size+=f.size,l+=f.size,a=v._batchLocation,this.addColors(r,d.color,d.alpha,f.attribSize),this.addTextureIds(i,a,f.attribSize)}kt._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,r=this.colors,i=this.textureIds,n=new ArrayBuffer(3*t.length*4),o=new Float32Array(n),s=new Uint32Array(n),a=0,h=0;h<t.length/2;h++)o[a++]=t[2*h],o[a++]=t[2*h+1],o[a++]=e[2*h],o[a++]=e[2*h+1],s[a++]=r[h],o[a++]=i[h];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),Jr.triangulate(t,this)):ci[t.type].triangulate(t,this)},e.prototype.processLine=function(t){ni(t,this);for(var e=0;e<t.holes.length;e++)ni(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var r=t[e];ci[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=vi,r=it.IDENTITY;this._bounds.clear(),e.clear();for(var i=0;i<this.graphicsData.length;i++){var n=this.graphicsData[i],o=n.shape,s=n.type,a=n.lineStyle,h=n.matrix||it.IDENTITY,u=0;if(a&&a.visible){var c=a.alignment;u=a.width,s===$.POLY?u*=.5+Math.abs(.5-c):u*=Math.max(0,c)}r!==h&&(e.isEmpty()||(t.addBoundsMatrix(e,r),e.clear()),r=h),s===$.RECT||s===$.RREC?e.addFramePad(o.x,o.y,o.x+o.width,o.y+o.height,u,u):s===$.CIRC?e.addFramePad(o.x,o.y,o.x,o.y,o.radius+u,o.radius+u):s===$.ELIP?e.addFramePad(o.x,o.y,o.x,o.y,o.width+u,o.height+u):t.addVerticesMatrix(r,o.points,0,o.points.length,u,u)}e.isEmpty()||t.addBoundsMatrix(e,r),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var r=0;r<t.length/2;r++){var i=t[2*r],n=t[2*r+1];t[2*r]=e.a*i+e.c*n+e.tx,t[2*r+1]=e.b*i+e.d*n+e.ty}},e.prototype.addColors=function(t,e,r,i){for(var n=R((e>>16)+(65280&e)+((255&e)<<16),r);i-- >0;)t.push(n)},e.prototype.addTextureIds=function(t,e,r){for(;r-- >0;)t.push(e)},e.prototype.addUvs=function(t,e,r,i,n,o){for(var s=0,a=e.length,h=r.frame;s<n;){var u=t[2*(i+s)],c=t[2*(i+s)+1];if(o){var l=o.a*u+o.c*c+o.tx;c=o.b*u+o.d*c+o.ty,u=l}s++,e.push(u/h.width,c/h.height)}var p=r.baseTexture;(h.width<p.width||h.height<p.height)&&this.adjustUvs(e,r,a,n)},e.prototype.adjustUvs=function(t,e,r,i){for(var n=e.baseTexture,o=r+2*i,s=e.frame,a=s.width/n.width,h=s.height/n.height,u=s.x/s.width,c=s.y/s.height,l=Math.floor(t[r]+1e-6),p=Math.floor(t[r+1]+1e-6),f=r+2;f<o;f+=2)l=Math.min(l,Math.floor(t[f]+1e-6)),p=Math.min(p,Math.floor(t[f+1]+1e-6));u-=l,c-=p;for(var d=r;d<o;d+=2)t[d]=(t[d]+u)*a,t[d+1]=(t[d+1]+c)*h},Object.defineProperties(e.prototype,r),e}(Dr);yi.BATCHABLE_SIZE=100;var gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.width=0,this.alignment=.5,this.native=!1},e}($r),mi=new Float32Array(3),_i={},bi=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.geometry=e||new yi,this.geometry.refCount++,this.shader=null,this.state=Ke.for2d(),this._fillStyle=new $r,this._lineStyle=new gi,this._matrix=null,this._holeMode=!1,this.currentPath=null,this.batches=[],this.batchTint=-1,this.vertexData=null,this._transformID=-1,this.batchDirty=-1,this.pluginName="batch",this.tint=16777215,this.blendMode=a.NORMAL}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={blendMode:{configurable:!0},tint:{configurable:!0},fill:{configurable:!0},line:{configurable:!0}};return e.prototype.clone=function(){return this.finishPoly(),new e(this.geometry)},r.blendMode.set=function(t){this.state.blendMode=t},r.blendMode.get=function(){return this.state.blendMode},r.tint.get=function(){return this._tint},r.tint.set=function(t){this._tint=t},r.fill.get=function(){return this._fillStyle},r.line.get=function(){return this._lineStyle},e.prototype.lineStyle=function(t){if("number"==typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){if("number"==typeof t){Z("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments[0],r=arguments[1],i=arguments[2],n=arguments[3],o=arguments[4],s=arguments[5],a=arguments[6];t={width:e,texture:r,color:i,alpha:n,matrix:o,alignment:s,native:a},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({width:0,texture:Zt.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1},t),this.currentPath&&this.startPoly();var h=t.width>0&&t.alpha>0;return h?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:h},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new yt,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new yt,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var r=this.currentPath.points,i=r[r.length-2],n=r[r.length-1];return i===t&&n===e||r.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,r,i){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),hi.curveTo(t,e,r,i,n),this},e.prototype.bezierCurveTo=function(t,e,r,i,n,o){return this._initCurve(),ai.curveTo(t,e,r,i,n,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,r,i,n){this._initCurve(t,e);var o=this.currentPath.points,s=si.curveTo(t,e,r,i,n,o);if(s){var a=s.cx,h=s.cy,u=s.radius,c=s.startAngle,l=s.endAngle,p=s.anticlockwise;this.arc(a,h,u,c,l,p)}return this},e.prototype.arc=function(t,e,r,i,n,o){if(void 0===o&&(o=!1),i===n)return this;if(!o&&n<=i?n+=tt:o&&i<=n&&(i+=tt),0===n-i)return this;var s=t+Math.cos(i)*r,a=e+Math.sin(i)*r,h=this.geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var c=Math.abs(u[u.length-2]-s),l=Math.abs(u[u.length-1]-a);c<h&&l<h||u.push(s,a)}else this.moveTo(s,a),u=this.currentPath.points;return si.arc(s,a,t,e,r,i,n,o,u),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:Zt.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){if(t instanceof Zt){Z("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments[0],r=arguments[1],i=arguments[2],n=arguments[3];t={texture:e,color:r,alpha:i,matrix:n},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({texture:Zt.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var o=t.alpha>0;return o?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:o},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,r,i){return this.drawShape(new ft(t,e,r,i))},e.prototype.drawRoundedRect=function(t,e,r,i,n){return this.drawShape(new gt(t,e,r,i,n))},e.prototype.drawCircle=function(t,e,r){return this.drawShape(new dt(t,e,r))},e.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new vt(t,e,r,i))},e.prototype.drawPolygon=function(t){var e=arguments,r=t,i=!0;if(r.points&&(i=r.closeStroke,r=r.points),!Array.isArray(r)){r=new Array(arguments.length);for(var n=0;n<r.length;++n)r[n]=e[n]}var o=new yt(r);return o.closeStroke=i,this.drawShape(o),this},e.prototype.drawShape=function(t){return this._holeMode?this.geometry.drawHole(t,this._matrix):this.geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(t,e,r,i,n,o){return void 0===o&&(o=0),this.drawPolygon(new oi(t,e,r,i,n,o))},e.prototype.clear=function(){return this.geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){return 1===this.geometry.graphicsData.length&&this.geometry.graphicsData[0].shape.type===$.RECT&&!this.geometry.graphicsData[0].lineWidth},e.prototype._render=function(t){this.finishPoly();var e=this.geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this.geometry,e=this.blendMode;this.batches=[],this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.vertexData=new Float32Array(t.points);for(var r=0,i=t.batches.length;r<i;r++){var n=t.batches[r],o=n.style.color,s=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),h={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*n.start,n.size),uvs:a,_batchRGB:P(o),_tintRGB:o,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[r]=h}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,r=this.batches.length;e<r;e++){var i=this.batches[e];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),r=this.geometry,i=this.tint,n=this.worldAlpha,o=e.uniforms,s=r.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(i>>16&255)/255*n,o.tint[1]=(i>>8&255)/255*n,o.tint[2]=(255&i)/255*n,o.tint[3]=n,t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(var a=0,h=s.length;a<h;a++)this._renderDrawCallDirect(t,r.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var r=e.textures,i=e.type,n=e.size,o=e.start,s=r.count,a=0;a<s;a++)t.texture.bind(r.elements[a],a);t.geometry.draw(i,n,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,r=this.pluginName;if(!e){if(!_i[r]){for(var i=new Int32Array(16),n=0;n<16;n++)i[n]=n;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new it,default:pe.from({uSamplers:i},!0)},s=t.plugins[r]._shader.program;_i[r]=new We(s,o)}e=_i[r]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this.geometry;if(t.graphicsData.length){var e=t.bounds,r=e.minX,i=e.minY,n=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,r,i,n,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this.geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=P(this.tint,mi),e=0;e<this.batches.length;e++){var r=this.batches[e],i=r._batchRGB,n=(t[0]*i[0]*255<<16)+(t[1]*i[1]*255<<8)+(0|t[2]*i[2]*255);r._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID;for(var t=this.transform.worldTransform,e=t.a,r=t.b,i=t.c,n=t.d,o=t.tx,s=t.ty,a=this.geometry.points,h=this.vertexData,u=0,c=0;c<a.length;c+=2){var l=a[c],p=a[c+1];h[u++]=e*l+i*p+o,h[u++]=n*p+r*l+s}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this.geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},Object.defineProperties(e.prototype,r),e}(xt);bi._TEMP_POINT=new J;
/*!
 * @pixi/sprite - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var xi=new J,wi=new Uint16Array([0,1,2,0,2,3]),Ti=function(t){function e(e){t.call(this),this._anchor=new Q(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=a.NORMAL,this.shader=null,this._cachedTint=16777215,this.uvs=null,this.texture=e||Zt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=wi,this.size=4,this.start=0,this.pluginName="batch",this.isSprite=!0,this._roundPixels=_.ROUND_PIXELS}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={roundPixels:{configurable:!0},width:{configurable:!0},height:{configurable:!0},anchor:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=j(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=j(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,o=e.d,s=e.tx,a=e.ty,h=this.vertexData,u=t.trim,c=t.orig,l=this._anchor,p=0,f=0,d=0,v=0;if(u?(p=(f=u.x-l._x*c.width)+u.width,d=(v=u.y-l._y*c.height)+u.height):(p=(f=-l._x*c.width)+c.width,d=(v=-l._y*c.height)+c.height),h[0]=r*f+n*v+s,h[1]=o*v+i*f+a,h[2]=r*p+n*v+s,h[3]=o*v+i*p+a,h[4]=r*p+n*d+s,h[5]=o*d+i*p+a,h[6]=r*f+n*d+s,h[7]=o*d+i*f+a,this._roundPixels)for(var y=0;y<8;y++)h[y]=Math.round(h[y])}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,o=n.a,s=n.b,a=n.c,h=n.d,u=n.tx,c=n.ty,l=-i._x*r.width,p=l+r.width,f=-i._y*r.height,d=f+r.height;e[0]=o*l+a*f+u,e[1]=h*f+s*l+c,e[2]=o*p+a*f+u,e[3]=h*f+s*p+c,e[4]=o*p+a*d+u,e[5]=h*d+s*p+c,e[6]=o*l+a*d+u,e[7]=h*d+s*l+c},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ft),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,xi);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,n=0;return xi.x>=i&&xi.x<i+e&&(n=-r*this.anchor.y,xi.y>=n&&xi.y<n+r)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var r="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!r)}this._texture=null,this.shader=null},e.from=function(t,r){return new e(t instanceof Zt?t:Zt.from(t,r))},r.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},r.roundPixels.get=function(){return this._roundPixels},r.width.get=function(){return Math.abs(this.scale.x)*this._texture.orig.width},r.width.set=function(t){var e=j(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},r.height.get=function(){return Math.abs(this.scale.y)*this._texture.orig.height},r.height.set=function(t){var e=j(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},r.anchor.get=function(){return this._anchor},r.anchor.set=function(t){this._anchor.copyFrom(t)},r.tint.get=function(){return this._tint},r.tint.set=function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},r.texture.get=function(){return this._texture},r.texture.set=function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Zt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},Object.defineProperties(e.prototype,r),e}(xt),Ei=0,Si={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ei,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Oi=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ii=function(t){this.styleID=0,this.reset(),Mi(this,t,t)},Ai={align:{configurable:!0},breakWords:{configurable:!0},dropShadow:{configurable:!0},dropShadowAlpha:{configurable:!0},dropShadowAngle:{configurable:!0},dropShadowBlur:{configurable:!0},dropShadowColor:{configurable:!0},dropShadowDistance:{configurable:!0},fill:{configurable:!0},fillGradientType:{configurable:!0},fillGradientStops:{configurable:!0},fontFamily:{configurable:!0},fontSize:{configurable:!0},fontStyle:{configurable:!0},fontVariant:{configurable:!0},fontWeight:{configurable:!0},letterSpacing:{configurable:!0},lineHeight:{configurable:!0},leading:{configurable:!0},lineJoin:{configurable:!0},miterLimit:{configurable:!0},padding:{configurable:!0},stroke:{configurable:!0},strokeThickness:{configurable:!0},textBaseline:{configurable:!0},trim:{configurable:!0},whiteSpace:{configurable:!0},wordWrap:{configurable:!0},wordWrapWidth:{configurable:!0}};function Pi(t){return"number"==typeof t?C(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function Ci(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Pi(t[e]);return t}return Pi(t)}function Mi(t,e,r){for(var i in r)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}Ii.prototype.clone=function(){var t={};return Mi(t,this,Si),new Ii(t)},Ii.prototype.reset=function(){Mi(this,Si,Si)},Ai.align.get=function(){return this._align},Ai.align.set=function(t){this._align!==t&&(this._align=t,this.styleID++)},Ai.breakWords.get=function(){return this._breakWords},Ai.breakWords.set=function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},Ai.dropShadow.get=function(){return this._dropShadow},Ai.dropShadow.set=function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},Ai.dropShadowAlpha.get=function(){return this._dropShadowAlpha},Ai.dropShadowAlpha.set=function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},Ai.dropShadowAngle.get=function(){return this._dropShadowAngle},Ai.dropShadowAngle.set=function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},Ai.dropShadowBlur.get=function(){return this._dropShadowBlur},Ai.dropShadowBlur.set=function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},Ai.dropShadowColor.get=function(){return this._dropShadowColor},Ai.dropShadowColor.set=function(t){var e=Ci(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},Ai.dropShadowDistance.get=function(){return this._dropShadowDistance},Ai.dropShadowDistance.set=function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},Ai.fill.get=function(){return this._fill},Ai.fill.set=function(t){var e=Ci(t);this._fill!==e&&(this._fill=e,this.styleID++)},Ai.fillGradientType.get=function(){return this._fillGradientType},Ai.fillGradientType.set=function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},Ai.fillGradientStops.get=function(){return this._fillGradientStops},Ai.fillGradientStops.set=function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},Ai.fontFamily.get=function(){return this._fontFamily},Ai.fontFamily.set=function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},Ai.fontSize.get=function(){return this._fontSize},Ai.fontSize.set=function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},Ai.fontStyle.get=function(){return this._fontStyle},Ai.fontStyle.set=function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},Ai.fontVariant.get=function(){return this._fontVariant},Ai.fontVariant.set=function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},Ai.fontWeight.get=function(){return this._fontWeight},Ai.fontWeight.set=function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},Ai.letterSpacing.get=function(){return this._letterSpacing},Ai.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},Ai.lineHeight.get=function(){return this._lineHeight},Ai.lineHeight.set=function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},Ai.leading.get=function(){return this._leading},Ai.leading.set=function(t){this._leading!==t&&(this._leading=t,this.styleID++)},Ai.lineJoin.get=function(){return this._lineJoin},Ai.lineJoin.set=function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},Ai.miterLimit.get=function(){return this._miterLimit},Ai.miterLimit.set=function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},Ai.padding.get=function(){return this._padding},Ai.padding.set=function(t){this._padding!==t&&(this._padding=t,this.styleID++)},Ai.stroke.get=function(){return this._stroke},Ai.stroke.set=function(t){var e=Ci(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},Ai.strokeThickness.get=function(){return this._strokeThickness},Ai.strokeThickness.set=function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},Ai.textBaseline.get=function(){return this._textBaseline},Ai.textBaseline.set=function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},Ai.trim.get=function(){return this._trim},Ai.trim.set=function(t){this._trim!==t&&(this._trim=t,this.styleID++)},Ai.whiteSpace.get=function(){return this._whiteSpace},Ai.whiteSpace.set=function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},Ai.wordWrap.get=function(){return this._wordWrap},Ai.wordWrap.set=function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},Ai.wordWrapWidth.get=function(){return this._wordWrapWidth},Ai.wordWrapWidth.set=function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},Ii.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;r>=0;r--){var i=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&Oi.indexOf(i)<0&&(i='"'+i+'"'),e[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},Object.defineProperties(Ii.prototype,Ai);var Di=function(t,e,r,i,n,o,s,a,h){this.text=t,this.style=e,this.width=r,this.height=i,this.lines=n,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=h};Di.measureText=function(t,e,r,i){void 0===i&&(i=Di._canvas),r=null==r?e.wordWrap:r;var n=e.toFontString(),o=Di.measureFont(n);0===o.fontSize&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);var s=i.getContext("2d");s.font=n;for(var a=(r?Di.wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),h=new Array(a.length),u=0,c=0;c<a.length;c++){var l=s.measureText(a[c]).width+(a[c].length-1)*e.letterSpacing;h[c]=l,u=Math.max(u,l)}var p=u+e.strokeThickness;e.dropShadow&&(p+=e.dropShadowDistance);var f=e.lineHeight||o.fontSize+e.strokeThickness,d=Math.max(f,o.fontSize+e.strokeThickness)+(a.length-1)*(f+e.leading);return e.dropShadow&&(d+=e.dropShadowDistance),new Di(t,e,p,d,a,h,f+e.leading,u,o)},Di.wordWrap=function(t,e,r){void 0===r&&(r=Di._canvas);for(var i=r.getContext("2d"),n=0,o="",s="",a={},h=e.letterSpacing,u=e.whiteSpace,c=Di.collapseSpaces(u),l=Di.collapseNewlines(u),p=!c,f=e.wordWrapWidth+h,d=Di.tokenize(t),v=0;v<d.length;v++){var y=d[v];if(Di.isNewline(y)){if(!l){s+=Di.addLine(o),p=!c,o="",n=0;continue}y=" "}if(c){var g=Di.isBreakingSpace(y),m=Di.isBreakingSpace(o[o.length-1]);if(g&&m)continue}var _=Di.getFromCache(y,h,a,i);if(_>f)if(""!==o&&(s+=Di.addLine(o),o="",n=0),Di.canBreakWords(y,e.breakWords))for(var b=y.split(""),x=0;x<b.length;x++){for(var w=b[x],T=1;b[x+T];){var E=b[x+T],S=w[w.length-1];if(Di.canBreakChars(S,E,y,x,e.breakWords))break;w+=E,T++}x+=w.length-1;var O=Di.getFromCache(w,h,a,i);O+n>f&&(s+=Di.addLine(o),p=!1,o="",n=0),o+=w,n+=O}else{o.length>0&&(s+=Di.addLine(o),o="",n=0);var I=v===d.length-1;s+=Di.addLine(y,!I),p=!1,o="",n=0}else _+n>f&&(p=!1,s+=Di.addLine(o),o="",n=0),(o.length>0||!Di.isBreakingSpace(y)||p)&&(o+=y,n+=_)}return s+=Di.addLine(o,!1)},Di.addLine=function(t,e){return void 0===e&&(e=!0),t=Di.trimRight(t),t=e?t+"\n":t},Di.getFromCache=function(t,e,r,i){var n=r[t];if(void 0===n){var o=t.length*e;n=i.measureText(t).width+o,r[t]=n}return n},Di.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},Di.collapseNewlines=function(t){return"normal"===t},Di.trimRight=function(t){if("string"!=typeof t)return"";for(var e=t.length-1;e>=0;e--){var r=t[e];if(!Di.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},Di.isNewline=function(t){return"string"==typeof t&&Di._newlines.indexOf(t.charCodeAt(0))>=0},Di.isBreakingSpace=function(t){return"string"==typeof t&&Di._breakingSpaces.indexOf(t.charCodeAt(0))>=0},Di.tokenize=function(t){var e=[],r="";if("string"!=typeof t)return e;for(var i=0;i<t.length;i++){var n=t[i];Di.isBreakingSpace(n)||Di.isNewline(n)?(""!==r&&(e.push(r),r=""),e.push(n)):r+=n}return""!==r&&e.push(r),e},Di.canBreakWords=function(t,e){return e},Di.canBreakChars=function(t,e,r,i,n){return!0},Di.measureFont=function(t){if(Di._fonts[t])return Di._fonts[t];var e={},r=Di._canvas,i=Di._context;i.font=t;var n=Di.METRICS_STRING+Di.BASELINE_SYMBOL,o=Math.ceil(i.measureText(n).width),s=Math.ceil(i.measureText(Di.BASELINE_SYMBOL).width),a=2*s;s=s*Di.BASELINE_MULTIPLIER|0,r.width=o,r.height=a,i.fillStyle="#f00",i.fillRect(0,0,o,a),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(n,0,s);var h=i.getImageData(0,0,o,a).data,u=h.length,c=4*o,l=0,p=0,f=!1;for(l=0;l<s;++l){for(var d=0;d<c;d+=4)if(255!==h[p+d]){f=!0;break}if(f)break;p+=c}for(e.ascent=s-l,p=u-c,f=!1,l=a;l>s;--l){for(var v=0;v<c;v+=4)if(255!==h[p+v]){f=!0;break}if(f)break;p-=c}return e.descent=l-s,e.fontSize=e.ascent+e.descent,Di._fonts[t]=e,e},Di.clearMetrics=function(t){void 0===t&&(t=""),t?delete Di._fonts[t]:Di._fonts={}};var Ri=function(){try{var t=new OffscreenCanvas(0,0);return t.getContext("2d")?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();Ri.width=Ri.height=10,Di._canvas=Ri,Di._context=Ri.getContext("2d"),Di._fonts={},Di.METRICS_STRING="|q",Di.BASELINE_SYMBOL="M",Di.BASELINE_MULTIPLIER=1.4,Di._newlines=[10,13],Di._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Ni={texture:!0,children:!1,baseTexture:!0},Li=function(t){function e(e,r,i){(i=i||document.createElement("canvas")).width=3,i.height=3;var n=Zt.from(i);n.orig=new ft,n.trim=new ft,t.call(this,n),this.canvas=i,this.context=this.canvas.getContext("2d"),this._resolution=_.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=r,this.localStyleID=-1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={width:{configurable:!0},height:{configurable:!0},style:{configurable:!0},text:{configurable:!0},resolution:{configurable:!0}};return e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,i,n=this.context,o=Di.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,a=o.height,h=o.lines,u=o.lineHeight,c=o.lineWidths,l=o.maxLineWidth,p=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,a)+2*e.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;for(var f,d=e.dropShadow?2:1,v=0;v<d;++v){var y=e.dropShadow&&0===v,g=y?2*a:0,m=g*this.resolution;if(y){n.fillStyle="black",n.strokeStyle="black";var _=e.dropShadowColor,b=P("number"==typeof _?_:("string"==typeof(f=_)&&"#"===f[0]&&(f=f.substr(1)),parseInt(f,16)));n.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+e.dropShadowAlpha+")",n.shadowBlur=e.dropShadowBlur,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+m}else n.fillStyle=this._generateFillStyle(e,h),n.strokeStyle=e.stroke,n.shadowColor=0,n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(var x=0;x<h.length;x++)r=e.strokeThickness/2,i=e.strokeThickness/2+x*u+p.ascent,"right"===e.align?r+=l-c[x]:"center"===e.align&&(r+=(l-c[x])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(h[x],r+e.padding,i+e.padding-g,!0),e.fill&&this.drawLetterSpacing(h[x],r+e.padding,i+e.padding-g)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,r,i){void 0===i&&(i=!1);var n=this._style.letterSpacing;if(0!==n)for(var o=e,s=Array.from?Array.from(t):t.split(""),a=this.context.measureText(t).width,h=0,u=0;u<s.length;++u){var c=s[u];i?this.context.strokeText(c,o,r):this.context.fillText(c,o,r),o+=a-(h=this.context.measureText(t.substring(u+1)).width)+n,a=h}else i?this.context.strokeText(t,e,r):this.context.fillText(t,e,r)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=function(t){var e,r,i,n=t.width,o=t.height,s=t.getContext("2d"),a=s.getImageData(0,0,n,o).data,h=a.length,u={top:null,left:null,right:null,bottom:null},c=null;for(e=0;e<h;e+=4)0!==a[e+3]&&(r=e/4%n,i=~~(e/4/n),null===u.top&&(u.top=i),null===u.left?u.left=r:r<u.left&&(u.left=r),null===u.right?u.right=r+1:u.right<r&&(u.right=r+1),null===u.bottom?u.bottom=i:u.bottom<i&&(u.bottom=i));return null!==u.top&&(n=u.right-u.left,o=u.bottom-u.top+1,c=s.getImageData(u.left,u.top,n,o)),{height:o,width:n,data:c}}(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var r=this._texture,i=this._style,n=i.trim?0:i.padding,o=r.baseTexture;r.trim.width=r._frame.width=Math.ceil(t.width/this._resolution),r.trim.height=r._frame.height=Math.ceil(t.height/this._resolution),r.trim.x=-n,r.trim.y=-n,r.orig.width=r._frame.width-2*n,r.orig.height=r._frame.height-2*n,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(1===t.fill.length)return t.fill[0];var r,i,n,o,s=Math.ceil(this.canvas.width/this._resolution),a=Math.ceil(this.canvas.height/this._resolution),h=t.fill.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var c=h.length+1,l=1;l<c;++l)u.push(l/c);if(h.unshift(t.fill[0]),u.unshift(0),h.push(t.fill[t.fill.length-1]),u.push(1),t.fillGradientType===Ei){r=this.context.createLinearGradient(s/2,0,s/2,a),i=(h.length+1)*e.length,n=0;for(var p=0;p<e.length;p++){n+=1;for(var f=0;f<h.length;f++)o="number"==typeof u[f]?u[f]/e.length+p/e.length:n/i,r.addColorStop(o,h[f]),n++}}else{r=this.context.createLinearGradient(0,a/2,s,a/2),i=h.length+1,n=1;for(var d=0;d<h.length;d++)o="number"==typeof u[d]?u[d]:n/i,r.addColorStop(o,h[d]),n++}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},Ni,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},r.width.get=function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},r.width.set=function(t){this.updateText(!0);var e=j(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},r.height.get=function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},r.height.set=function(t){this.updateText(!0);var e=j(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},r.style.get=function(){return this._style},r.style.set=function(t){t=t||{},this._style=t instanceof Ii?t:new Ii(t),this.localStyleID=-1,this.dirty=!0},r.text.get=function(){return this._text},r.text.set=function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},r.resolution.get=function(){return this._resolution},r.resolution.set=function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},Object.defineProperties(e.prototype,r),e}(Ti);
/*!
 * @pixi/prepare - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
_.UPLOADS_PER_FRAME=4;var ki=function(t){this.maxItemsPerFrame=t,this.itemsLeft=0};ki.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},ki.prototype.allowedToUpload=function(){return this.itemsLeft-- >0};var Fi=function(t){var e=this;this.limiter=new ki(_.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Hi),this.registerFindHook(Xi),this.registerFindHook(ji),this.registerFindHook(Bi),this.registerFindHook(Ui),this.registerUploadHook(Gi),this.registerUploadHook(zi)};function ji(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof Zt){var n=t._textures[i].baseTexture;-1===e.indexOf(n)&&(e.push(n),r=!0)}return r}function Bi(t,e){if(t.baseTexture instanceof kt){var r=t.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function Ui(t,e){if(t._texture&&t._texture instanceof Zt){var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function Gi(t,e){return e instanceof Li&&(e.updateText(!0),!0)}function zi(t,e){if(e instanceof Ii){var r=e.toFontString();return Di.measureFont(r),!0}return!1}function Hi(t,e){if(t instanceof Li){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function Xi(t,e){return t instanceof Ii&&(-1===e.indexOf(t)&&e.push(t),!0)}Fi.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,Ot.system.addOnce(this.tick,this,Tt.UTILITY))):e&&e()},Fi.prototype.tick=function(){setTimeout(this.delayedTick,0)},Fi.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)Ot.system.addOnce(this.tick,this,Tt.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);this.completes.length=0;for(var o=0,s=n.length;o<s;o++)n[o]()}},Fi.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},Fi.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},Fi.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof xt)for(var i=t.children.length-1;i>=0;i--)this.add(t.children[i]);return this},Fi.prototype.destroy=function(){this.ticking&&Ot.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null};var Vi=function(t){function e(e){t.call(this,e),this.uploadHookHelper=this.renderer,this.registerFindHook(qi),this.registerUploadHook(Yi),this.registerUploadHook(Wi)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Fi);function Yi(t,e){return e instanceof kt&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function Wi(t,e){if(!(e instanceof bi))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var i=r.batches,n=0;n<i.length;n++){var o=i[n].style.texture;o&&Yi(t,o.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader()),!0}function qi(t,e){return t instanceof bi&&(e.push(t),!0)}var Ki=function(t){this.maxMilliseconds=t,this.frameStart=0};Ki.prototype.beginFrame=function(){this.frameStart=Date.now()},Ki.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};
/*!
 * @pixi/app - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Zi=function t(e){var r=this;e=Object.assign({forceCanvas:!1},e),this.renderer=function(t){return Er.create(t)}(e),this.stage=new xt,t._plugins.forEach((function(t){t.init.call(r,e)}))},$i={view:{configurable:!0},screen:{configurable:!0}};Zi.registerPlugin=function(t){Zi._plugins.push(t)},Zi.prototype.render=function(){this.renderer.render(this.stage)},$i.view.get=function(){return this.renderer.view},$i.screen.get=function(){return this.renderer.screen},Zi.prototype.destroy=function(t,e){var r=this,i=Zi._plugins.slice(0);i.reverse(),i.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},Object.defineProperties(Zi.prototype,$i),Zi._plugins=[];var Ji=function(){};Ji.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.resize),this._resizeTo=t,t&&(window.addEventListener("resize",this.resize),this.resize())},get:function(){return this._resizeTo}}),this.resize=function(){e._resizeTo&&(e._resizeTo===window?e.renderer.resize(window.innerWidth,window.innerHeight):e.renderer.resize(e._resizeTo.clientWidth,e._resizeTo.clientHeight))},this._resizeTo=null,this.resizeTo=t.resizeTo||null},Ji.destroy=function(){this.resizeTo=null,this.resize=null},Zi.registerPlugin(Ji);var Qi=r(8),tn=r.n(Qi),en=r(0),rn=r.n(en);
/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
function nn(){}function on(t,e,r,i){var n=0,o=t.length;!function s(a){a||n===o?r&&r(a):i?setTimeout((function(){e(t[n++],s)}),1):e(t[n++],s)}()}function sn(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function an(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var r=0,i={_tasks:[],concurrency:e,saturated:nn,unsaturated:nn,buffer:e/4,empty:nn,drain:nn,error:nn,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){r=0,i.drain=nn,i.started=!1,i._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!i.paused&&r<i.concurrency&&i._tasks.length;){var e=i._tasks.shift();0===i._tasks.length&&i.empty(),(r+=1)===i.concurrency&&i.saturated(),t(e.data,sn(o(e)))}},length:function(){return i._tasks.length},running:function(){return r},idle:function(){return i._tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var t=1;t<=i.concurrency;t++)i.process()}}};function n(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(i.started=!0,null==t&&i.idle())setTimeout((function(){return i.drain()}),1);else{var n={data:t,callback:"function"==typeof r?r:nn};e?i._tasks.unshift(n):i._tasks.push(n),setTimeout((function(){return i.process()}),1)}}function o(t){return function(){r-=1,t.callback.apply(t,arguments),null!=arguments[0]&&i.error(arguments[0],t.data),r<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}return i}var hn={};function un(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function cn(t,e,r){return e&&un(t.prototype,e),r&&un(t,r),t}var ln=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),pn=null;function fn(){}var dn=function(){function t(e,r,i){if("string"!=typeof e||"string"!=typeof r)throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=fn,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new rn.a,this.onProgress=new rn.a,this.onComplete=new rn.a,this.onAfterMiddleware=new rn.a}t.setExtensionLoadType=function(e,r){vn(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){vn(t._xhrTypeMap,e,r)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var r=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(r)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:ln&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!=(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},e._createSource=function(t,e,r){r||(r=t+"/"+this._getExtension(e));var i=document.createElement("source");return i.src=e,i.type=r,i},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(yn(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(yn(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(yn(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,r="",i=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(r=e.responseText),0===i&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?i=200:1223===i&&(i=204),2===(i/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||r;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,pn||(pn=document.createElement("a")),pn.href=t;var r=!(t=tn()(pn.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var i=t.indexOf("?"),n=t.indexOf("#"),o=Math.min(i>-1?i:t.length,n>-1?n:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},cn(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function vn(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}function yn(t){return t.toString().replace("object ","")}dn.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},dn.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},dn.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},dn.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},dn._loadTypeMap={gif:dn.LOAD_TYPE.IMAGE,png:dn.LOAD_TYPE.IMAGE,bmp:dn.LOAD_TYPE.IMAGE,jpg:dn.LOAD_TYPE.IMAGE,jpeg:dn.LOAD_TYPE.IMAGE,tif:dn.LOAD_TYPE.IMAGE,tiff:dn.LOAD_TYPE.IMAGE,webp:dn.LOAD_TYPE.IMAGE,tga:dn.LOAD_TYPE.IMAGE,svg:dn.LOAD_TYPE.IMAGE,"svg+xml":dn.LOAD_TYPE.IMAGE,mp3:dn.LOAD_TYPE.AUDIO,ogg:dn.LOAD_TYPE.AUDIO,wav:dn.LOAD_TYPE.AUDIO,mp4:dn.LOAD_TYPE.VIDEO,webm:dn.LOAD_TYPE.VIDEO},dn._xhrTypeMap={xhtml:dn.XHR_RESPONSE_TYPE.DOCUMENT,html:dn.XHR_RESPONSE_TYPE.DOCUMENT,htm:dn.XHR_RESPONSE_TYPE.DOCUMENT,xml:dn.XHR_RESPONSE_TYPE.DOCUMENT,tmx:dn.XHR_RESPONSE_TYPE.DOCUMENT,svg:dn.XHR_RESPONSE_TYPE.DOCUMENT,tsx:dn.XHR_RESPONSE_TYPE.DOCUMENT,gif:dn.XHR_RESPONSE_TYPE.BLOB,png:dn.XHR_RESPONSE_TYPE.BLOB,bmp:dn.XHR_RESPONSE_TYPE.BLOB,jpg:dn.XHR_RESPONSE_TYPE.BLOB,jpeg:dn.XHR_RESPONSE_TYPE.BLOB,tif:dn.XHR_RESPONSE_TYPE.BLOB,tiff:dn.XHR_RESPONSE_TYPE.BLOB,webp:dn.XHR_RESPONSE_TYPE.BLOB,tga:dn.XHR_RESPONSE_TYPE.BLOB,json:dn.XHR_RESPONSE_TYPE.JSON,text:dn.XHR_RESPONSE_TYPE.TEXT,txt:dn.XHR_RESPONSE_TYPE.TEXT,ttf:dn.XHR_RESPONSE_TYPE.BUFFER,otf:dn.XHR_RESPONSE_TYPE.BUFFER},dn.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var gn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var mn=window.URL||window.webkitURL;var _n={caching:function(t,e){var r=this;hn[t.url]?(t.data=hn[t.url],t.complete()):t.onComplete.once((function(){return hn[r.url]=r.data})),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===dn.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=mn.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=dn.TYPE.IMAGE,void(t.data.onload=function(){mn.revokeObjectURL(r),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],n=[0,0,0,0],o=0;o<i.length;++o)r<t.length?i[o]=255&t.charCodeAt(r++):i[o]=0;switch(n[0]=i[0]>>2,n[1]=(3&i[0])<<4|i[1]>>4,n[2]=(15&i[1])<<2|i[2]>>6,n[3]=63&i[2],r-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var s=0;s<n.length;++s)e+=gn.charAt(n[s])}return e}(t.xhr.responseText),t.type=dn.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},bn=/(#[\w-]+)?$/,xn=function(){function t(e,r){var i=this;void 0===e&&(e=""),void 0===r&&(r=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return i._loadResource(t,e)},this._queue=an(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new rn.a,this.onError=new rn.a,this.onLoad=new rn.a,this.onStart=new rn.a,this.onComplete=new rn.a;for(var n=0;n<t._defaultBeforeMiddleware.length;++n)this.pre(t._defaultBeforeMiddleware[n]);for(var o=0;o<t._defaultAfterMiddleware.length;++o)this.use(t._defaultAfterMiddleware[o])}var e=t.prototype;return e.add=function(t,e,r,i){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=e||t.callback||t.onComplete,r=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(i=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new dn(t,e,r),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var o=r.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var h=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=h;for(var u=0;u<s.length;++u)s[u].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,r=tn()(t,{strictMode:!0});if(e=r.protocol||!r.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var i=bn.exec(e)[0];-1!==(e=e.substr(0,e.length-i.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=i}return e},e._loadResource=function(t,e){var r=this;t._dequeue=e,on(this._beforeMiddleware,(function(e,i){e.call(r,t,(function(){i(t.isComplete?{}:null)}))}),(function(){t.isComplete?r._onLoad(t):(t._onLoadBinding=t.onComplete.once(r._onLoad,r),t.load())}),!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),on(this._afterMiddleware,(function(r,i){r.call(e,t,i)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},cn(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();xn._defaultBeforeMiddleware=[],xn._defaultAfterMiddleware=[],xn.pre=function(t){return xn._defaultBeforeMiddleware.push(t),xn},xn.use=function(t){return xn._defaultAfterMiddleware.push(t),xn};
/*!
 * @pixi/loaders - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var wn=function(){};wn.use=function(t,e){t.data&&t.type===dn.TYPE.IMAGE&&(t.texture=Zt.fromLoader(t.data,t.url,t.name)),e()};var Tn=function(t){function e(r,i){var n=this;t.call(this,r,i),x.a.call(this);for(var o=0;o<e._plugins.length;++o){var s=e._plugins[o],a=s.pre,h=s.use;a&&this.pre(a),h&&this.use(h)}this.onStart.add((function(t){return n.emit("start",t)})),this.onProgress.add((function(t,e){return n.emit("progress",t,e)})),this.onError.add((function(t,e,r){return n.emit("error",t,e,r)})),this.onLoad.add((function(t,e){return n.emit("load",t,e)})),this.onComplete.add((function(t,e){return n.emit("complete",t,e)})),this._protected=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={shared:{configurable:!0}};return e.prototype.destroy=function(){this._protected||(this.removeAllListeners(),this.reset())},r.shared.get=function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},Object.defineProperties(e,r),e}(xn);Object.assign(Tn.prototype,x.a.prototype),Tn._plugins=[],Tn.registerPlugin=function(t){return Tn._plugins.push(t),t.add&&t.add(),Tn},Tn.registerPlugin({use:_n.parsing}),Tn.registerPlugin(wn);var En=function(){};En.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Tn.shared:new Tn},En.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};var Sn=dn,On=function(t,e,r){this.geometry=new he,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var n=t[i];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||l.FLOAT,offset:n.offset},e[i]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()};
/*!
 * @pixi/particles - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */On.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new re(function(t,e){void 0===e&&(e=null);var r=6*t;if((e=e||new Uint16Array(r)).length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var i=0,n=0;i<r;i+=6,n+=4)e[i+0]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3;return e}(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var i=this.dynamicProperties[r];i.offset=e,e+=i.size,this.dynamicStride+=i.size}var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new re(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var s=0;s<this.staticProperties.length;++s){var a=this.staticProperties[s];a.offset=o,o+=a.size,this.staticStride+=a.size}var h=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(h),this.staticDataUint32=new Uint32Array(h),this.staticBuffer=new re(this.staticData,!0,!1);for(var u=0;u<this.dynamicProperties.length;++u){var c=this.dynamicProperties[u];t.addAttribute(c.attributeName,this.dynamicBuffer,0,c.type===l.UNSIGNED_BYTE,c.type,4*this.dynamicStride,4*c.offset)}for(var p=0;p<this.staticProperties.length;++p){var f=this.staticProperties[p];t.addAttribute(f.attributeName,this.staticBuffer,0,f.type===l.UNSIGNED_BYTE,f.type,4*this.staticStride,4*f.offset)}},On.prototype.uploadDynamic=function(t,e,r){for(var i=0;i<this.dynamicProperties.length;i++){var n=this.dynamicProperties[i];n.uploadFunction(t,e,r,n.type===l.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++},On.prototype.uploadStatic=function(t,e,r){for(var i=0;i<this.staticProperties.length;i++){var n=this.staticProperties[i];n.uploadFunction(t,e,r,n.type===l.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++},On.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()};var In="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n",An="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",Pn=function(t){function e(e){t.call(this,e),this.shader=null,this.properties=null,this.tempMatrix=new it,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:l.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=We.from(In,An,{})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=t.children,r=t._maxSize,i=t._batchSize,n=this.renderer,o=e.length;if(0!==o){o>r&&!t.autoResize&&(o=r);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.renderer.state.setBlendMode(D(t.blendMode,a.alphaMode));var h,u,c,l,p=n.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=(h=t.tintRgb,u=t.worldAlpha,c=this.shader.uniforms.uColor,l=a.alphaMode,c=c||new Float32Array(4),l||void 0===l?(c[0]=h[0]*u,c[1]=h[1]*u,c[2]=h[2]*u):(c[0]=h[0],c[1]=h[1],c[2]=h[2]),c[3]=u,c),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var d=!1,v=0,y=0;v<o;v+=i,y+=1){var g=o-v;g>i&&(g=i),y>=s.length&&s.push(this._generateOneMoreBuffer(t));var m=s[y];m.uploadDynamic(e,v,g);var _=t._bufferUpdateIDs[y]||0;(d=d||m._updateID<_)&&(m._updateID=t._updateID,m.uploadStatic(e,v,g)),n.geometry.bind(m.geometry),p.drawElements(p.TRIANGLES,6*g,p.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],r=t._maxSize,i=t._batchSize,n=t._properties,o=0;o<r;o+=i)e.push(new On(this.properties,n,i));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,r=t._properties;return new On(this.properties,r,e)},e.prototype.uploadVertices=function(t,e,r,i,n,o){for(var s=0,a=0,h=0,u=0,c=0;c<r;++c){var l=t[e+c],p=l._texture,f=l.scale.x,d=l.scale.y,v=p.trim,y=p.orig;v?(s=(a=v.x-l.anchor.x*y.width)+v.width,h=(u=v.y-l.anchor.y*y.height)+v.height):(s=y.width*(1-l.anchor.x),a=y.width*-l.anchor.x,h=y.height*(1-l.anchor.y),u=y.height*-l.anchor.y),i[o]=a*f,i[o+1]=u*d,i[o+n]=s*f,i[o+n+1]=u*d,i[o+2*n]=s*f,i[o+2*n+1]=h*d,i[o+3*n]=a*f,i[o+3*n+1]=h*d,o+=4*n}},e.prototype.uploadPosition=function(t,e,r,i,n,o){for(var s=0;s<r;s++){var a=t[e+s].position;i[o]=a.x,i[o+1]=a.y,i[o+n]=a.x,i[o+n+1]=a.y,i[o+2*n]=a.x,i[o+2*n+1]=a.y,i[o+3*n]=a.x,i[o+3*n+1]=a.y,o+=4*n}},e.prototype.uploadRotation=function(t,e,r,i,n,o){for(var s=0;s<r;s++){var a=t[e+s].rotation;i[o]=a,i[o+n]=a,i[o+2*n]=a,i[o+3*n]=a,o+=4*n}},e.prototype.uploadUvs=function(t,e,r,i,n,o){for(var s=0;s<r;++s){var a=t[e+s]._texture._uvs;a?(i[o]=a.x0,i[o+1]=a.y0,i[o+n]=a.x1,i[o+n+1]=a.y1,i[o+2*n]=a.x2,i[o+2*n+1]=a.y2,i[o+3*n]=a.x3,i[o+3*n+1]=a.y3,o+=4*n):(i[o]=0,i[o+1]=0,i[o+n]=0,i[o+n+1]=0,i[o+2*n]=0,i[o+2*n+1]=0,i[o+3*n]=0,i[o+3*n+1]=0,o+=4*n)}},e.prototype.uploadTint=function(t,e,r,i,n,o){for(var s=0;s<r;++s){var a=t[e+s],h=a._texture.baseTexture.alphaMode>0,u=a.alpha,c=u<1&&h?R(a._tintRGB,u):a._tintRGB+(255*u<<24);i[o]=c,i[o+n]=c,i[o+2*n]=c,i[o+3*n]=c,o+=4*n}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(ve),Cn=function(t,e,r){void 0===r&&(r=null),this.baseTexture=t,this.textures={},this.animations={},this.data=e,this.resolution=this._updateResolution(r||(this.baseTexture.resource?this.baseTexture.resource.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null},Mn={BATCH_SIZE:{configurable:!0}};Mn.BATCH_SIZE.get=function(){return 1e3},Cn.prototype._updateResolution=function(t){var e=this.data.meta.scale,r=q(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&this.baseTexture.setResolution(r),r},Cn.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=Cn.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},Cn.prototype._processFrames=function(t){for(var e=t,r=Cn.BATCH_SIZE;e-t<r&&e<this._frameKeys.length;){var i=this._frameKeys[e],n=this._frames[i],o=n.frame;if(o){var s=null,a=null,h=!1!==n.trimmed&&n.sourceSize?n.sourceSize:n.frame,u=new ft(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);s=n.rotated?new ft(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):new ft(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),!1!==n.trimmed&&n.spriteSourceSize&&(a=new ft(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new Zt(this.baseTexture,s,u,a,n.rotated?2:0,n.anchor),Zt.addToCache(this.textures[i],i)}e++}},Cn.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var r=0;r<t[e].length;r++){var i=t[e][r];this.animations[e].push(this.textures[i])}}},Cn.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},Cn.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*Cn.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*Cn.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)},Cn.prototype.destroy=function(t){for(var e in void 0===t&&(t=!1),this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},Object.defineProperties(Cn,Mn);var Dn=function(){};Dn.use=function(t,e){var r=t.name+"_image";if(t.data&&t.type===Sn.TYPE.JSON&&t.data.frames&&!this.resources[r]){var i={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},n=Dn.getResourcePath(t,this.baseUrl);this.add(r,n,i,(function(r){if(r.error)e(r.error);else{var i=new Cn(r.texture.baseTexture,t.data,t.url);i.parse((function(){t.spritesheet=i,t.textures=i.textures,e()}))}}))}else e()},Dn.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:S.a.resolve(t.url.replace(e,""),t.data.meta.image)};
/*!
 * @pixi/sprite-tiling - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
new J;var Rn="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Nn="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",Ln="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",kn=new it,Fn=function(t){function e(e){t.call(this,e);var r={globals:this.renderer.globalUniforms};this.shader=We.from(Rn,Nn,r),this.simpleShader=We.from(Rn,Ln,r),this.quad=new ce}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=this.renderer,r=this.quad,i=r.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((i=r.uvs)[0]=i[6]=-t.anchor.x,i[1]=i[3]=-t.anchor.y,i[2]=i[4]=1-t.anchor.x,i[5]=i[7]=1-t.anchor.y),r.invalidate();var n=t._texture,o=n.baseTexture,s=t.tileTransform.localTransform,a=t.uvMatrix,h=o.isPowerOfTwo&&n.frame.width===o.width&&n.frame.height===o.height;h&&(o._glTextures[e.CONTEXT_UID]?h=o.wrapMode!==f.CLAMP:o.wrapMode===f.CLAMP&&(o.wrapMode=f.REPEAT));var u=h?this.simpleShader:this.shader,c=n.width,l=n.height,p=t._width,d=t._height;kn.set(s.a*c/p,s.b*c/d,s.c*l/p,s.d*l/d,s.tx/p,s.ty/d),kn.invert(),h?kn.prepend(a.mapCoord):(u.uniforms.uMapCoord=a.mapCoord.toArray(!0),u.uniforms.uClampFrame=a.uClampFrame,u.uniforms.uClampOffset=a.uClampOffset),u.uniforms.uTransform=kn.toArray(!0),u.uniforms.uColor=N(t.tint,t.worldAlpha,u.uniforms.uColor,o.alphaMode),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.uSampler=n,e.shader.bind(u),e.geometry.bind(r),e.state.setBlendMode(D(t.blendMode,o.alphaMode)),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(ve),jn=function(t){function e(e,r){var i=this;void 0===r&&(r={}),t.call(this),this._textWidth=0,this._textHeight=0,this._glyphs=[],this._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},this.font=r.font,this._text=e,this._maxWidth=0,this._maxLineHeight=0,this._letterSpacing=0,this._anchor=new Q((function(){i.dirty=!0}),this,0,0),this.dirty=!1,this.roundPixels=_.ROUND_PIXELS,this.updateText()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={tint:{configurable:!0},align:{configurable:!0},anchor:{configurable:!0},font:{configurable:!0},text:{configurable:!0},maxWidth:{configurable:!0},maxLineHeight:{configurable:!0},textWidth:{configurable:!0},letterSpacing:{configurable:!0},textHeight:{configurable:!0}};return e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],r=this._font.size/t.size,i=new J,n=[],o=[],s=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",a=s.length,h=this._maxWidth*t.size/this._font.size,u=null,c=0,l=0,p=0,f=-1,d=0,v=0,y=0,g=0;g<a;g++){var m=s.charCodeAt(g),_=s.charAt(g);if(/(?:\s)/.test(_)&&(f=g,d=c),"\r"!==_&&"\n"!==_){var b=t.chars[m];b&&(u&&b.kerning[u]&&(i.x+=b.kerning[u]),n.push({texture:b.texture,line:p,charCode:m,position:new J(i.x+b.xOffset+this._letterSpacing/2,i.y+b.yOffset)}),i.x+=b.xAdvance+this._letterSpacing,c=i.x,y=Math.max(y,b.yOffset+b.texture.height),u=m,-1!==f&&h>0&&i.x>h&&(L(n,1+f-++v,1+g-f),g=f,f=-1,o.push(d),l=Math.max(l,d),p++,i.x=0,i.y+=t.lineHeight,u=null))}else o.push(c),l=Math.max(l,c),++p,++v,i.x=0,i.y+=t.lineHeight,u=null}var x=s.charAt(s.length-1);"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(c=d),o.push(c),l=Math.max(l,c));for(var w=[],T=0;T<=p;T++){var E=0;"right"===this._font.align?E=l-o[T]:"center"===this._font.align&&(E=(l-o[T])/2),w.push(E)}for(var S=n.length,O=this.tint,I=0;I<S;I++){var A=this._glyphs[I];A?A.texture=n[I].texture:((A=new Ti(n[I].texture)).roundPixels=this.roundPixels,this._glyphs.push(A)),A.position.x=(n[I].position.x+w[n[I].line])*r,A.position.y=n[I].position.y*r,A.scale.x=A.scale.y=r,A.tint=O,A.parent||this.addChild(A)}for(var P=S;P<this._glyphs.length;++P)this.removeChild(this._glyphs[P]);if(this._textWidth=l*r,this._textHeight=(i.y+t.lineHeight)*r,0!==this.anchor.x||0!==this.anchor.y)for(var C=0;C<S;C++)this._glyphs[C].x-=this._textWidth*this.anchor.x,this._glyphs[C].y-=this._textHeight*this.anchor.y;this._maxLineHeight=y*r},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},r.tint.get=function(){return this._font.tint},r.tint.set=function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0},r.align.get=function(){return this._font.align},r.align.set=function(t){this._font.align=t||"left",this.dirty=!0},r.anchor.get=function(){return this._anchor},r.anchor.set=function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},r.font.get=function(){return this._font},r.font.set=function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)},r.text.get=function(){return this._text},r.text.set=function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},r.maxWidth.get=function(){return this._maxWidth},r.maxWidth.set=function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},r.maxLineHeight.get=function(){return this.validate(),this._maxLineHeight},r.textWidth.get=function(){return this.validate(),this._textWidth},r.letterSpacing.get=function(){return this._letterSpacing},r.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},r.textHeight.get=function(){return this.validate(),this._textHeight},e.registerFont=function(t,r){var i={},n=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0],s=t.getElementsByTagName("page"),a=q(s[0].getAttribute("file"),_.RESOLUTION),h={};i.font=n.getAttribute("face"),i.size=parseInt(n.getAttribute("size"),10),i.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/a,i.chars={},r instanceof Zt&&(r=[r]);for(var u=0;u<s.length;u++){var c=s[u].getAttribute("id"),l=s[u].getAttribute("file");h[c]=r instanceof Array?r[u]:r[l]}for(var p=t.getElementsByTagName("char"),f=0;f<p.length;f++){var d=p[f],v=parseInt(d.getAttribute("id"),10),y=d.getAttribute("page")||0,g=new ft(parseInt(d.getAttribute("x"),10)/a+h[y].frame.x/a,parseInt(d.getAttribute("y"),10)/a+h[y].frame.y/a,parseInt(d.getAttribute("width"),10)/a,parseInt(d.getAttribute("height"),10)/a);i.chars[v]={xOffset:parseInt(d.getAttribute("xoffset"),10)/a,yOffset:parseInt(d.getAttribute("yoffset"),10)/a,xAdvance:parseInt(d.getAttribute("xadvance"),10)/a,kerning:{},texture:new Zt(h[y].baseTexture,g),page:y}}for(var m=t.getElementsByTagName("kerning"),b=0;b<m.length;b++){var x=m[b],w=parseInt(x.getAttribute("first"),10)/a,T=parseInt(x.getAttribute("second"),10)/a,E=parseInt(x.getAttribute("amount"),10)/a;i.chars[T]&&(i.chars[T].kerning[w]=E)}return e.fonts[i.font]=i,i},Object.defineProperties(e.prototype,r),e}(xt);jn.fonts={};var Bn=function(){};Bn.parse=function(t,e){t.bitmapFont=jn.registerFont(t.data,e)},Bn.add=function(){Sn.setExtensionXhrType("fnt",Sn.XHR_RESPONSE_TYPE.DOCUMENT)},Bn.dirname=function(t){var e=t.replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},Bn.use=function(t,e){if(t.data&&t.type===Sn.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var r=t.isDataUrl?"":Bn.dirname(t.url);t.isDataUrl&&("."===r&&(r=""),this.baseUrl&&r&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/")),(r=r.replace(this.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/");for(var i=t.data.getElementsByTagName("page"),n={},o=function(r){n[r.metadata.pageFile]=r.texture,Object.keys(n).length===i.length&&(Bn.parse(t,n),e())},s=0;s<i.length;++s){var a=i[s].getAttribute("file"),h=r+a,u=!1;for(var c in this.resources){var l=this.resources[c];if(l.url===h){l.metadata.pageFile=a,l.texture?o(l):l.onAfterMiddleware.add(o),u=!0;break}}if(!u){var p={crossOrigin:t.crossOrigin,loadType:Sn.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:a},t.metadata.imageMetadata),parentResource:t};this.add(h,p,o)}}}else e();else e()};["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var Un="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",Gn=function(t){function e(){var e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};t.call(this,Sr,Un,e),this.alpha=1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={matrix:{configurable:!0},alpha:{configurable:!0}};return e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),i=Math.sin(t),n=1/3,o=(0,Math.sqrt)(n),s=[r+(1-r)*n,n*(1-r)-o*i,n*(1-r)+o*i,0,0,n*(1-r)+o*i,r+n*(1-r),n*(1-r)-o*i,0,0,n*(1-r)-o*i,n*(1-r)+o*i,r+n*(1-r),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var r=(t||0)+1,i=-.5*(r-1),n=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var r=2*t/3+1,i=-.5*(r-1),n=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,r,i,n){var o=((r=r||16770432)>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,h=((i=i||3375104)>>16&255)/255,u=(i>>8&255)/255,c=(255&i)/255,l=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,h,u,c,e=e||.15,0,o-h,s-u,a-c,0,0];this._loadMatrix(l,n)},e.prototype.night=function(t,e){var r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},r.matrix.get=function(){return this.uniforms.m},r.matrix.set=function(t){this.uniforms.m=t},r.alpha.get=function(){return this.uniforms.uAlpha},r.alpha.set=function(t){this.uniforms.uAlpha=t},Object.defineProperties(e.prototype,r),e}($e);Gn.prototype.grayscale=Gn.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var zn=new it;_t.prototype._cacheAsBitmap=!1,_t.prototype._cacheData=!1;var Hn=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(_t.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Hn),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),_t.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},_t.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds().clone();if(this.filters){var i=this.filters[0].padding;r.pad(i)}r.ceil(_.RESOLUTION);var n=t.renderTexture.current,o=t.renderTexture.sourceFrame,s=t.projection.transform,a=Jt.create(r.width,r.height),h="cacheAsBitmap_"+F();this._cacheData.textureCacheId=h,kt.addToCache(a.baseTexture,h),Zt.addToCache(a,h);var u=zn;u.tx=-r.x,u.ty=-r.y,this.transform.worldTransform.identity(),this.render=this._cacheData.originalRender,t.render(this,a,!0,u,!0),t.projection.transform=s,t.renderTexture.bind(n,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new Ti(a);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-r.x/r.width,c.anchor.y=-r.y/r.height,c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)}},_t.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},_t.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),r=this.alpha;this.alpha=1;var i=t.context;e.ceil(_.RESOLUTION);var n=Jt.create(e.width,e.height),o="cacheAsBitmap_"+F();this._cacheData.textureCacheId=o,kt.addToCache(n.baseTexture,o),Zt.addToCache(n,o);var s=zn;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,n,!0,s,!1),t.context=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var a=new Ti(n);a.transform.worldTransform=this.transform.worldTransform,a.anchor.x=-e.x/e.width,a.anchor.y=-e.y/e.height,a.alpha=r,a._bounds=this._bounds,this._cacheData.sprite=a,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=a.containsPoint.bind(a)}},_t.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},_t.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},_t.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,kt.removeFromCache(this._cacheData.textureCacheId),Zt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},_t.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},
/*!
 * @pixi/mixin-get-child-by-name - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
_t.prototype.name=null,xt.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null},
/*!
 * @pixi/mixin-get-global-position - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
_t.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new J),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};
/*!
 * @pixi/mesh - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Xn=function(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0};Xn.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}};var Vn=new J,Yn=new yt,Wn=function(t){function e(e,r,i,n){void 0===n&&(n=h.TRIANGLES),t.call(this),this.geometry=e,e.refCount++,this.shader=r,this.state=i||Ke.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=0,this._transformID=-1,this.tint=16777215,this.blendMode=a.NORMAL,this._roundPixels=_.ROUND_PIXELS,this.batchUvs=null}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={uvBuffer:{configurable:!0},verticesBuffer:{configurable:!0},material:{configurable:!0},blendMode:{configurable:!0},roundPixels:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return r.uvBuffer.get=function(){return this.geometry.buffers[1]},r.verticesBuffer.get=function(){return this.geometry.buffers[0]},r.material.set=function(t){this.shader=t},r.material.get=function(){return this.shader},r.blendMode.set=function(t){this.state.blendMode=t},r.blendMode.get=function(){return this.state.blendMode},r.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},r.roundPixels.get=function(){return this._roundPixels},r.tint.get=function(){return this.shader.tint},r.tint.set=function(t){this.shader.tint=t},r.texture.get=function(){return this.shader.texture},r.texture.set=function(t){this.shader.texture=t},e.prototype._render=function(t){var r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===h.TRIANGLES&&r.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,i=r.a,n=r.b,o=r.c,s=r.d,a=r.tx,h=r.ty,u=this.vertexData,c=0;c<u.length/2;c++){var l=e[2*c],p=e[2*c+1];u[2*c]=i*l+o*p+a,u[2*c+1]=n*l+s*p+h}if(this._roundPixels)for(var f=0;f<u.length;f++)u[f]=Math.round(u[f]);this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Xn(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Vn);for(var e=this.geometry.getBuffer("aVertexPosition").data,r=Yn.points,i=this.geometry.getIndex().data,n=i.length,o=4===this.drawMode?3:1,s=0;s+2<n;s+=o){var a=2*i[s],h=2*i[s+1],u=2*i[s+2];if(r[0]=e[a],r[1]=e[a+1],r[2]=e[h],r[3]=e[h+1],r[4]=e[u],r[5]=e[u+1],Yn.contains(Vn.x,Vn.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Object.defineProperties(e.prototype,r),e}(xt);Wn.BATCHABLE_SIZE=100;Er.registerPlugin("accessibility",wt),Er.registerPlugin("extract",Br),Er.registerPlugin("interaction",Kr),Er.registerPlugin("particle",Pn),Er.registerPlugin("prepare",Vi),Er.registerPlugin("batch",Fr),Er.registerPlugin("tilingSprite",Fn),Tn.registerPlugin(Bn),Tn.registerPlugin(Dn),Zi.registerPlugin(It),Zi.registerPlugin(En);var qn=r(9),Kn=r.n(qn),Zn=r(7),$n=r.n(Zn);const Jn=(t,e,r,i)=>new Promise(n=>{const o=new Ot;let s=0;o.add(()=>{if(s>r)return o.destroy(),n();s+=o.deltaTime;const a=t+(1-Math.max((r-s)/r,0))*(e-t);i&&i(a,()=>n())}),o.start()}),Qn=()=>{const t=[2,2,4];return t[Math.floor(Math.random()*t.length)]};class to extends xt{constructor(t,e,r){super(),r||(r={}),this.width=t,this.height=e,this.background=new bi,this.background.beginFill(r.background).drawRect(0,0,t,e).endFill(),this.addChild(this.background),r.number&&(this.number=r.number,this.createText(r.number,r.color))}createText(t,e){this.textStyle=new Ii({fontFamily:"Arial",fontSize:100,fontWeight:"bold",fill:e||"#000000"}),this.text=new Li(t,this.textStyle),this.text.width>this.width?this.text.scale.set(this.width/(this.text.width+70)):this.text.scale.set(this.width/(this.text.width+100)),this.text.position.set(this.width/2-this.text.width/2,this.height/2-this.text.height/2),this.addChild(this.text)}scaleAnimation(t,e,r){return Jn(t,e,r,(t,e)=>{if(this._destroyed)return e();this.scale.set(t)})}scaleCenter(t){const e=this.position.x,r=this.position.y,i=this.width,n=this.height,o=this.scale.x;this.scale.set(t),this.position.set(e-(t-o)*i/2,r-(t-o)*n/2)}moveAnimation(t,e,r,i){return Jn(t,e,i,(t,e)=>{if(this._destroyed)return e();this.position.set("x"==r?t:this.position.x,"y"==r?t:this.position.y)})}move(t){return Promise.all([this.moveAnimation(this.position.y,t.position.y,"y",to.ANIMATION?5:0),this.moveAnimation(this.position.x,t.position.x,"x",to.ANIMATION?5:0)])}hide(){this.visible=!1}show(){this.visible=!0;const t=this.position.x,e=this.position.y;to.ANIMATION&&Promise.all([this.scaleAnimation(1,1.2,5),this.moveAnimation(this.position.x,this.position.x+this.width/2-1.2*this.width/2,"x",5),this.moveAnimation(this.position.y,this.position.y+this.height/2-1.2*this.height/2,"y",5)]).then(()=>{if(!this._destroyed)return Promise.all([this.scaleAnimation(1.2,1,5),this.moveAnimation(this.position.x,t,"x",5),this.moveAnimation(this.position.y,e,"y",5)])})}}$n()(to,"ANIMATION",!0);const eo=12299680,ro=13484468,io={2:[7827045,15656154],4:[7827045,15589576],8:[16381682,15905145],16:[16381682,16094563],32:[16381682,16153695],64:[16381682,16145979],128:[16381682,15585138],256:[16381682,15584353],512:[16381682,15583312]};class no extends to{constructor(t,e){super(t,t,{background:eo}),this.interactive=!1,this.margin=10,e.forEach(t=>this.createBackgroundTile(t))}createNewTile(t){const e=new to(t.width,t.height,{number:t.number,color:io[t.number][0],background:io[t.number][1]});return e.position.set(t.position.x,t.position.y),this.addChild(e),e}createBackgroundTile(t){const e=new to(t.width,t.height,{background:ro});e.position.set(t.position.x,t.position.y),this.addChild(e)}orderUpTile(t){t&&(this.removeChild(t),this.addChildAt(t,this.children.length-1))}cleanTiles(){this.children.filter(t=>t.number).forEach(t=>t.destroy(!0))}}class oo{constructor(t){if(this.keyName="grid",!t)throw new Error("set cellsLength");this.cellsLength=t}findPlaceForNewTile(){return this.loadCells().then(t=>{const e=t.map((t,e)=>({number:t,index:e})).filter(t=>!t.number),r=Math.floor(Math.random()*e.length);return e[r]?e[r].index:null})}loadCells(){return new Promise(t=>{const e=JSON.parse(window.localStorage.getItem(`${this.keyName}Cells`))||[];e.length!==this.cellsLength&&t(new Array(this.cellsLength).fill(null)),t(e)})}saveCells(t){return new Promise(e=>{window.localStorage.setItem(`${this.keyName}Cells`,JSON.stringify(t.map(t=>t.number))),e(t)})}}const so=(t,e,r,i)=>{const n=[],o=(t-2*e-e)/i.length,s=(t-2*e-e)/r.length;return i.reduce((t,i)=>t.concat(r.map(t=>{n[t]||(n[t]=[]);const r=o,a=s;return n[t][i]={rowIndex:t,columnIndex:i,width:r-e,height:a-e,margin:e,position:{x:r*i+e,y:a*t+e}}})),[]).map((t,e)=>(t.index=e,t))},ao=t=>{return t.reduce((t,e)=>(t[e.rowIndex]||(t[e.rowIndex]=[]),t[e.rowIndex][e.columnIndex]=e,t),[])},ho=t=>t[0].map((e,r)=>t.map(t=>t[r])),uo=(t,e)=>{return{"+90":()=>ho(t).map(t=>t.reverse()),"-90":()=>ho(t.map(t=>t.reverse())),"+180":()=>uo(uo(t,"+90"),"+90")}[e]()},co=(t,e)=>{const r=[];return t.forEach((i,n)=>{i.forEach((i,o)=>{if(i.number&&n>0){let s=n,a=!1;lo(n)(()=>{if(a)return;const e=t[s-1][o];if(e.number)return a=!0,void(e.number===i.number&&"merge"!==e.lastAction&&--s);--s});const h=t[s][o];let u;if(h===i)return;i.number===h.number&&(u=2*i.number);const c=i,l=c.tile,p=h.tile;u?(h.number=u,h.tile=null,h.lastAction="merge"):(h.number=c.number,h.tile=c.tile),c.tile=null,c.number=null;const f={action:u?"merge":"move",destinationCell:h,destinationTile:p,sourceCell:c,sourceTile:l};e(f),r.push(f)}})}),t.forEach(t=>t.forEach(t=>{t.lastAction=null})),r},lo=t=>e=>{t>0&&(e(),lo(t-1)(e))},po=t=>{let e=!1;return t.forEach((r,i)=>{r.forEach((r,n)=>{if(r.number&&i>0){let o=i,s=!1;lo(i)(()=>{if(s)return;const e=t[o-1][n];if(e.number)return s=!0,void(e.number===r.number&&--o);--o}),t[o][n]!==r&&(e=!0)}})}),e};class fo extends xt{constructor(t=1e3,e=1e3){super(),this.chain=Promise.resolve(),this.boardSize=Math.min(t,e);const r=this.margin=10;this.gameCells=so(this.boardSize,r,[0,1,2],[0,1,2]),this.board=this.buildBoard(this.gameCells),this.addChild(this.board),this.memory=new oo(this.gameCells.length),this.loadGame()}resize(t,e){const r=Math.min(t,e),i=(t-r+2*this.margin)/2;this.boardScale=r/this.boardSize,this.board.scaleCenter(this.boardScale),this.board.position.set(i,(e-r+2*this.margin)/2)}loadGame(){return this.memory.loadCells().then(t=>{this.gameCells=this.gameCells.map((e,r)=>(t[r]&&(e.number=t[r],e.tile=this.board.createNewTile(e)),e)),this.gameCells.filter(t=>t.number).length||this.newTile()})}newGame(){this.board.cleanTiles(),this.gameCells=this.gameCells.map(t=>(t.number=null,t.tile=null,t)),this.memory.saveCells(this.gameCells).then(()=>this.loadGame())}newTile(){return this.memory.findPlaceForNewTile().then(async t=>{const e=this.gameCells[t];e.number=Qn(),e.tile=this.board.createNewTile(e),await e.tile.show()}).then(()=>this.memory.saveCells(this.gameCells))}buildBoard(t){const e=new no(this.boardSize-2*this.margin,t);return e.width=this.boardSize-2*this.margin,e.height=this.boardSize-2*this.margin,e.position.set((this.width-this.boardSize)/2+this.margin,(this.height-this.boardSize)/2+this.margin),e}up(){return this.chain=this.chain.then(()=>{const t=ao(this.gameCells);return this.moveUp(t)}),this.chain}down(){return this.chain=this.chain.then(()=>{const t=ao(this.gameCells);return this.moveUp(uo(t,"+180"))}),this.chain}left(){return this.chain=this.chain.then(()=>{const t=ao(this.gameCells);return this.moveUp(uo(t,"+90"))}),this.chain}right(){return this.chain=this.chain.then(()=>{const t=ao(this.gameCells);return this.moveUp(uo(t,"-90"))}),this.chain}async moveUp(t){let e=0;if(!await this.canMove())return[!1,e];const r=co(t,t=>{"merge"==t.action&&(t.destinationCell.tile=this.board.createNewTile(t.destinationCell),t.destinationCell.tile.hide())}),i=r.map(t=>"merge"===t.action?t.sourceTile.move(t.destinationTile).then(async()=>{t.destinationTile.destroy(!0),t.sourceTile.destroy(!0),this.board.orderUpTile(t.destinationTile.tile),await t.destinationCell.tile.show(),e+=t.destinationCell.number,this.emit("point",t.destinationCell.number)}):t.sourceTile.move(t.destinationCell));return Promise.all(i).then(()=>this.memory.saveCells(this.gameCells)).then(async()=>r.length?(await this.newTile(),[!0,e]):[!1,e])}async canMove(){const t=ao(this.gameCells),e=[po(t),po(uo(t,"+90")),po(uo(t,"+90")),po(uo(t,"+90"))];return this.memory.findPlaceForNewTile().then(t=>!e.every(t=>!1===t)||null!=t||(this.emit("gameOver"),!1))}}class vo extends xt{constructor(t,e){super(),this.interactive=!0,this._cornerRadius=e,this.background=new bi,this.addChild(this.background);const r=new Ii({fontFamily:"Arial",fontSize:80,fontWeight:"bold",fill:7827045});this.text=new Li(t,r),this.addChild(this.text)}resize(t,e){this.background.clear(),this.background.beginFill(15656154,1),this.background.drawRoundedRect(0,0,t,e,this._cornerRadius),this.background.endFill(),this.text.height=.8*e,this.text.width=.8*t;const r=this.text.scale.x<this.text.scale.y?this.text.scale.x:this.text.scale.y;this.text.scale.set(r),this.text.position.set((t-this.text.width)/2,(e-this.text.height)/2)}}class yo extends xt{constructor(t,e=""){super(),this.background=new bi,this.addChild(this.background),this.scoreCounter=new go(e),this.addChild(this.scoreCounter);const r=new Ii({fontFamily:"Arial",fontSize:80,fontWeight:"bold",fill:16777215});this._headerText=new Li(t,r),this.addChild(this._headerText)}resize(t,e){const r=e/2,i=e/2;this.background.clear(),this.background.beginFill(12299680,1),this.background.drawRoundedRect(0,0,t,e,5),this.background.endFill(),this._headerText.height=.8*r,this._headerText.width=.8*t;const n=this._headerText.scale.x<this._headerText.scale.y?this._headerText.scale.x:this._headerText.scale.y;this._headerText.scale.set(n),this._headerText.position.set((t-this._headerText.width)/2,(r-this._headerText.height)/2),this.scoreCounter.resize(t,i),this.scoreCounter.position.set(0,r)}addPoint(t){return this.scoreCounter.addPoint(t)}clear(){return this.scoreCounter.clear()}getScore(){return this.scoreCounter.getScore()}setScore(t){return this.scoreCounter.setScore(t)}update(){return this.scoreCounter.update()}}class go extends xt{constructor(t=""){super(),this._prefix=t;const e=new Ii({fontFamily:"Arial",fontSize:80,fontWeight:"bold",fill:16777215});this._scoreText=new Li("",e),this.addChild(this._scoreText),this.update()}resize(t,e){this._scoreWidth=t,this._scoreHeight=e,this._scoreText.height=.7*e,this._scoreText.width=.8*t;const r=this._scoreText.scale.x<this._scoreText.scale.y?this._scoreText.scale.x:this._scoreText.scale.y;this._scoreText.scale.set(r),this._scoreText.position.set((t-this._scoreText.width)/2,(e-this._scoreText.height)/2)}addPoint(t){const e=Number(this._scoreText.text)+t;this.setScore(e)}clear(){this._scoreText.text=0,window.localStorage.setItem(`${this._prefix}Score`,0),this.resize(this._scoreWidth,this._scoreHeight)}update(){const t=window.localStorage.getItem(`${this._prefix}Score`)||0;this._scoreText.text=t,this.resize(this._scoreWidth,this._scoreHeight)}getScore(){return Number(window.localStorage.getItem(`${this._prefix}Score`)||0)}setScore(t){this._scoreText.text=t,window.localStorage.setItem(`${this._prefix}Score`,t),this.resize(this._scoreWidth,this._scoreHeight)}}const mo=!0,_o=mo?3:1,bo=mo?6:1;let xo=Promise.resolve();function wo(){xo=xo.then(()=>To()),mo&&(console.log("initialize adsense"),window.adsbygoogle=window.adsbygoogle||[],window.adsbygoogle.push({google_ad_client:"ca-pub-7811559275890870",enable_page_level_ads:!0,overlays:{bottom:!0}}))}async function To(){console.log("load admob interstitial"),console.log("production");const t={id:{android:mo?"ca-app-pub-7811559275890870/8875690118":"ca-app-pub-3940256099942544/1033173712"}};return console.log(t),!window.admob||window.admob.interstitial.load(t).then(()=>!0).catch(t=>(console.error(t),!1))}async function Eo(){const t=(e=_o,r=bo,Math.floor(Math.random()*(r-e+1))+e);var e,r;const i=Number(localStorage.getItem("game_over_count")||0);if(i<t)return void localStorage.setItem("game_over_count",i+1);localStorage.setItem("game_over_count",0);const n=xo.then(t=>{if(t)return async function(){return console.log("show adds"),new Promise((t,e)=>{window.admob||t(),document.addEventListener("admob.interstitial.close",()=>{t()},!1),document.addEventListener("admob.interstitial.load_fail",()=>{e(new Error("Interstitial load fail."))},!1),window.admob.interstitial.show().catch(e)})}().catch(t=>console.error(t))});return xo=n.then(()=>To()),n}window.cordova||wo(),document.addEventListener("deviceready",()=>{wo()},!1);var So=r(5),Oo=r.n(So),Io=r(4);var Ao=function(){return(Ao=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function Po(t,e,r,i){return new(r||(r=Promise))((function(n,o){function s(t){try{h(i.next(t))}catch(t){o(t)}}function a(t){try{h(i.throw(t))}catch(t){o(t)}}function h(t){t.done?n(t.value):new r((function(e){e(t.value)})).then(s,a)}h((i=i.apply(t,e||[])).next())}))}function Co(t,e){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Mo(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function Do(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,n,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}var Ro,No=r(3),Lo=r(16),ko="@firebase/installations",Fo="0.3.8",jo=1e4,Bo="w:"+Fo,Uo="FIS_v2",Go="https://firebaseinstallations.googleapis.com/v1",zo=36e5,Ho=((Ro={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Ro["not-registered"]="Firebase Installation is not registered.",Ro["installation-not-found"]="Firebase Installation not found.",Ro["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Ro["app-offline"]="Could not process request. Application offline.",Ro["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Ro),Xo=new No.ErrorFactory("installations","Installations",Ho);function Vo(t){return t instanceof No.FirebaseError&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){var e=t.projectId;return Go+"/projects/"+e+"/installations"}function Wo(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function qo(t,e){return Po(this,void 0,void 0,(function(){var r,i;return Co(this,(function(n){switch(n.label){case 0:return[4,e.json()];case 1:return r=n.sent(),i=r.error,[2,Xo.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})]}}))}))}function Ko(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Zo(t,e){var r=e.refreshToken,i=Ko(t);return i.append("Authorization",function(t){return Uo+" "+t}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r)),i}function $o(t){return Po(this,void 0,void 0,(function(){var e;return Co(this,(function(r){switch(r.label){case 0:return[4,t()];case 1:return(e=r.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function Jo(t,e){var r=e.fid;return Po(this,void 0,void 0,(function(){var e,i,n,o,s,a;return Co(this,(function(h){switch(h.label){case 0:return e=Yo(t),i=Ko(t),n={fid:r,authVersion:Uo,appId:t.appId,sdkVersion:Bo},o={method:"POST",headers:i,body:JSON.stringify(n)},[4,$o((function(){return fetch(e,o)}))];case 1:return(s=h.sent()).ok?[4,s.json()]:[3,3];case 2:return a=h.sent(),[2,{fid:a.fid||r,registrationStatus:2,refreshToken:a.refreshToken,authToken:Wo(a.authToken)}];case 3:return[4,qo("Create Installation",s)];case 4:throw h.sent()}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t){return btoa(String.fromCharCode.apply(String,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Do(arguments[e]));return t}(t))).replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var es=/^[cdef][\w-]{21}$/,rs="";function is(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return ts(t).substr(0,22)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return es.test(e)?e:rs}catch(t){return rs}}var ns,os="firebase-installations-database",ss=1,as="firebase-installations-store",hs=null;function us(){return hs||(hs=Object(Lo.openDb)(os,ss,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(as)}}))),hs}function cs(t,e){return Po(this,void 0,void 0,(function(){var r,i,n;return Co(this,(function(o){switch(o.label){case 0:return r=fs(t),[4,us()];case 1:return i=o.sent(),[4,(n=i.transaction(as,"readwrite")).objectStore(as).put(e,r)];case 2:return o.sent(),[4,n.complete];case 3:return o.sent(),[2,e]}}))}))}function ls(t){return Po(this,void 0,void 0,(function(){var e,r,i;return Co(this,(function(n){switch(n.label){case 0:return e=fs(t),[4,us()];case 1:return r=n.sent(),[4,(i=r.transaction(as,"readwrite")).objectStore(as).delete(e)];case 2:return n.sent(),[4,i.complete];case 3:return n.sent(),[2]}}))}))}function ps(t,e){return Po(this,void 0,void 0,(function(){var r,i,n,o,s,a;return Co(this,(function(h){switch(h.label){case 0:return r=fs(t),[4,us()];case 1:return i=h.sent(),n=i.transaction(as,"readwrite"),[4,(o=n.objectStore(as)).get(r)];case 2:return s=h.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(r)];case 3:return h.sent(),[3,6];case 4:return[4,o.put(a,r)];case 5:h.sent(),h.label=6;case 6:return[4,n.complete];case 7:return h.sent(),[2,a]}}))}))}function fs(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t){return Po(this,void 0,void 0,(function(){var e,r,i;return Co(this,(function(n){switch(n.label){case 0:return[4,ps(t,(function(r){var i=function(t){return gs(t||{fid:is(),registrationStatus:0})}(r),n=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){var r=Promise.reject(Xo.create("app-offline"));return{installationEntry:e,registrationPromise:r}}var i={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=function(t,e){return Po(this,void 0,void 0,(function(){var r,i;return Co(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,7]),[4,Jo(t,e)];case 1:return r=n.sent(),[2,cs(t,r)];case 2:return Vo(i=n.sent())&&409===i.serverCode?[4,ls(t)]:[3,4];case 3:return n.sent(),[3,6];case 4:return[4,cs(t,{fid:e.fid,registrationStatus:0})];case 5:n.sent(),n.label=6;case 6:throw i;case 7:return[2]}}))}))}(t,i);return{installationEntry:i,registrationPromise:n}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:vs(t)}:{installationEntry:e}}(t,i);return e=n.registrationPromise,n.installationEntry}))];case 1:return(r=n.sent()).fid!==rs?[3,3]:(i={},[4,e]);case 2:return[2,(i.installationEntry=n.sent(),i)];case 3:return[2,{installationEntry:r,registrationPromise:e}]}}))}))}function vs(t){return Po(this,void 0,void 0,(function(){var e,r,i,n;return Co(this,(function(o){switch(o.label){case 0:return[4,ys(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Qo(100)];case 3:return o.sent(),[4,ys(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,ds(t)];case 6:return r=o.sent(),i=r.installationEntry,(n=r.registrationPromise)?[2,n]:[2,i];case 7:return[2,e]}}))}))}function ys(t){return ps(t,(function(t){if(!t)throw Xo.create("installation-not-found");return gs(t)}))}function gs(t){return 1===(e=t).registrationStatus&&e.registrationTime+jo<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function ms(t,e){var r=t.appConfig,i=t.platformLoggerProvider;return Po(this,void 0,void 0,(function(){var t,n,o,s,a,h,u;return Co(this,(function(c){switch(c.label){case 0:return t=function(t,e){var r=e.fid;return Yo(t)+"/"+r+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r,e),n=Zo(r,e),(o=i.getImmediate({optional:!0}))&&n.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:Bo}},a={method:"POST",headers:n,body:JSON.stringify(s)},[4,$o((function(){return fetch(t,a)}))];case 1:return(h=c.sent()).ok?[4,h.json()]:[3,3];case 2:return u=c.sent(),[2,Wo(u)];case 3:return[4,qo("Generate Auth Token",h)];case 4:throw c.sent()}}))}))}function _s(t,e){return void 0===e&&(e=!1),Po(this,void 0,void 0,(function(){var r,i,n;return Co(this,(function(o){switch(o.label){case 0:return[4,ps(t.appConfig,(function(i){if(!xs(i))throw Xo.create("not-registered");var n=i.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+zo}(t)}(n))return i;if(1===n.requestStatus)return r=function(t,e){return Po(this,void 0,void 0,(function(){var r,i;return Co(this,(function(n){switch(n.label){case 0:return[4,bs(t.appConfig)];case 1:r=n.sent(),n.label=2;case 2:return 1!==r.authToken.requestStatus?[3,5]:[4,Qo(100)];case 3:return n.sent(),[4,bs(t.appConfig)];case 4:return r=n.sent(),[3,2];case 5:return 0===(i=r.authToken).requestStatus?[2,_s(t,e)]:[2,i]}}))}))}(t,e),i;if(!navigator.onLine)throw Xo.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return Ao(Ao({},t),{authToken:e})}(i);return r=function(t,e){return Po(this,void 0,void 0,(function(){var r,i,n;return Co(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,ms(t,e)];case 1:return r=o.sent(),n=Ao(Ao({},e),{authToken:r}),[4,cs(t.appConfig,n)];case 2:return o.sent(),[2,r];case 3:return!Vo(i=o.sent())||401!==i.serverCode&&404!==i.serverCode?[3,5]:[4,ls(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return n=Ao(Ao({},e),{authToken:{requestStatus:0}}),[4,cs(t.appConfig,n)];case 6:o.sent(),o.label=7;case 7:throw i;case 8:return[2]}}))}))}(t,o),o}))];case 1:return i=o.sent(),r?[4,r]:[3,3];case 2:return n=o.sent(),[3,4];case 3:n=i.authToken,o.label=4;case 4:return[2,n]}}))}))}function bs(t){return ps(t,(function(t){if(!xs(t))throw Xo.create("not-registered");var e,r=t.authToken;return 1===(e=r).requestStatus&&e.requestTime+jo<Date.now()?Ao(Ao({},t),{authToken:{requestStatus:0}}):t}))}function xs(t){return void 0!==t&&2===t.registrationStatus}function ws(t){return Po(this,void 0,void 0,(function(){var e;return Co(this,(function(r){switch(r.label){case 0:return[4,ds(t)];case 1:return(e=r.sent().registrationPromise)?[4,e]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t,e){return Po(this,void 0,void 0,(function(){var r,i,n,o;return Co(this,(function(s){switch(s.label){case 0:return r=function(t,e){var r=e.fid;return Yo(t)+"/"+r}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),i=Zo(t,e),n={method:"DELETE",headers:i},[4,$o((function(){return fetch(r,n)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,qo("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}function Es(t){return Xo.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(ns=Oo.a).INTERNAL.registerComponent(new Io.Component("installations",(function(t){var e=t.getProvider("app").getImmediate(),r={appConfig:
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){var e,r;if(!t||!t.options)throw Es("App Configuration");if(!t.name)throw Es("App Name");try{for(var i=Mo(["projectId","apiKey","appId"]),n=i.next();!n.done;n=i.next()){var o=n.value;if(!t.options[o])throw Es(o)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(t){return Po(this,void 0,void 0,(function(){var e,r,i;return Co(this,(function(n){switch(n.label){case 0:return[4,ds(t.appConfig)];case 1:return e=n.sent(),r=e.installationEntry,(i=e.registrationPromise)?i.catch(console.error):_s(t).catch(console.error),[2,r.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Po(this,void 0,void 0,(function(){return Co(this,(function(r){switch(r.label){case 0:return[4,ws(t.appConfig)];case 1:return r.sent(),[4,_s(t,e)];case 2:return[2,r.sent().token]}}))}))}(r,t)},delete:function(){return function(t){return Po(this,void 0,void 0,(function(){var e,r;return Co(this,(function(i){switch(i.label){case 0:return[4,ps(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(r=i.sent()))return[3,6];if(1!==r.registrationStatus)return[3,2];throw Xo.create("delete-pending-registration");case 2:if(2!==r.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Xo.create("app-offline");case 3:return[4,Ts(e,r)];case 4:return i.sent(),[4,ls(e)];case 5:i.sent(),i.label=6;case 6:return[2]}}))}))}(r)}}}),"PUBLIC")),ns.registerVersion(ko,Fo);var Ss=function(){return(Ss=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function Os(t,e){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Is,As,Ps,Cs="measurementId",Ms="firebase_id",Ds="origin",Rs="https://www.googletagmanager.com/gtag/js";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ns(t,e,r){return i=this,n=void 0,s=function(){var i,n;return Os(this,(function(o){switch(o.label){case 0:return[4,e.getId()];case 1:return i=o.sent(),r("js",new Date),r(Is.CONFIG,t.options[Cs],((n={})[Ms]=i,n[Ds]="firebase",n.update=!0,n)),[2]}}))},new((o=void 0)||(o=Promise))((function(t,e){function r(t){try{h(s.next(t))}catch(t){e(t)}}function a(t){try{h(s.throw(t))}catch(t){e(t)}}function h(e){e.done?t(e.value):new o((function(t){t(e.value)})).then(r,a)}h((s=s.apply(i,n||[])).next())}));var i,n,o,s}function Ls(t,e,r){var i=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];window[e].push(arguments)};return window[r]&&"function"==typeof window[r]&&(i=window[r]),window[r]=function(t,e){return function(r,i,n){if(r===Is.EVENT){var o=[];if(n&&n.send_to){var s=n.send_to;Array.isArray(s)||(s=[s]);for(var a=0,h=s;a<h.length;a++){var u=h[a],c=e[u];if(!c){o=[];break}o.push(c)}}if(0===o.length)for(var l=0,p=Object.values(e);l<p.length;l++){var f=p[l];o.push(f)}Promise.all(o).then((function(){return t(Is.EVENT,i,n||{})})).catch((function(t){return console.error(t)}))}else if(r===Is.CONFIG){(e[i]||Promise.resolve()).then((function(){t(Is.CONFIG,i,n)})).catch((function(t){return console.error(t)}))}else t(Is.SET,i)}}(i,t),{gtagCore:i,wrappedGtag:window[r]}}!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(Is||(Is={})),function(t){t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(As||(As={}));var ks,Fs,js=((Ps={})["no-ga-id"]='"'+Cs+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',Ps["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",Ps["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Ps["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",Ps),Bs=new No.ErrorFactory("analytics","Analytics",js),Us={},Gs="dataLayer",zs="gtag",Hs=!1;function Xs(t){if(Hs)throw Bs.create("already-initialized");t.dataLayerName&&(Gs=t.dataLayerName),t.gtagName&&(zs=t.gtagName)}function Vs(t,e){var r=t.options[Cs];if(!r)throw Bs.create("no-ga-id");if(null!=Us[r])throw Bs.create("already-exists",{id:r});if(!Hs){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,r=Object.values(t);e<r.length;e++){var i=r[e];if(i.src&&i.src.includes(Rs))return i}return null}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)()||function(t){var e=document.createElement("script");e.src=Rs+"?l="+t,e.async=!0,document.head.appendChild(e)}(Gs),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Gs);var i=Ls(Us,Gs,zs),n=i.wrappedGtag,o=i.gtagCore;Fs=n,ks=o,Hs=!0}return Us[r]=Ns(t,e,ks),{app:t,logEvent:function(t,e,i){
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(t,e,r,i,n){var o=i||{};n&&n.global||(o=Ss(Ss({},i),{send_to:e})),t(Is.EVENT,r,o||{})}(Fs,r,t,e,i)},setCurrentScreen:function(t,e){return function(t,e,r,i){i&&i.global?t(Is.SET,{screen_name:r}):t(Is.CONFIG,e,{update:!0,screen_name:r})}(Fs,r,t,e)},setUserId:function(t,e){return function(t,e,r,i){i&&i.global?t(Is.SET,{user_id:r}):t(Is.CONFIG,e,{update:!0,user_id:r})}(Fs,r,t,e)},setUserProperties:function(t,e){return function(t,e,r,i){if(i&&i.global){for(var n={},o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];n["user_properties."+a]=r[a]}t(Is.SET,n)}else t(Is.CONFIG,e,{update:!0,user_properties:r})}(Fs,r,t,e)},setAnalyticsCollectionEnabled:function(t){return function(t,e){window["ga-disable-"+t]=!e}(r,t)}}}var Ys="@firebase/analytics",Ws="0.2.9",qs="analytics";!function(t){t.INTERNAL.registerComponent(new Io.Component(qs,(function(t){return Vs(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:Xs,EventName:As})),t.INTERNAL.registerComponent(new Io.Component("analytics-internal",(function(t){try{return{logEvent:t.getProvider(qs).getImmediate().logEvent}}catch(t){throw Bs.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion(Ys,Ws)}(Oo.a);var Ks=r(10);const Zs=!0,$s=!0;function Js(){return Zs&&$s?window.cordova?function(){if(ta)return;ta=!0;const t=window.cordova;return{screenview(e){t.plugins.firebase.analytics.setCurrentScreen(e)},event(e,r={}){t.plugins.firebase.analytics.logEvent(e,r)}}}():function(){if(Qs)return;console.log("start web visitor"),Qs=!0;Ks.initializeApp({apiKey:"AIzaSyA9xCg9NzBxK2TLaCJKGSBBYF2gkLKlOIY",authDomain:"game-c0fa5.firebaseapp.com",databaseURL:"https://game-c0fa5.firebaseio.com",projectId:"game-c0fa5",storageBucket:"game-c0fa5.appspot.com",messagingSenderId:"999732334218",appId:"1:999732334218:web:46bd634b0ae697b41d2773",measurementId:"G-84MY5EEN34"});const t=Ks.analytics();return{screenview(e){t.setCurrentScreen(e)},event(e,r={}){t.logEvent(e,r)}}}():{screenview(t){console.log("empty visitor screen: ",t)},event(t,e={}){console.log("empty visitor event: ",t)}}}let Qs,ta;class ea extends xt{constructor(){super(),this.gameOverAppRateCount=0,this.background=new bi,this.addChild(this.background),this.score=new yo("YOUR SCORE:"),this.score.background.alpha=0,this.addChild(this.score),this.newGameButton=new vo("NEW GAME",50),this.addChild(this.newGameButton),this.hide(),window.cordova&&window.plugins.socialsharing.available(t=>{t&&(this.enableShareButton(),this.resize(),console.log("support socialshare"))})}enableShareButton(){this.shareButton=new vo("SHARE",50),this.addChild(this.shareButton),this.shareButton.on("tap",()=>{Js().event("showed_share_dialog");const t={message:`Look! My score is ${this.score.getScore()}. Beat me if you can.`,subject:"You never win 512.",url:"https://play.google.com/store/apps/details?id=com.laCosaNostra.FiveHundredAndTwelve2"};window.plugins.socialsharing.shareWithOptions(t,t=>{Js().event("share_dialog_success",t),console.log(`Share completed? ${t.completed}`),console.log(`Shared to app: ${t.app}`)},t=>{console.log(`Sharing failed with message: ${t}`)})})}resize(t=this._width,e=this._height){this._width=t,this._height=e,this.background.clear(),this.background.beginFill(12299680),this.background.drawRect(0,0,t,e),this.background.endFill();const r=e/4,i=.8*t;let n,o,s;this.score.resize(i,r),this.newGameButton.resize(i,r),this.shareButton?(n=(e/3-r)/2,o=e/3*2-r-n,s=e/3*3-r-n,this.shareButton.resize(i,r),this.shareButton.position.set((t-this.shareButton.width)/2,o)):(n=(e/2-r)/2,s=e/2*2-r-n),this.score.position.set((t-this.score.width)/2,n),this.newGameButton.position.set((t-this.newGameButton.width)/2,s)}show(){this.visible||(this.score.update(),this.visible=!0,this.alpha=0,Jn(0,1,this.ANIMATION?100:0,t=>{this.alpha=t}))}hide(){this.visible=!1}}$n()(ea,"ANIMATION",!0);class ra extends xt{constructor(){super(),this.grid=new fo,this.grid.on("point",t=>{this.score.addPoint(t),this.score.getScore()>this.highScore.getScore()&&this.highScore.setScore(this.score.getScore())}),this.addChild(this.grid),this.score=new yo("SCORE"),this.addChild(this.score),this.highScore=new yo("HIGH SCORE","high"),this.addChild(this.highScore),this.newGameButton=new vo("NEW GAME",5),this.newGameButton.on("tap",()=>this.newGame()),this.newGameButton.on("click",()=>this.newGame()),this.addChild(this.newGameButton),Js().screenview("New game"),this.clickedNewGame=!1}resize(t,e){const r=(e-e/2)/2;this.grid.resize(t-10,e/2),this.grid.position.set(0,r);const i=.3*r,n=this.grid.boardScale*this.grid.boardSize,o=.4*n;this.score.resize(o,i),this.score.position.set(t/2-n/2+10,r/4-i/2),this.highScore.resize(o,i),this.highScore.position.set(t/2-n/2+n-o-10,r/4-i/2);const s=.9*i;this.newGameButton.resize(o,s),this.newGameButton.position.set(t/2-n/2+n-o-10,r/2+(r/4-s/2))}async newGame(){if(this.clickedNewGame)return;this.clickedNewGame=!0,this.grid.newGame(),this.score.clear(),Js().screenview("New game"),this.alpha=0,await async function(t){const e=Number(localStorage.getItem("show_app_rate_count")||0);if(e<t)return localStorage.setItem("show_app_rate_count",e+1),!1;localStorage.setItem("show_app_rate_count",0),console.log("show app rate");const r=window.AppRate;return!!r&&(!localStorage.getItem("appRate.done")&&(r.preferences.customLocale={title:"Would you mind rating %@?",message:"It wont take more than a minute and helps to promote our app. Thanks for your support!",cancelButtonLabel:"No, Thanks",laterButtonLabel:"",rateButtonLabel:"Rate It Now",yesButtonLabel:"Yes!",noButtonLabel:"Not really",appRatePromptTitle:"Do you like using %@",feedbackPromptTitle:"Mind giving us some feedback?"},r.preferences.storeAppURL={android:"https://play.google.com/store/apps/details?id=com.laCosaNostra.FiveHundredAndTwelve2&referrer=utm_source%3Dshare_btn"},r.preferences.callbacks={handleNegativeFeedback:function(){window.open("mailto:studiolacosanostra@gmail.com","_system")}},r.promptForRating(),localStorage.setItem("appRate.done",!0),Js().event("showed_app_rate"),!0))}(3)||await Eo(),this.alpha=1,this.clickedNewGame=!1}}class ia{constructor(){this.app=new Zi({antialias:!0}),this.app.renderer.backgroundColor=16447727,this.gameOverView=new ea,this.game=new ra,this.app.stage.addChild(this.game),this.game.grid.on("gameOver",()=>{this.gameOverView.show(),Js().screenview("Game over")}),this.gameOverView.newGameButton.on("tap",()=>this.newGame()),this.gameOverView.newGameButton.on("click",()=>this.newGame()),this.app.stage.addChild(this.gameOverView),document.addEventListener("keydown",t=>{const e={ArrowUp:()=>this.game.grid.up(),ArrowDown:()=>this.game.grid.down(),ArrowLeft:()=>this.game.grid.left(),ArrowRight:()=>this.game.grid.right(),Enter:()=>this.newGame()}[t.key];if(e)return t.preventDefault(),e();console.log(`not defined action for key: ${t.key}`)});const t=new Kn.a(this.app.view,{});t.get("swipe").set({direction:Kn.a.DIRECTION_ALL}),t.on("swipeup",()=>this.game.grid.up()),t.on("swipeleft",()=>this.game.grid.left()),t.on("swipedown",()=>this.game.grid.down()),t.on("swiperight",()=>this.game.grid.right())}resize(t,e){this.app.renderer.resize(t,e);const r=this.app.renderer.width,i=this.app.renderer.height;this.game.resize(r,i),this.game.position.set(0,0),this.gameOverView.resize(r,i),this.gameOverView.position.set(0,0)}newGame(){this.game.newGame(),this.gameOverView.hide()}}function na(){const t=1/window.devicePixelRatio,e=new ia,r=document.querySelector(".canvas");return r.appendChild(e.app.view),e.resize(r.offsetWidth*window.devicePixelRatio,r.offsetHeight*window.devicePixelRatio),e.app.view.style.transform=`scale(${t})`,e.app.view.style.transformOrigin="top left",window.addEventListener("resize",()=>{e.resize(r.offsetWidth*window.devicePixelRatio,r.offsetHeight*window.devicePixelRatio)}),window.app=e,e}window.cordova||na(),document.addEventListener("deviceready",()=>{na()},!1)}]);
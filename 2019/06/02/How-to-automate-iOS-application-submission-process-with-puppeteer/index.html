<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><meta name="msvalidate.01" content="292663BA216F36D83E3C5B19B43A0BA1"><meta name="description" content="Working on more and more programs, some activities beginning to become boring and monotonous. One of them is reporting the application update in the app store. Unfortunately, this can not be done thro"><meta name="keywords" content="node.js,puppeteer,app store,apple"><meta property="og:type" content="article"><meta property="og:title" content="How to automate iOS application submission process with puppeteer"><meta property="og:url" content="https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/index.html"><meta property="og:site_name" content="Studio La cosa nostra dev blog"><meta property="og:description" content="Working on more and more programs, some activities beginning to become boring and monotonous. One of them is reporting the application update in the app store. Unfortunately, this can not be done thro"><meta property="og:locale" content="en"><meta property="og:image" content="https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/title-image.png"><meta property="og:updated_time" content="2020-01-08T19:21:28.883Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="How to automate iOS application submission process with puppeteer"><meta name="twitter:description" content="Working on more and more programs, some activities beginning to become boring and monotonous. One of them is reporting the application update in the app store. Unfortunately, this can not be done thro"><meta name="twitter:image" content="https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/title-image.png"><meta name="twitter:creator" content="@la_cosa_nostrai"><meta name="twitter:site" content="https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><title>How to automate iOS application submission process with puppeteer</title><link rel="stylesheet" href="/css/style.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/style.css"></noscript><link rel="stylesheet" href="/css/rtl.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/rtl.css"></noscript><link rel="amphtml" href="https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/amp/index.html"><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-7811559275890870",enable_page_level_ads:!0})</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-133020393-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-133020393-1")</script><meta name="google-site-verification" content="M3LE90r-9Zi3bh6WJc9u3Dv4Y4iN5uAbCLOoKKB5STg"><meta name="yandex-verification" content="d79c4ffd80f4db16"><meta name="monetization" content="$coil.xrptipbot.com/-LgHcPIpRjOKFZ99hUWsgg"><meta name="p:domain_verify" content="f40f638a911806fcc1b1d6ce99ecd6ff"><link rel="canonical" href="https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/"><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="/css/prism.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism.css"></noscript><link rel="stylesheet" href="/css/prism-line-numbers.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism-line-numbers.css"></noscript><link rel="stylesheet" href="/css/prism.css" media="none" onload="if(media!='all')media='all'"><noscript><link rel="stylesheet" href="/css/prism.css"></noscript>
<link rel="stylesheet" href="/css/prism-line-numbers.css" media="none" onload="if(media!='all')media='all'"><noscript><link rel="stylesheet" href="/css/prism-line-numbers.css"></noscript></head><body class="max-width mx-auto px3 ltr"><cookie-consent>This site uses cookies to analyse traffic, remember your preferences, and optimise your experience. <a href="/privacy-policy.html">Learn more, read the privacy policy page.</a></cookie-consent><div id="header-post"><a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$(&quot;html, body&quot;).animate({scrollTop:0},&quot;fast&quot;)" style="display:none"><i class="fas fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/projects">Projects</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="/2019/07/11/Automate-blog-posts-publishing-on-Github-Pages-with-Travis/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$(&quot;#i-prev&quot;).toggle()" onmouseout="$(&quot;#i-prev&quot;).toggle()"></i></a></li><li><a class="icon" href="/2019/05/16/How-to-debug-Angular-tests-in-VSCode/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$(&quot;#i-next&quot;).toggle()" onmouseout="$(&quot;#i-next&quot;).toggle()"></i></a></li><li><a class="icon" href="#" onclick="$(&quot;html, body&quot;).animate({scrollTop:0},&quot;fast&quot;)"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$(&quot;#i-top&quot;).toggle()" onmouseout="$(&quot;#i-top&quot;).toggle()"></i></a></li><li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$(&quot;#i-share&quot;).toggle()" onmouseout="$(&quot;#i-share&quot;).toggle()" onclick="return $(&quot;#share&quot;).toggle(),!1"></i></a></li></ul><span id="i-prev" class="info" style="display:none">Previous post</span> <span id="i-next" class="info" style="display:none">Next post</span> <span id="i-top" class="info" style="display:none">Back to top</span> <span id="i-share" class="info" style="display:none">Share post</span></span><br><div id="share" style="display:none"><link rel="stylesheet" href="/css/prism.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism.css"></noscript><link rel="stylesheet" href="/css/prism-line-numbers.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism-line-numbers.css"></noscript><ul><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;text=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;title=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;is_video=false&amp;description=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=How to automate iOS application submission process with puppeteer&amp;body=Check out this article: https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/"><i class="fas fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;title=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;title=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;title=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;title=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-digg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.tumblr.com/share/link?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;name=How to automate iOS application submission process with puppeteer&amp;description=" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-tumblr" aria-hidden="true"></i></a></li></ul></div><div id="toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Setup-project"><span class="toc-number">1.</span> <span class="toc-text">Setup project.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-use-program"><span class="toc-number">2.</span> <span class="toc-text">How to use program.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-debug-and-develop-the-program"><span class="toc-number">3.</span> <span class="toc-text">How to debug and develop the program</span></a></li></ol></div></span></div><div class="content index py4"><article class="post"><header><link rel="stylesheet" href="/css/prism.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism.css"></noscript><link rel="stylesheet" href="/css/prism-line-numbers.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism-line-numbers.css"></noscript><h1 class="posttitle">How to automate iOS application submission process with puppeteer</h1><div class="meta"><div class="postdate"><time datetime="2019-06-02T00:00:00.000Z">2019-06-02</time></div><div class="article-tag"><i class="fas fa-tag"></i> <a class="tag-link" href="/tags/app-store/">app store</a>, <a class="tag-link" href="/tags/apple/">apple</a>, <a class="tag-link" href="/tags/node-js/">node.js</a>, <a class="tag-link" href="/tags/puppeteer/">puppeteer</a></div></div></header><img class="image" src="/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/title-image.png" alt="How to automate iOS application submission process with puppeteer" loading="lazy"><div class="content"><p>Working on more and more programs, some activities beginning to become boring and monotonous. One of them is reporting the application update in the app store. Unfortunately, this can not be done through the API, for example: in the Google Play Store. What could be integrated with jenkins or travis-ci. Everything needs to be clicked manually, and it takes our valuable time that can be used for other duties. Below I paste a project to automate these activities using the puppeteer and closing everything into one command.</p><h2 id="Setup-project"><a href="#Setup-project" class="headerlink" title="Setup project."></a>Setup project.</h2><ul><li>Create project directory.<br><code>mkdir app-store-submission-cli</code></li><li>Go to project directory.<br><code>cd app-store-submission-cli</code></li><li>Initialize npm package.<br><code>npm init</code></li><li>Install required puppeteer, debug log, semver and minimist.<br><code>npm i puppeteer debug semver minimist</code></li><li>Install also typescript transpiler and types for libs.<br><code>npm i typescript @types/puppeteer @types/debug @types/semver @types/minimist --save-dev</code></li><li>Install also google typescript style helpers.<br><code>npx gts init</code></li><li><p>Create source code dir<br><code>mkdir src</code></p></li><li><p>Add to package.json start script.</p><pre class="line-numbers language-json"><code class="language-json">{
  "scripts": {
    "start": "node build/src/index.js"
  }
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Add to tsconfig.json <em>dom</em> lib for puppeteer types check</p><pre class="line-numbers language-json"><code class="language-json">{
  "compilerOptions": {
    "lib": ["dom"]
  }
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Go to source dir<br><code>cd src</code></p></li><li>Init index.ts<br><code>touch src/index.ts</code></li><li><p>Paste code:</p><pre class="line-numbers language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> puppeteer <span class="token keyword">from</span> <span class="token string">'puppeteer'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Frame<span class="token punctuation">,</span> Page<span class="token punctuation">,</span> Cookie <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'puppeteer'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> fs <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> readline <span class="token keyword">from</span> <span class="token string">'readline'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> debug <span class="token keyword">from</span> <span class="token string">'debug'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> semver <span class="token keyword">from</span> <span class="token string">'semver'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> minimist <span class="token keyword">from</span> <span class="token string">'minimist'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> argv <span class="token operator">=</span> <span class="token function">minimist</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> log <span class="token operator">=</span> <span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'apple-app-store'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> Platform <span class="token punctuation">{</span>
  iOS <span class="token operator">=</span> <span class="token string">'iOS'</span><span class="token punctuation">,</span>
  tvOS <span class="token operator">=</span> <span class="token string">'tvOS'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">clickSignInButton</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">frame<span class="token punctuation">:</span> Frame</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'clickSignInButton'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>
    <span class="token string">'#stepEl &gt; sign-in &gt; #signin &gt; .container &gt; #sign-in:not(disabled)'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">saveCookies</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'saveCookies'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> cookies<span class="token punctuation">:</span> Cookie<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">cookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">'cookies.json'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>cookies<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">loadCookies</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'loadCookies'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span><span class="token string">'cookies.json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> cookies<span class="token punctuation">:</span> Cookie<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>
    fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'cookies.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> cookies<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> cookie <span class="token operator">=</span> cookies<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">setCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">openVerifyDeviceOptions</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">frame<span class="token punctuation">:</span> Frame</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'openVerifyDeviceOptions'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> selector <span class="token operator">=</span> <span class="token string">'#no-trstd-device-pop'</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">usePhoneTextCode</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">frame<span class="token punctuation">:</span> Frame</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'usePhoneTextCode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> selector <span class="token operator">=</span> <span class="token string">'#use-phone-link'</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">clickTrustBrowser</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">frame<span class="token punctuation">:</span> Frame</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'clickTrustBrowser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> selector <span class="token operator">=</span> <span class="token string">'button.trust-browser'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> askForVerificationCode <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'askForVerificationCode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> readlineInterface <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    input<span class="token punctuation">:</span> process<span class="token punctuation">.</span>stdin<span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> process<span class="token punctuation">.</span>stdout<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    readlineInterface<span class="token punctuation">.</span><span class="token function">question</span><span class="token punctuation">(</span>
      <span class="token string">'Please type your verification code: '</span><span class="token punctuation">,</span>
      <span class="token parameter">answer</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Thank you for verification code: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>answer<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        readlineInterface<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> authFrameSelector <span class="token operator">=</span> <span class="token string">'#aid-auth-widget-iFrame'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">isLoginForm</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'isLoginForm'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> page<span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span>authFrameSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page<span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> password<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> frameElement <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span>authFrameSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>frameElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Missing frame </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>authFrameSelector<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> frame <span class="token operator">=</span> <span class="token keyword">await</span> frameElement<span class="token punctuation">.</span><span class="token function">contentFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>frame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Missing frame </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>authFrameSelector<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> accountNameInputSelector <span class="token operator">=</span> <span class="token string">'#account_name_text_field'</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>accountNameInputSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span>accountNameInputSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">clickSignInButton</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> passwordInputSelector <span class="token operator">=</span> <span class="token string">'#password_text_field'</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>passwordInputSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">waitFor</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span>passwordInputSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">clickSignInButton</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> verifyDeviceSelector <span class="token operator">=</span> <span class="token string">'verify-device'</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>verifyDeviceSelector<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> isVerifyDevice <span class="token operator">=</span> <span class="token keyword">await</span> frame<span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span>verifyDeviceSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isVerifyDevice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Verify device.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">openVerifyDeviceOptions</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">usePhoneTextCode</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> verificationCode <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">askForVerificationCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> page<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span>verificationCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">clickTrustBrowser</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> homePageSelector <span class="token operator">=</span> <span class="token string">'#homepage-container'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">isHomePage</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'isHomePage'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> page<span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span>homePageSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">goToApps</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'goToApps'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> xPath <span class="token operator">=</span> <span class="token string">'//div[text()="My Apps"]'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForXPath</span><span class="token punctuation">(</span>xPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitFor</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForNavigation</span><span class="token punctuation">(</span><span class="token punctuation">{</span> waitUntil<span class="token punctuation">:</span> <span class="token string">'networkidle2'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token string">'#manage-your-apps-search'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">goToApp</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page<span class="token punctuation">,</span> appleId<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'goToApp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> selector <span class="token operator">=</span> <span class="token template-string"><span class="token string">`a[href$='app\/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>appleId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">']`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token string">'#appPageHeader'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> getPrepareSubmissionXPath <span class="token operator">=</span> <span class="token punctuation">(</span>option<span class="token punctuation">:</span> Platform<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token parameter"><span class="token builtin">string</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> texts <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Platform<span class="token punctuation">.</span>iOS<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">'IOS APP'</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Platform<span class="token punctuation">.</span>tvOS<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">'TVOS APP'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> xPath <span class="token operator">=</span> <span class="token template-string"><span class="token string">`//h3[text()='</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
    texts<span class="token punctuation">[</span>option<span class="token punctuation">]</span>
  <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">']/following-sibling::ul//a[contains(text(), 'Prepare for Submission')]`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> xPath<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">isActiveSubmission</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page<span class="token punctuation">,</span> option<span class="token punctuation">:</span> Platform</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'isActiveSubmission'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitFor</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> isAvailableNewSubmission <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">$x</span><span class="token punctuation">(</span>
    <span class="token function">getPrepareSubmissionXPath</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> isAvailableNewSubmission<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">selectVersionOrPlatform</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>
  <span class="token parameter">page<span class="token punctuation">:</span> Page<span class="token punctuation">,</span>
  option<span class="token punctuation">:</span> Platform<span class="token punctuation">,</span>
  version<span class="token punctuation">:</span> <span class="token builtin">number</span></span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'selectVersionOrPlatform'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> openPopUpSelector <span class="token operator">=</span> <span class="token string">'a.newVersion_link'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> openPopUpElement <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>openPopUpSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> openPopUpElement<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token string">'#versionPopUp.open'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> xPath <span class="token operator">=</span> <span class="token template-string"><span class="token string">`//div[@id="versionPopUp"]//a[not(@class="ng-hide") and text()="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>option<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"]`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> optionElement <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForXPath</span><span class="token punctuation">(</span>xPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>optionElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> optionElement<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token string">'.ng-modal:not(.ng-hide)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> updateSemVerMinor <span class="token operator">=</span> semver<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>version<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.0`</span></span><span class="token punctuation">,</span> <span class="token string">'minor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>updateSemVerMinor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Something wrong with version </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>version<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> comVer <span class="token operator">=</span> updateSemVerMinor<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\.0$/</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> page<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span>comVer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> buttonElement <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token string">'.modal-buttons .primary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> buttonElement<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token string">'#appStorePageContent p.status.waiting'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Missing option'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">openUserMenu</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'openUserMenu'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> selector <span class="token operator">=</span> <span class="token string">'.mobile-user-avatar'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitFor</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token string">'#itc-user-menustate:checked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">closeUserMenu</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'closeUserMenu'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> selector <span class="token operator">=</span> <span class="token string">'.mobile-user-avatar'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token string">'#itc-user-menustate:not(:checked)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">selectTeam</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page<span class="token punctuation">,</span> teamName<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'selectTeam'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> xPath <span class="token operator">=</span> <span class="token template-string"><span class="token string">`//label[contains(@class, 'custom-radio-check') and text() = '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>teamName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">']`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">openUserMenu</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForXPath</span><span class="token punctuation">(</span>xPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> forAttribute <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> element<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'for'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> isChecked <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token parameter">id</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Missing select team input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> element<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'checked'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> forAttribute<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isChecked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">closeUserMenu</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForNavigation</span><span class="token punctuation">(</span><span class="token punctuation">{</span> waitUntil<span class="token punctuation">:</span> <span class="token string">'networkidle2'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">goToReadyForSale</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page<span class="token punctuation">,</span> option<span class="token punctuation">:</span> Platform</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'goToReadyForSale'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>option <span class="token operator">===</span> <span class="token string">'iOS'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> selector <span class="token operator">=</span> <span class="token template-string"><span class="token string">`a[href$='ios/versioninfo/deliverable']`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitFor</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForNavigation</span><span class="token punctuation">(</span><span class="token punctuation">{</span> waitUntil<span class="token punctuation">:</span> <span class="token string">'networkidle2'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>option <span class="token operator">===</span> <span class="token string">'tvOS'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Not implemented'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getCurrentVersion</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page<span class="token punctuation">,</span> option<span class="token punctuation">:</span> Platform</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getCurrentVersion'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">goToReadyForSale</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> option<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> selector <span class="token operator">=</span> <span class="token template-string"><span class="token string">`#appVerionInfoHeaderId h1`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitFor</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=&gt;</span> element<span class="token punctuation">.</span>textContent<span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> version <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^\D+/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> version<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">createNewSubmission</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page<span class="token punctuation">,</span> option<span class="token punctuation">:</span> Platform</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'createNewSubmission'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> version <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCurrentVersion</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> option<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">selectVersionOrPlatform</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> option<span class="token punctuation">,</span> version<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">goToPrepareSubmission</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page<span class="token punctuation">,</span> option<span class="token punctuation">:</span> Platform</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'goToPrepareSubmission'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> xPath <span class="token operator">=</span> <span class="token function">getPrepareSubmissionXPath</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForXPath</span><span class="token punctuation">(</span>xPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token string">'#appStorePageContent p.status.waiting'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">typeVersionInformation</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page<span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`typeVersionInformation: START\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\nEND`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> xPath <span class="token operator">=</span> <span class="token template-string"><span class="token string">`//label[contains(text(), "What's New in This Version")]/following-sibling::span//span//textarea`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForXPath</span><span class="token punctuation">(</span>xPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    element<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> typePromotionalText <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>page<span class="token punctuation">:</span> Page<span class="token punctuation">,</span> text <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`typePromotionalText: START\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\nEND`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> xPath <span class="token operator">=</span> <span class="token template-string"><span class="token string">`//label[contains(text(), "Promotional Text")]/following-sibling::span//span//textarea`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForXPath</span><span class="token punctuation">(</span>xPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    element<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">selectBuild</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page<span class="token punctuation">,</span> buildVersion<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'selectBuild'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> deleteIconSelector <span class="token operator">=</span> <span class="token string">'td a.deleteIcon'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> deleteIconElement <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span>deleteIconSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>deleteIconElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> deleteIconElement<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> addButtonXPath <span class="token operator">=</span> <span class="token template-string"><span class="token string">`//h1[contains(text(), "Build")]//a[contains(@class, "addIcon")]`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> addButtonElement <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForXPath</span><span class="token punctuation">(</span>addButtonXPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> addButtonElement<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> buildOnListXPath <span class="token operator">=</span> <span class="token template-string"><span class="token string">`//div[contains(@class, "buildModalList")]//tr[td//text()[contains(., "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>buildVersion<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">")]]`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> buildOnListElement <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForXPath</span><span class="token punctuation">(</span>buildOnListXPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> buildCheckboxElement <span class="token operator">=</span> <span class="token keyword">await</span> buildOnListElement<span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'a.radiostyle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>buildCheckboxElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Missing build version checkbox'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">await</span> buildCheckboxElement<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token string">'div.buildModalList a.radiostyle.checked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> buttonElement <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token string">'.modal-buttons .primary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> buttonElement<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">saveChanges</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'saveChanges'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> xPath <span class="token operator">=</span>
    <span class="token string">'//div[contains(@class, "pane-layout-content-header-buttons")]//button[span[contains(text(), "Save")]]'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForXPath</span><span class="token punctuation">(</span>xPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">submitForReview</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">:</span> Page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'submitForReview'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> xPath <span class="token operator">=</span>
    <span class="token string">'//div[contains(@class, "pane-layout-content-header-buttons")]//button[contains(text(), "Submit for Review")]'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForXPath</span><span class="token punctuation">(</span>xPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> element<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> accountName<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> argv<span class="token punctuation">.</span>login <span class="token operator">||</span> argv<span class="token punctuation">.</span>l<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>accountName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Missing argument --login | -l'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> password<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> argv<span class="token punctuation">.</span>password <span class="token operator">||</span> argv<span class="token punctuation">.</span>p<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Missing argument --password | -p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> appAppleId <span class="token operator">=</span> argv<span class="token punctuation">.</span>appleId <span class="token operator">||</span> argv<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>appAppleId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Missing argument --appleId | --id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> versionInformation <span class="token operator">=</span> argv<span class="token punctuation">.</span>versionInformation <span class="token operator">||</span> argv<span class="token punctuation">.</span>v<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>versionInformation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Missing argument --versionInformation | -v'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> buildVersion<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> argv<span class="token punctuation">.</span>buildVersion <span class="token operator">||</span> argv<span class="token punctuation">.</span>b<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>buildVersion<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Missing argument --buildVersion | -b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> browser <span class="token operator">=</span> <span class="token keyword">await</span> puppeteer<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    headless<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token punctuation">(</span>argv<span class="token punctuation">.</span>headless <span class="token operator">===</span> <span class="token string">'false'</span> <span class="token operator">||</span> argv<span class="token punctuation">.</span>h <span class="token operator">===</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'newPage'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span><span class="token function">newPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">loadCookies</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'https://appstoreconnect.apple.com/'</span><span class="token punctuation">;</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`go to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>authFrameSelector<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>homePageSelector<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">isLoginForm</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">login</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> accountName<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForNavigation</span><span class="token punctuation">(</span><span class="token punctuation">{</span> waitUntil<span class="token punctuation">:</span> <span class="token string">'networkidle2'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForSelector</span><span class="token punctuation">(</span>homePageSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">isHomePage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">goToApps</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> teamName<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> argv<span class="token punctuation">.</span>teamName <span class="token operator">||</span> argv<span class="token punctuation">.</span>t<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>teamName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">selectTeam</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> teamName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">await</span> <span class="token function">goToApp</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> appAppleId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> isSubmission <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">isActiveSubmission</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> Platform<span class="token punctuation">.</span>iOS<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isSubmission <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">createNewSubmission</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> Platform<span class="token punctuation">.</span>iOS<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">await</span> <span class="token function">goToPrepareSubmission</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> Platform<span class="token punctuation">.</span>iOS<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">typeVersionInformation</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> versionInformation<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> promotionalText <span class="token operator">=</span> argv<span class="token punctuation">.</span>promotionalText <span class="token operator">||</span> argv<span class="token punctuation">.</span>r<span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">typePromotionalText</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> promotionalText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">selectBuild</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> buildVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">saveChanges</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// await submitForReview(page);</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">await</span> <span class="token function">saveCookies</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> browser<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Compile program<br><code>npm run compile</code></p></li></ul><h2 id="How-to-use-program"><a href="#How-to-use-program" class="headerlink" title="How to use program."></a>How to use program.</h2><p>The program requires minimum options to provide a new version in the app store, ie:</p><ul><li><code>--login || -l &amp;&amp; --password || -p</code> - Login data.</li><li><code>--appleId || --id</code> - Application ID (AppleId).</li><li><code>--versionInformation || -v</code> - Information about the new version (Apple requires us to know what’s new appeared in the new version).</li><li><code>--buildVersion || -b</code> - Build version number sent to Testflight.</li></ul><p>optional:</p><ul><li><code>--headless || -h</code> - set <code>false</code> to see browser.</li><li><code>--promotionalText || -r</code> - Promotional text.</li><li><code>--teamName || -t</code> - Team name (if we belong to more than one).</li></ul><p>Example use:<br><code>npm run start -- -l studiolacosanostra@gmail.com -p &lt;password&gt; --id 14445343 -v "Some awesome feature" -b 5.6.3</code></p><h2 id="How-to-debug-and-develop-the-program"><a href="#How-to-debug-and-develop-the-program" class="headerlink" title="How to debug and develop the program"></a>How to debug and develop the program</h2><p>To simplify my work during debugging I added a debug package. By adding env at the start of the program, we have an insight into the various stages of the program.</p><p>Example use:<br><code>DEBUG=apple-app-store* npm run start -- -l studiolacosanostra@gmail.com -p &lt;password&gt; --id 14445343 -v "Some awesome feature" -b 5.6.3 -h false</code></p><pre class="line-numbers language-bash"><code class="language-bash">  apple-app-store newPage +0ms
  apple-app-store loadCookies +449ms
  apple-app-store go to https://appstoreconnect.apple.com/ +2ms
  apple-app-store isLoginForm +4s
  apple-app-store login +5ms
  apple-app-store clickSignInButton +3s
  apple-app-store clickSignInButton +2s
Verify device.
  apple-app-store openVerifyDeviceOptions +1s
  apple-app-store usePhoneTextCode +150ms
  apple-app-store askForVerificationCode +81ms
Please type your verification code: 581108
Thank you for verification code: 581108
  apple-app-store clickTrustBrowser +12s
  apple-app-store isHomePage +2s
  apple-app-store goToApps +2ms
  apple-app-store goToApp +8s
  apple-app-store isActiveSubmission +12s
  apple-app-store goToPrepareSubmission +2s
  apple-app-store typeVersionInformation: START
  apple-app-store Some awesome feature
  apple-app-store END +6s
  apple-app-store typePromotionalText: START
  apple-app-store 
  apple-app-store END +192ms
  apple-app-store selectBuild +130ms
  apple-app-store saveChanges +8s
  apple-app-store saveCookies +408ms
  apple-app-store close +3ms
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>When logging in, Apple asks you to enter the code from a trusted device. I improved login by remembering cookies which reduces the number of attempts to log into the app store, but to completely automate it would be necessary to add a GSM modem that will send this code to the server when it is needed. Unfortunately, you can not disable two-factor verification. :(</p><p>source code: <a href="https://github.com/studioLaCosaNostra/app-store-submission-cli" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/studioLaCosaNostra/app-store-submission-cli</a></p></div><div>Word count: 2k</div></article><div class="newsletter-form"><p><b>Want to know more and be immediately informed about new posts?</b></p><p>Let's stay in touch and leave your email:</p><newsletter-subscribe-form newsletter="f4bac83a-d13d-4d9a-91d1-84e66abb6176"></newsletter-subscribe-form></div><div class="blog-post-comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the comments.</noscript></div></div>Related posts:<ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-img"><img src="/2019/01/23/how-to-retrieve-information-from-adsense-about-the-current-account-balance/title-image.png" loading="lazy"></div><div class="popular-posts-title"><h3><a href="/2019/01/23/how-to-retrieve-information-from-adsense-about-the-current-account-balance/" title="How to retrieve information from Adsense about the current account balance." rel="bookmark">How to retrieve information from Adsense about the current account balance.</a></h3></div></li></ul><script type="application/ld+json">{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "thumbnailUrl": "https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/title-image.png",
  "url": "https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/",
  "name": "How to automate iOS application submission process with puppeteer",
  "headline": "How to automate iOS application submission process with puppeteer",
  "dateCreated": "2020-01-08T19:21:28.883Z",
  "datePublished": "2020-01-08T19:21:28.883Z",
  "dateModified": "2020-01-08T19:21:28.883Z",
  "image": "https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/title-image.png",
  "keywords": [
    "node.js","puppeteer","app store","apple"
  ],
  "mainEntityOfPage": "https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/",
  "author": {
    "@type": "Organization",
    "name": "Studio La Cosa Nostra"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Studio La Cosa Nostra",
    "url": "https://studiolacosanostra.github.io",
    "logo": {
      "@type": "ImageObject",
      "width": "615",
      "height": "615",
      "url": "https://studiolacosanostra.github.io/images/logo.png"
    }
  }
}</script><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/">Home</a></li><li><a href="/projects">Projects</a></li></ul></div><div id="toc-footer" style="display:none"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Setup-project"><span class="toc-number">1.</span> <span class="toc-text">Setup project.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-use-program"><span class="toc-number">2.</span> <span class="toc-text">How to use program.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-debug-and-develop-the-program"><span class="toc-number">3.</span> <span class="toc-text">How to debug and develop the program</span></a></li></ol></div><div id="share-footer" style="display:none"><link rel="stylesheet" href="/css/prism.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism.css"></noscript><link rel="stylesheet" href="/css/prism-line-numbers.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism-line-numbers.css"></noscript><ul><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;text=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;title=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;is_video=false&amp;description=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=How to automate iOS application submission process with puppeteer&amp;body=Check out this article: https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;title=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;title=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;title=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;title=How to automate iOS application submission process with puppeteer" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.tumblr.com/share/link?url=https://studiolacosanostra.github.io/2019/06/02/How-to-automate-iOS-application-submission-process-with-puppeteer/&amp;name=How to automate iOS application submission process with puppeteer&amp;description=" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li></ul></div><div id="actions-footer"><a id="menu" class="icon" href="#" onclick="return $(&quot;#nav-footer&quot;).toggle(),!1"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a> <a id="toc" class="icon" href="#" onclick="return $(&quot;#toc-footer&quot;).toggle(),!1"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a> <a id="share" class="icon" href="#" onclick="return $(&quot;#share-footer&quot;).toggle(),!1"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a> <a id="top" style="display:none" class="icon" href="#" onclick="$(&quot;html, body&quot;).animate({scrollTop:0},&quot;fast&quot;)"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></div></div></div><footer id="footer"><div class="footer-left">Copyright © 2020 Studio La Cosa Nostra | Words: 14.4k</div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/projects">Projects</a></li><li><a href="/privacy-policy.html">Privacy Policy</a></li></ul></nav></div></footer></div><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"></noscript><link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css"></noscript><script src="/lib/jquery/jquery.min.js"></script><script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script><script>$(document).ready(function () {
    document.querySelectorAll('article li img, article p img, article td img').forEach((element) => {
      const src = element.getAttribute('src');
      element.addEventListener('click', (e) => {
        e.preventDefault();
        if (window.trackOutboundLink) {
          trackOutboundLink(src);
        }
        window.open(src, "_blank");
      });
    });
  });</script><script src="/js/main.js"></script><script type="text/javascript">var disqus_shortname="studio-la-cosa-nostra";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/studioLaCosaNostra/cookie-consent@latest/dist/cookie-consent/cookie-consent.js"></script><script async="" type="text/javascript" src="https://cdn.jsdelivr.net/npm/@email-newsletter/newsletter-subscribe-form@0.0.9/custom-element/main-es5.js"></script><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/@angular/material@8.1.0/prebuilt-themes/indigo-pink.css" rel="stylesheet"><script type="application/ld+json">{
      "@context": "http://schema.org",
      "@type": "WebSite",
      "url": "https://studiolacosanostra.github.io",
      "name": "Studio La cosa nostra dev blog"
    }</script><script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": "Studio La cosa nostra dev blog",
        "email": "studiolacosanostra@gmail.com",
        "url": "https://studiolacosanostra.github.io",
        "sameAs": [
          "https://www.facebook.com/studiolacosanostra/",
          "https://twitter.com/la_cosa_nostrai",
          "https://github.com/studioLaCosaNostra",
          "https://play.google.com/store/apps/developer?id=La+cosa+nostra",
          "https://www.youtube.com/channel/UCTCoOqyugQFUTX1it84LkRA",
          "https://www.linkedin.com/company/studio-la-cosa-nostra/"
        ]
      }</script></body></html>
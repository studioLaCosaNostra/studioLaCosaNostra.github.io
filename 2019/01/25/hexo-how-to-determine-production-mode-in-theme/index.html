<!DOCTYPE html><html lang="e"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="To determine whether we are in production or development mode, we have an available variable in the template called env.Unfortunately, the hexo documentation does not give us details of what may be th"><meta name="keywords" content="hexo,javascript"><meta property="og:type" content="article"><meta property="og:title" content="Hexo - How to determine production mode in theme"><meta property="og:url" content="https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/index.html"><meta property="og:site_name" content="Studio La cosa nostra blog, game dev"><meta property="og:description" content="To determine whether we are in production or development mode, we have an available variable in the template called env.Unfortunately, the hexo documentation does not give us details of what may be th"><meta property="og:locale" content="en"><meta property="og:image" content="https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/hexo-logo.png"><meta property="og:updated_time" content="2019-03-06T14:18:01.992Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Hexo - How to determine production mode in theme"><meta name="twitter:description" content="To determine whether we are in production or development mode, we have an available variable in the template called env.Unfortunately, the hexo documentation does not give us details of what may be th"><meta name="twitter:image" content="https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/hexo-logo.png"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><title>Hexo - How to determine production mode in theme</title><link rel="stylesheet" href="/css/style.css" media="none" onload='"all"!=media&&(media="all")'><noscript><link rel="stylesheet" href="/css/style.css"></noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnify/2.3.2/css/magnify.min.css" media="none" onload='"all"!=media&&(media="all")'><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnify/2.3.2/css/magnify.min.css"></noscript><link rel="stylesheet" href="/css/rtl.css" media="none" onload='"all"!=media&&(media="all")'><noscript><link rel="stylesheet" href="/css/rtl.css"></noscript><link rel="amphtml" href="https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/amp/index.html"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-7811559275890870",enable_page_level_ads:!0})</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-133020393-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-133020393-1")</script><meta name="google-site-verification" content="M3LE90r-9Zi3bh6WJc9u3Dv4Y4iN5uAbCLOoKKB5STg"><link rel="canonical" href="https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/"><link rel="stylesheet" href="/css/prism.css" media="none" onload='"all"!=media&&(media="all")'><noscript><link rel="stylesheet" href="/css/prism.css"></noscript><link rel="stylesheet" href="/css/prism-line-numbers.css" media="none" onload='"all"!=media&&(media="all")'><noscript><link rel="stylesheet" href="/css/prism-line-numbers.css"></noscript><link rel="stylesheet" href="/css/prism.css" media="none" onload="if(media!='all')media='all'"><noscript><link rel="stylesheet" href="/css/prism.css"></noscript>
<link rel="stylesheet" href="/css/prism-line-numbers.css" media="none" onload="if(media!='all')media='all'"><noscript><link rel="stylesheet" href="/css/prism-line-numbers.css"></noscript></head><body class="max-width mx-auto px3 ltr"><div id="header-post"><a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")' style="display:none"><i class="fas fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/projects">Projects</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="/2019/02/11/How-to-run-PIXI-in-angular-app/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class="icon" href="/2019/01/23/how-to-retrieve-information-from-adsense-about-the-current-account-balance/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id="i-prev" class="info" style="display:none">Previous post</span> <span id="i-next" class="info" style="display:none">Next post</span> <span id="i-top" class="info" style="display:none">Back to top</span> <span id="i-share" class="info" style="display:none">Share post</span></span><br><div id="share" style="display:none"><ul><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&text=Hexo - How to determine production mode in theme"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&title=Hexo - How to determine production mode in theme"><i class="fab fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&is_video=false&description=Hexo - How to determine production mode in theme"><i class="fab fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Hexo - How to determine production mode in theme&body=Check out this article: https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/"><i class="fas fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&title=Hexo - How to determine production mode in theme"><i class="fab fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&title=Hexo - How to determine production mode in theme"><i class="fab fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&title=Hexo - How to determine production mode in theme"><i class="fab fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&title=Hexo - How to determine production mode in theme"><i class="fab fa-digg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.tumblr.com/share/link?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&name=Hexo - How to determine production mode in theme&description="><i class="fab fa-tumblr" aria-hidden="true"></i></a></li></ul></div><div id="toc"></div></span></div><div class="content index py4"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Hexo - How to determine production mode in theme</h1><div class="meta"><span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Studio La cosa nostra blog, game dev</span></span><div class="postdate"><time datetime="2019-01-25T01:00:28.000Z" itemprop="datePublished">2019-01-25</time></div><div class="article-tag"><i class="fas fa-tag"></i> <a class="tag-link" href="/tags/hexo/">hexo</a>, <a class="tag-link" href="/tags/javascript/">javascript</a></div></div></header><div class="content" itemprop="articleBody"><p>To determine whether we are in production or development mode, we have an available variable in the template called <code>env</code>.<br>Unfortunately, the hexo documentation does not give us details of what may be there.</p><p><img src="/2019/01/25/hexo-how-to-determine-production-mode-in-theme/hexo-global-variables-list.png" alt="hexo global variables list"></p><p>However, to see what is sitting there, you only need to print the contents of this variable in the template<br>Example <code>themes/&lt;some-theme&gt;/layout/layout.ejs</code></p><pre class="line-numbers language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">></span></span>
&lt;%= JSON.stringify(env, null, 2) %>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Then opening <a href="http://localhost:4000" target="_blank" rel="noopener">localhost:4000</a> you will see this result.</p><p><img src="/2019/01/25/hexo-how-to-determine-production-mode-in-theme/env-return.png" alt="hexo env variable result"></p><p>As we can see, hexo <code>env</code> contains an <code>env</code> property which represents the application mode in which it started.<br>In <code>hexo server</code> mode will be <code>development</code>, and when generating a static page to change the value of <code>env.env</code> just add <code>NODE_ENV=production</code> before <code>hexo generate</code><br><code>NODE_ENV=production hexo generate</code></p><p><img src="/2019/01/25/hexo-how-to-determine-production-mode-in-theme/env-return-production.png" alt="hexo env variable result in production mode"></p><p>Now we can use the acquired variable, for example, to add analytics only in production mode.</p><pre class="line-numbers language-html"><code class="language-html">&lt;% if (env.env === 'production') { %>
  <span class="token comment">&lt;!-- Global site tag (gtag.js) - Google Analytics --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://www.googletagmanager.com/gtag/js?id=GA_TRACKING_ID<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
    window<span class="token punctuation">.</span>dataLayer <span class="token operator">=</span> window<span class="token punctuation">.</span>dataLayer <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">gtag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> dataLayer<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token function">gtag</span><span class="token punctuation">(</span><span class="token string">'js'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">gtag</span><span class="token punctuation">(</span><span class="token string">'config'</span><span class="token punctuation">,</span> <span class="token string">'GA_TRACKING_ID'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
&lt;% } %>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>That’s all, goodbye.</p></div></article><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/">Home</a></li><li><a href="/projects">Projects</a></li></ul></div><div id="toc-footer" style="display:none"></div><div id="share-footer" style="display:none"><ul><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&text=Hexo - How to determine production mode in theme"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&title=Hexo - How to determine production mode in theme"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&is_video=false&description=Hexo - How to determine production mode in theme"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Hexo - How to determine production mode in theme&body=Check out this article: https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&title=Hexo - How to determine production mode in theme"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&title=Hexo - How to determine production mode in theme"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&title=Hexo - How to determine production mode in theme"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&title=Hexo - How to determine production mode in theme"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.tumblr.com/share/link?url=https://studiolacosanostra.github.io/2019/01/25/hexo-how-to-determine-production-mode-in-theme/&name=Hexo - How to determine production mode in theme&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li></ul></div><div id="actions-footer"><a id="menu" class="icon" href="#" onclick='return $("#nav-footer").toggle(),!1'><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a> <a id="toc" class="icon" href="#" onclick='return $("#toc-footer").toggle(),!1'><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a> <a id="share" class="icon" href="#" onclick='return $("#share-footer").toggle(),!1'><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a> <a id="top" style="display:none" class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2019 Studio La cosa nostra blog, game dev | Words: 1.5k</div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/projects">Projects</a></li></ul></nav></div></footer></div><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css" media="none" onload='"all"!=media&&(media="all")'><noscript><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"></noscript><link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css" media="none" onload='"all"!=media&&(media="all")'><noscript><link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css"></noscript><script src="/lib/jquery/jquery.min.js"></script><script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/magnify/2.3.2/js/jquery.magnify.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/magnify/2.3.2/js/jquery.magnify-mobile.min.js"></script><script>$(document).ready(function () {
    console.log('ready', $('article img'))
    const a = $('article p img').each((_, element) => {
      const src = element.getAttribute('src');
      $(element).magnify({
        src: src
      })
    })
  });</script><script src="/js/main.js"></script></body></html>
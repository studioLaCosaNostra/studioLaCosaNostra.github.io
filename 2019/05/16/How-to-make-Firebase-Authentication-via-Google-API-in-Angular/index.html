<!DOCTYPE html><html lang="e"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="msvalidate.01" content="292663BA216F36D83E3C5B19B43A0BA1"><meta name="description" content="This article is a simple guide on how to implement google api in angular and how to integrate a user session with a firebase service.Step 1: Create Angular projectInstall Angular CLI.npm install -g @a"><meta name="keywords" content="angular,firebase,google api"><meta property="og:type" content="article"><meta property="og:title" content="How to make Firebase Authentication via Google API in Angular"><meta property="og:url" content="https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/index.html"><meta property="og:site_name" content="Studio La cosa nostra dev blog"><meta property="og:description" content="This article is a simple guide on how to implement google api in angular and how to integrate a user session with a firebase service.Step 1: Create Angular projectInstall Angular CLI.npm install -g @a"><meta property="og:locale" content="en"><meta property="og:image" content="https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/title-image.png"><meta property="og:updated_time" content="2019-07-09T12:45:55.782Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="How to make Firebase Authentication via Google API in Angular"><meta name="twitter:description" content="This article is a simple guide on how to implement google api in angular and how to integrate a user session with a firebase service.Step 1: Create Angular projectInstall Angular CLI.npm install -g @a"><meta name="twitter:image" content="https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/title-image.png"><meta name="twitter:creator" content="@la_cosa_nostrai"><meta name="twitter:site" content="https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><title>How to make Firebase Authentication via Google API in Angular</title><link rel="stylesheet" href="/css/style.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/style.css"></noscript><link rel="stylesheet" href="/css/rtl.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/rtl.css"></noscript><link rel="amphtml" href="https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/amp/index.html"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-7811559275890870",enable_page_level_ads:!0})</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-133020393-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-133020393-1")</script><meta name="google-site-verification" content="M3LE90r-9Zi3bh6WJc9u3Dv4Y4iN5uAbCLOoKKB5STg"><meta name="yandex-verification" content="d79c4ffd80f4db16"><link rel="canonical" href="https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/"><link rel="stylesheet" href="/css/prism.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism.css"></noscript><link rel="stylesheet" href="/css/prism-line-numbers.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism-line-numbers.css"></noscript><link rel="stylesheet" href="/css/prism.css" media="none" onload="if(media!='all')media='all'"><noscript><link rel="stylesheet" href="/css/prism.css"></noscript>
<link rel="stylesheet" href="/css/prism-line-numbers.css" media="none" onload="if(media!='all')media='all'"><noscript><link rel="stylesheet" href="/css/prism-line-numbers.css"></noscript></head><body class="max-width mx-auto px3 ltr"><div id="header-post"><a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$(&quot;html, body&quot;).animate({scrollTop:0},&quot;fast&quot;)" style="display:none"><i class="fas fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/projects">Projects</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="/2019/05/16/How-to-debug-Angular-tests-in-VSCode/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$(&quot;#i-prev&quot;).toggle()" onmouseout="$(&quot;#i-prev&quot;).toggle()"></i></a></li><li><a class="icon" href="/2019/04/25/How-to-deploy-a-new-application-written-in-angular-to-firebase-hosting/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$(&quot;#i-next&quot;).toggle()" onmouseout="$(&quot;#i-next&quot;).toggle()"></i></a></li><li><a class="icon" href="#" onclick="$(&quot;html, body&quot;).animate({scrollTop:0},&quot;fast&quot;)"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$(&quot;#i-top&quot;).toggle()" onmouseout="$(&quot;#i-top&quot;).toggle()"></i></a></li><li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$(&quot;#i-share&quot;).toggle()" onmouseout="$(&quot;#i-share&quot;).toggle()" onclick="return $(&quot;#share&quot;).toggle(),!1"></i></a></li></ul><span id="i-prev" class="info" style="display:none">Previous post</span> <span id="i-next" class="info" style="display:none">Next post</span> <span id="i-top" class="info" style="display:none">Back to top</span> <span id="i-share" class="info" style="display:none">Share post</span></span><br><div id="share" style="display:none"><meta name="generator" content="Hexo 3.8.0"><link rel="stylesheet" href="/css/prism.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism.css"></noscript><link rel="stylesheet" href="/css/prism-line-numbers.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism-line-numbers.css"></noscript><ul><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;text=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;title=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;is_video=false&amp;description=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=How to make Firebase Authentication via Google API in Angular&amp;body=Check out this article: https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/"><i class="fas fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;title=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;title=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;title=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;title=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-digg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.tumblr.com/share/link?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;name=How to make Firebase Authentication via Google API in Angular&amp;description=" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-tumblr" aria-hidden="true"></i></a></li></ul></div><div id="toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-1-Create-Angular-project"><span class="toc-number">1.</span> <span class="toc-text">Step 1: Create Angular project</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-2-Create-Firebase-project"><span class="toc-number">2.</span> <span class="toc-text">Step 2: Create Firebase project</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-3-Setup-Google-API-project"><span class="toc-number">3.</span> <span class="toc-text">Step 3: Setup Google API project</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-4-Create-the-necessary-services-and-components-in-angular-project"><span class="toc-number">4.</span> <span class="toc-text">Step 4: Create the necessary services and components in angular project</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-5-Test-application-authorization"><span class="toc-number">5.</span> <span class="toc-text">Step 5: Test application authorization</span></a></li></ol></div></span></div><div class="content index py4"><article class="post" itemscope="" itemtype="http://schema.org/BlogPosting"><header><meta name="generator" content="Hexo 3.8.0"><link rel="stylesheet" href="/css/prism.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism.css"></noscript><link rel="stylesheet" href="/css/prism-line-numbers.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism-line-numbers.css"></noscript><h1 class="posttitle" itemprop="name headline">How to make Firebase Authentication via Google API in Angular</h1><div class="meta"><span class="author" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><span itemprop="name">Studio La cosa nostra dev blog</span></span><meta name="generator" content="Hexo 3.8.0"><div class="postdate"><time datetime="2019-05-16T00:00:00.000Z" itemprop="datePublished">2019-05-16</time></div><meta name="generator" content="Hexo 3.8.0"><meta name="generator" content="Hexo 3.8.0"><div class="article-tag"><i class="fas fa-tag"></i> <a class="tag-link" href="/tags/angular/">angular</a>, <a class="tag-link" href="/tags/firebase/">firebase</a>, <a class="tag-link" href="/tags/google-api/">google api</a></div></div></header><meta name="generator" content="Hexo 3.8.0"><div class="content" itemprop="articleBody"><meta name="generator" content="Hexo 3.8.0"><p>This article is a simple guide on how to implement google api in angular and how to integrate a user session with a firebase service.</p><h2 id="Step-1-Create-Angular-project"><a href="#Step-1-Create-Angular-project" class="headerlink" title="Step 1: Create Angular project"></a>Step 1: Create Angular project</h2><ol><li>Install Angular CLI.<br><code>npm install -g @angular/cli</code></li><li>Create new angular project.<br><code>ng new firebase-auth-via-google-api-example</code></li><li>Go to project directory.<br><code>cd firebase-auth-via-google-api-example</code></li><li>Install the required dependencies.<br><code>npm install --save firebase @angular/fire</code><br><code>npm install --save-dev @types/gapi @types/gapi.auth2 @types/gapi.client</code></li></ol><h2 id="Step-2-Create-Firebase-project"><a href="#Step-2-Create-Firebase-project" class="headerlink" title="Step 2: Create Firebase project"></a>Step 2: Create Firebase project</h2><ol><li>Go to <a href="https://console.firebase.google.com/" rel="external nofollow noopener noreferrer" target="_blank">https://console.firebase.google.com/</a></li><li>Create new project.</li></ol><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/firebase-console-projects-dashboard.png" alt="Firebase console: Projects dashboard view"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/firebase-console-add-a-project.png" alt="Firebase console: Add a project view"></td></tr><tr><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/firebase-console-add-a-project-2.png" alt="Firebase console: Add a project view"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/firebase-console-add-a-project-3.png" alt="Firebase console: Add a project view - creating spinner"></td></tr></tbody></table><ol><li>Enable Google sign-in in Authentication.</li></ol><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/firebase-console-project-authentication.png" alt="Firebase console: Add Google sign-in authentication - step 1"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/firebase-console-project-authentication-2.png" alt="Firebase console: Add Google sign-in authentication - step 2"></td></tr><tr><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/firebase-console-project-authentication-3.png" alt="Firebase console: Add Google sign-in authentication - step 3"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/firebase-console-project-authentication-4.png" alt="Firebase console: Add Google sign-in authentication - step 4"></td></tr></tbody></table><ol><li>Add a web app <img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/firebase-console-project-overview-create-web-app-button.png" alt="Firebase console: Project overview - Add a web app button"></li></ol><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/firebase-console-project-overview.png" alt="Firebase console: Add web app - step 1"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/firebase-console-add-a-web-app.png" alt="Firebase console: Add web app - step 1"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/firebase-console-add-a-web-app-2.png" alt="Firebase console: Add web app - step 2"></td></tr></tbody></table><p>Copy firebase config to <code>src/environments/environment.ts</code>.</p><pre class="line-numbers language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">const</span> environment <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  firebase<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    apiKey<span class="token punctuation">:</span> <span class="token string">"AIzaSyCq9YuvCvVkjdQrhm3hFTQboI2CV_SZnqI"</span><span class="token punctuation">,</span>
    authDomain<span class="token punctuation">:</span> <span class="token string">"api-example-e267d.firebaseapp.com"</span><span class="token punctuation">,</span>
    databaseURL<span class="token punctuation">:</span> <span class="token string">"https://api-example-e267d.firebaseio.com"</span><span class="token punctuation">,</span>
    projectId<span class="token punctuation">:</span> <span class="token string">"api-example-e267d"</span><span class="token punctuation">,</span>
    storageBucket<span class="token punctuation">:</span> <span class="token string">"api-example-e267d.appspot.com"</span><span class="token punctuation">,</span>
    messagingSenderId<span class="token punctuation">:</span> <span class="token string">"687667050591"</span><span class="token punctuation">,</span>
    appId<span class="token punctuation">:</span> <span class="token string">"1:687667050591:web:695d797c2e266a7c"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Step-3-Setup-Google-API-project"><a href="#Step-3-Setup-Google-API-project" class="headerlink" title="Step 3: Setup Google API project"></a>Step 3: Setup Google API project</h2><ul><li>Go to <a href="https://console.developers.google.com" rel="external nofollow noopener noreferrer" target="_blank">https://console.developers.google.com</a></li><li>Navigate to project Credentials.</li></ul><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/google-apis-project-dashboard.png" alt="Google APIs console: Dashboard"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/google-apis-project-menu.png" alt="Google APIs console: Menu"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/google-apis-project-menu-2.png" alt="Google APIs console: Menu"></td></tr></tbody></table><ul><li>Open <strong>OAuth 2.0 client IDs</strong> - <em>Web client (auto created by Google Service)</em><br>Add <strong><a href="http://localhost:4200/" rel="external nofollow noopener noreferrer" target="_blank">http://localhost:4200/</a></strong> to <em>Restrictions - Authorized Javascript origins</em></li></ul><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/google-apis-project-credentials.png" alt="Google APIs console: Credentials"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/google-apis-project-credentials-2.png" alt="Google APIs console: Credentials"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/google-apis-project-credentials-3.png" alt="Google APIs console: Credentials"></td></tr></tbody></table><ul><li><p>Set email in OAuth consent screen.<br><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/google-apis-project-credentials-oauth-consent-screen.png" alt="Google APIs console: Credentials - OAuth consent screen"></p></li><li><p>Copy client ID to <code>src/environments/environment.ts</code></p></li></ul><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/google-apis-project-client-id.png" alt="Google APIs console: Credentials - Client ID"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/google-apis-project-client-id-2.png" alt="Google APIs console: Credentials - Client ID"></td></tr></tbody></table><pre class="line-numbers language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">const</span> environment <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  firebase<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    apiKey<span class="token punctuation">:</span> <span class="token string">"AIzaSyCq9YuvCvVkjdQrhm3hFTQboI2CV_SZnqI"</span><span class="token punctuation">,</span>
    authDomain<span class="token punctuation">:</span> <span class="token string">"api-example-e267d.firebaseapp.com"</span><span class="token punctuation">,</span>
    databaseURL<span class="token punctuation">:</span> <span class="token string">"https://api-example-e267d.firebaseio.com"</span><span class="token punctuation">,</span>
    projectId<span class="token punctuation">:</span> <span class="token string">"api-example-e267d"</span><span class="token punctuation">,</span>
    storageBucket<span class="token punctuation">:</span> <span class="token string">"api-example-e267d.appspot.com"</span><span class="token punctuation">,</span>
    messagingSenderId<span class="token punctuation">:</span> <span class="token string">"687667050591"</span><span class="token punctuation">,</span>
    appId<span class="token punctuation">:</span> <span class="token string">"1:687667050591:web:695d797c2e266a7c"</span><span class="token punctuation">,</span>
    clientId<span class="token punctuation">:</span> <span class="token string">"687667050591-56og5jl7jah8ijg9ukft5ihbumacqash.apps.googleusercontent.com"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Step-4-Create-the-necessary-services-and-components-in-angular-project"><a href="#Step-4-Create-the-necessary-services-and-components-in-angular-project" class="headerlink" title="Step 4: Create the necessary services and components in angular project"></a>Step 4: Create the necessary services and components in angular project</h2><ul><li>Go to angular project.</li><li><p>Create Google API service.<br><code>ng generate service GAPI</code><br>Copy to <code>src/app/gapi.service.ts</code></p><pre class="line-numbers language-typescript"><code class="language-typescript"><span class="token comment">/// &lt;reference path="../../node_modules/@types/gapi/index.d.ts" /&gt;</span>
<span class="token comment">/// &lt;reference path="../../node_modules/@types/gapi.auth2/index.d.ts" /&gt;</span>
<span class="token comment">/// &lt;reference path="../../node_modules/@types/gapi.client/index.d.ts" /&gt;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable<span class="token punctuation">,</span> Observer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> environment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/environments/environment'</span><span class="token punctuation">;</span>

@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token punctuation">:</span> <span class="token string">'root'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GAPIService</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">readonly</span> url<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'https://apis.google.com/js/api.js'</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> loaded <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token function">loadGapi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Observable<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Observable</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">observer<span class="token punctuation">:</span> Observer<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>loaded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        observer<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        observer<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      node<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>url<span class="token punctuation">;</span>
      node<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> <span class="token string">'text/javascript'</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
      node<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>loaded <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        observer<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        observer<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      node<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        observer<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">initClient</span><span class="token punctuation">(</span>baseScopes<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadGapi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token function-variable function">initClient</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">await</span> gapi<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              apiKey<span class="token punctuation">:</span> environment<span class="token punctuation">.</span>firebase<span class="token punctuation">.</span>apiKey<span class="token punctuation">,</span>
              clientId<span class="token punctuation">:</span> environment<span class="token punctuation">.</span>firebase<span class="token punctuation">.</span>clientId<span class="token punctuation">,</span>
              scope<span class="token punctuation">:</span> baseScopes<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        gapi<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'client:auth2'</span><span class="token punctuation">,</span> initClient<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Create Google Authentication service.<br><code>ng generate service google-auth</code><br>Copy to <code>src/app/google-auth.service.ts</code></p><pre class="line-numbers language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable<span class="token punctuation">,</span> NgZone <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AngularFireAuth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/fire/auth'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> environment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/environments/environment'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> auth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'firebase/app'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable<span class="token punctuation">,</span> ReplaySubject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GAPIService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./gapi.service'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> firebase <span class="token keyword">from</span> <span class="token string">'firebase'</span><span class="token punctuation">;</span>

@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token punctuation">:</span> <span class="token string">'root'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GoogleAuthService</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> isLoggedIn$ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReplaySubject</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> user$ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReplaySubject</span><span class="token operator">&lt;</span>firebase<span class="token punctuation">.</span>User<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> afAuth<span class="token punctuation">:</span> AngularFireAuth<span class="token punctuation">,</span> <span class="token keyword">public</span> gapiService<span class="token punctuation">:</span> GAPIService<span class="token punctuation">,</span> <span class="token keyword">private</span> ngZone<span class="token punctuation">:</span> NgZone</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isLoggedIn$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>afAuth<span class="token punctuation">.</span>auth<span class="token punctuation">.</span><span class="token function">onAuthStateChanged</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>ngZone<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isLoggedIn$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>user$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">isLoggedIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Observable<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isLoggedIn$<span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Observable<span class="token operator">&lt;</span>firebase<span class="token punctuation">.</span>User<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>user$<span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">signOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">signOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token function">initAuth2</span><span class="token punctuation">(</span>baseScopes<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gapiService<span class="token punctuation">.</span><span class="token function">initClient</span><span class="token punctuation">(</span>baseScopes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>gapi<span class="token punctuation">.</span>auth2<span class="token punctuation">.</span><span class="token function">getAuthInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      gapi<span class="token punctuation">.</span>auth2<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        client_id<span class="token punctuation">:</span> environment<span class="token punctuation">.</span>firebase<span class="token punctuation">.</span>clientId<span class="token punctuation">,</span>
        scope<span class="token punctuation">:</span> baseScopes<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">signIn</span><span class="token punctuation">(</span>baseScopes<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initAuth2</span><span class="token punctuation">(</span>baseScopes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> googleUser <span class="token operator">=</span> <span class="token keyword">await</span> gapi<span class="token punctuation">.</span>auth2<span class="token punctuation">.</span><span class="token function">getAuthInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">signIn</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      prompt<span class="token punctuation">:</span> <span class="token string">'select_account'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> googleUser<span class="token punctuation">.</span><span class="token function">getAuthResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>id_token<span class="token punctuation">;</span>
    <span class="token keyword">const</span> credential <span class="token operator">=</span> auth<span class="token punctuation">.</span>GoogleAuthProvider<span class="token punctuation">.</span><span class="token function">credential</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">signInAndRetrieveDataWithCredential</span><span class="token punctuation">(</span>credential<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Create login component.<br><code>ng generate component google-sign-in</code><br>Copy to <code>src/app/google-sign-in/google-sign-in.component.html</code></p><pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-container</span> <span class="token attr-name">*ngIf</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user$ | async as user; else loggedOut<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ user.displayName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user-photo<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{ user.photoURL }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>logout()<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Logout<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-container</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-template</span> <span class="token attr-name">#loggedOut</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>login()<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-template</span><span class="token punctuation">&gt;</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Copy to <code>src/app/google-sign-in/google-sign-in.component.ts</code></p><pre class="line-numbers language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> OnInit <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GoogleAuthService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../google-auth.service'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> firebase <span class="token keyword">from</span> <span class="token string">'firebase'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>

@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token punctuation">:</span> <span class="token string">'app-google-sign-in'</span><span class="token punctuation">,</span>
  templateUrl<span class="token punctuation">:</span> <span class="token string">'./google-sign-in.component.html'</span><span class="token punctuation">,</span>
  styleUrls<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'./google-sign-in.component.scss'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GoogleSignInComponent</span> <span class="token punctuation">{</span>
  user$<span class="token punctuation">:</span> Observable<span class="token operator">&lt;</span>firebase<span class="token punctuation">.</span>User<span class="token operator">&gt;</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span>
    <span class="token parameter"><span class="token keyword">private</span> googleAuth<span class="token punctuation">:</span> GoogleAuthService</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>user$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>googleAuth<span class="token punctuation">.</span>user<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>googleAuth<span class="token punctuation">.</span><span class="token function">signIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>googleAuth<span class="token punctuation">.</span><span class="token function">signOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Add AngularFireModule and AngularFireAuthModule to <code>src/app/app.module.ts</code></p><pre class="line-numbers language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/platform-browser'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NgModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> AppRoutingModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./app-routing.module'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./app.component'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GoogleSignInComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./google-sign-in/google-sign-in.component'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AngularFireModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/fire'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> environment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/environments/environment'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AngularFireAuthModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/fire/auth'</span><span class="token punctuation">;</span>

@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  declarations<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    AppComponent<span class="token punctuation">,</span>
    GoogleSignInComponent
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  imports<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    BrowserModule<span class="token punctuation">,</span>
    AppRoutingModule<span class="token punctuation">,</span>
    AngularFireModule<span class="token punctuation">.</span><span class="token function">initializeApp</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span>firebase<span class="token punctuation">)</span><span class="token punctuation">,</span>
    AngularFireAuthModule
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  providers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  bootstrap<span class="token punctuation">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Add <code>&lt;app-google-sign-in&gt;</code> to <code>src/app/app.component.html</code></p><pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">text-align</span><span class="token punctuation">:</span>center</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-google-sign-in</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-google-sign-in</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="Step-5-Test-application-authorization"><a href="#Step-5-Test-application-authorization" class="headerlink" title="Step 5: Test application authorization"></a>Step 5: Test application authorization</h2><ul><li><p>Start application.<br><code>npm run start</code></p></li><li><p>Go to <a href="http://localhost:4200/" rel="external nofollow noopener noreferrer" target="_blank">http://localhost:4200/</a> and login via google account.</p></li></ul><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/localhost-4200-before-login.png" alt="localhost:4200: Before login"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/google-sign-in-pop-up.png" alt="Google Sign In pop-up"></td><td><img src="/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/localhost-4200-after-login.png" alt="localhost:4200: After login"></td></tr></tbody></table><p>Thats all, now you can extend the capabilities of the application with all the possibilities of google apis and firebase.</p><p>The repository of the entire example described in this article is on github.<br><a href="https://github.com/studioLaCosaNostra/firebase-auth-via-google-api-example" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/studioLaCosaNostra/firebase-auth-via-google-api-example</a></p><p>If you have any problems in any of the steps of this guide, please write in a comment about it.<br>I will try to write back and refine the article. :)</p></div><div>Word count: 981</div></article><meta name="generator" content="Hexo 3.8.0"><div class="blog-post-comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the comments.</noscript></div></div>Related posts:<ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/2019/04/25/How-to-deploy-a-new-application-written-in-angular-to-firebase-hosting/" title="How to deploy a new application written in angular to firebase hosting" rel="bookmark">How to deploy a new application written in angular to firebase hosting</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/2019/02/18/Angular-Custom-class-decorator-Force-OnInit-OnDestroy-implementation/" title="Angular: Custom class decorator. Force OnInit, OnDestroy implementation." rel="bookmark">Angular: Custom class decorator. Force OnInit, OnDestroy implementation.</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/2019/04/02/Angular-async-pipe-does-not-work-in-the-electron/" title="Angular async pipe does not work in the electron" rel="bookmark">Angular async pipe does not work in the electron</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/2019/04/03/Deploy-angular-application-to-now-sh/" title="Deploy angular application to now.sh" rel="bookmark">Deploy angular application to now.sh</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/2019/05/16/How-to-debug-Angular-tests-in-VSCode/" title="How to debug Angular tests in VSCode" rel="bookmark">How to debug Angular tests in VSCode</a></h3></div></li></ul><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/">Home</a></li><li><a href="/projects">Projects</a></li></ul></div><div id="toc-footer" style="display:none"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-1-Create-Angular-project"><span class="toc-number">1.</span> <span class="toc-text">Step 1: Create Angular project</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-2-Create-Firebase-project"><span class="toc-number">2.</span> <span class="toc-text">Step 2: Create Firebase project</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-3-Setup-Google-API-project"><span class="toc-number">3.</span> <span class="toc-text">Step 3: Setup Google API project</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-4-Create-the-necessary-services-and-components-in-angular-project"><span class="toc-number">4.</span> <span class="toc-text">Step 4: Create the necessary services and components in angular project</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-5-Test-application-authorization"><span class="toc-number">5.</span> <span class="toc-text">Step 5: Test application authorization</span></a></li></ol></div><div id="share-footer" style="display:none"><meta name="generator" content="Hexo 3.8.0"><link rel="stylesheet" href="/css/prism.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism.css"></noscript><link rel="stylesheet" href="/css/prism-line-numbers.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/css/prism-line-numbers.css"></noscript><ul><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;text=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;title=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;is_video=false&amp;description=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=How to make Firebase Authentication via Google API in Angular&amp;body=Check out this article: https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;title=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;title=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;title=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;title=How to make Firebase Authentication via Google API in Angular" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.tumblr.com/share/link?url=https://studiolacosanostra.github.io/2019/05/16/How-to-make-Firebase-Authentication-via-Google-API-in-Angular/&amp;name=How to make Firebase Authentication via Google API in Angular&amp;description=" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li></ul></div><div id="actions-footer"><a id="menu" class="icon" href="#" onclick="return $(&quot;#nav-footer&quot;).toggle(),!1"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a> <a id="toc" class="icon" href="#" onclick="return $(&quot;#toc-footer&quot;).toggle(),!1"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a> <a id="share" class="icon" href="#" onclick="return $(&quot;#share-footer&quot;).toggle(),!1"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a> <a id="top" style="display:none" class="icon" href="#" onclick="$(&quot;html, body&quot;).animate({scrollTop:0},&quot;fast&quot;)"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></div></div></div><footer id="footer"><div class="footer-left">Copyright  2019 Studio La Cosa Nostra | Words: 7.5k</div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/projects">Projects</a></li><li><a href="/privacy-policy.html">Privacy Policy</a></li></ul></nav></div></footer></div><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"></noscript><link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css" media="none" onload="&quot;all&quot;!=media&amp;&amp;(media=&quot;all&quot;)"><noscript><link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css"></noscript><script src="/lib/jquery/jquery.min.js"></script><script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script><script>$(document).ready(function () {
    document.querySelectorAll('article li img, article p img, article td img').forEach((element) => {
      const src = element.getAttribute('src');
      element.addEventListener('click', (e) => {
        e.preventDefault();
        if (window.trackOutboundLink) {
          trackOutboundLink(src);
        }
        window.open(src, "_blank");
      });
    });
  });</script><script src="/js/main.js"></script><script type="text/javascript">var disqus_shortname="studio-la-cosa-nostra";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script></body></html>
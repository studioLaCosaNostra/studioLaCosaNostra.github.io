var searchFunc=function(e,t,r){$.ajax({url:e,dataType:"xml",success:function(e){var n=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("link",this).attr("href")}}).get(),i=document.getElementById(t);if(i){var l=document.getElementById(r);i.addEventListener("input",function(){var e=[],t=function(e){var t,r,n=[];for(t=0;t<e.length;t++)for(r=t+1;r<e.length+1;r++)n.push(e.slice(t,r).join(" "));return n}(this.value.trim().toLowerCase().split(" ")).sort(function(e,t){return t.split(" ").length-e.split(" ").length});if(l.innerHTML="",!(this.value.trim().length<=0)){n.forEach(function(r){var n=0;r.title&&""!==r.title.trim()||(r.title="Untitled");var i=r.title.trim().toLowerCase(),l=r.content.trim().replace(/<style([\s\S]*?)<\/style>/gi,"").replace(/<script([\s\S]*?)<\/script>/gi,"").replace(/<figure([\s\S]*?)<\/figure>/gi,"").replace(/<\/div>/gi,"\n").replace(/<\/li>/gi,"\n").replace(/<li>/gi,"  *  ").replace(/<\/ul>/gi,"\n").replace(/<\/p>/gi,"\n").replace(/<br\s*[\/]?>/gi,"\n").replace(/<[^>]+>/gi,""),s=r.url,a=-1,c=-1,u=-1;if(""!==l&&t.forEach(function(e){a=i.indexOf(e),c=l.indexOf(e),(a>=0||c>=0)&&(n+=1,c<0&&(c=0),u<0&&(u=c))}),n>0){var o={};if(o.rank=n,o.str="<li><a href='"+s+"' class='search-result-title'>"+i+"</a>",u>=0){var f=u-20,g=u+80;f<0&&(f=0),0==f&&(g=100),g>l.length&&(g=l.length);var p=l.substr(f,g),h=new RegExp(t.join("|"),"gi");p=p.replace(h,function(e){return'<em class="search-keyword">'+e+"</em>"}),o.str+='<p class="search-result">'+p+"...</p>"}o.str+="</li>",e.push(o)}}),e.sort(function(e,t){return t.rank-e.rank});for(var r='<ul class="search-result-list">',i=0;i<e.length;i++)r+=e[i].str;r+="</ul>",l.innerHTML=r}})}}})};